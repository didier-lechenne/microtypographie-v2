/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
Typography Fixers Plugin for Obsidian
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var A=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var O=Object.prototype.hasOwnProperty;var $=(a,e)=>{for(var t in e)A(a,t,{get:e[t],enumerable:!0})},U=(a,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of L(e))!O.call(a,s)&&s!==t&&A(a,s,{get:()=>e[s],enumerable:!(r=P(e,s))||r.enumerable});return a};var I=a=>U(A({},"__esModule",{value:!0}),a);var B={};$(B,{default:()=>v});module.exports=I(B);var c=require("obsidian");var l=class{constructor(){this.enabled=!0;this.locale="fr-FR"}setLocale(e){this.locale=e}isLocaleCompatible(e){return e.some(t=>this.locale.startsWith(t))}isActive(){return this.enabled}applyRegexTransform(e,t,r){return e.replace(t,r)}applyMultipleTransforms(e,t){return t.reduce((r,s)=>typeof s.replacement=="string"?this.applyRegexTransform(r,s.pattern,s.replacement):this.applyRegexTransform(r,s.pattern,s.replacement),e)}isValidContext(e,t){let r=e.substring(Math.max(0,t-10),t),s=e.substring(t,Math.min(e.length,t+10));return!(r.includes("`")&&s.includes("`")||r.includes("[")&&s.includes("]"))}logCorrection(e,t){}};var i={NO_BREAK_THIN_SPACE:"\u202F",NO_BREAK_SPACE:"\xA0",NORMAL_SPACE:" ",ELLIPSIS:"\u2026",NDASH:"\u2013",MDASH:"\u2014",LDQUO:'"',RDQUO:'"',LSQUO:"\u201C",RSQUO:"\u201D",LAQUO:"\xAB",RAQUO:"\xBB",TIMES:"\xD7",DIVIDE:"\xF7",PLUS_MINUS:"\xB1",TRADE:"\u2122",REG:"\xAE",COPY:"\xA9",DEGREE:"\xB0",PRIME:"\u2032",DOUBLE_PRIME:"\u2033",SECTION:"\xA7",PARAGRAPH:"\xB6"},k={NBSP_THIN:i.NO_BREAK_THIN_SPACE,NBSP:i.NO_BREAK_SPACE,ELLIPSIS:i.ELLIPSIS,DASH_FR:i.MDASH,DASH_EN:i.NDASH,APOSTROPHE:i.RSQUO},w={MULTIPLE_SPACES:/\s{2,}/g,ELLIPSIS_DOTS:/\.{3,}/g,DOUBLE_DASH:/--/g,STRAIGHT_QUOTES:/"/g,STRAIGHT_APOSTROPHES:/(\w)'/g};var y=class extends l{constructor(){super(...arguments);this.id="ellipsis";this.name="Points de suspension";this.description="Remplace ... par le caract\xE8re ellipse Unicode (\u2026)";this.category="punctuation";this.priority=1}fix(t){return this.applyRegexTransform(t,w.ELLIPSIS_DOTS,i.ELLIPSIS)}handleKeyEvent(t,r){if(t.key==="."&&!t.ctrlKey&&!t.metaKey){let s=r.getCursor(),n=r.getLine(s.line);if(n.substring(0,s.ch).endsWith("..")){let p=n.substring(0,s.ch-2)+i.ELLIPSIS+n.substring(s.ch);return r.setLine(s.line,p),r.setCursor({line:s.line,ch:s.ch-1}),!0}}return!1}getExample(){return{before:"En fait... c'est compliqu\xE9...",after:`En fait${i.ELLIPSIS} c'est compliqu\xE9${i.ELLIPSIS}`}}};var x=class extends l{constructor(){super(...arguments);this.id="dash";this.name="Tirets typographiques";this.description="Convertit -- en \u2014 et am\xE9liore les tirets entre nombres";this.category="punctuation";this.priority=2}fix(t){let r=[{pattern:/--/g,replacement:i.MDASH},{pattern:/(\d+)\s*-\s*(\d+)/g,replacement:`$1${i.NDASH}$2`},{pattern:/\s*—\s*/g,replacement:this.isLocaleCompatible(["fr"])?` ${i.MDASH} `:`${i.MDASH}`}];return this.applyMultipleTransforms(t,r)}handleKeyEvent(t,r){if(t.key==="-"&&!t.ctrlKey&&!t.metaKey){let s=r.getCursor(),n=r.getLine(s.line);if(n.substring(0,s.ch).endsWith("-")){let p=this.isLocaleCompatible(["fr"])?` ${i.MDASH} `:`${i.MDASH}`,o=n.substring(0,s.ch-1)+p+n.substring(s.ch);return r.setLine(s.line,o),r.setCursor({line:s.line,ch:s.ch-1+p.length}),!0}}return!1}getExample(){let t=this.isLocaleCompatible(["fr"])?" \u2014 ":"\u2014";return{before:"P\xE9riode 2020-2024 -- une \xE9poque importante",after:`P\xE9riode 2020${i.NDASH}2024${t}une \xE9poque importante`}}};var f=class extends l{constructor(){super(...arguments);this.id="french-spacing";this.name="Espaces fran\xE7ais";this.description="Ajoute des espaces ins\xE9cables selon les r\xE8gles fran\xE7aises";this.category="spacing";this.priority=3;this.enabled=!0}fix(t){if(!this.isLocaleCompatible(["fr"]))return t;let r=[{pattern:/\s*([;!?»])/g,replacement:`${i.NO_BREAK_THIN_SPACE}$1`},{pattern:/\s*(:)/g,replacement:`${i.NO_BREAK_SPACE}$1`},{pattern:/(«)\s*/g,replacement:`$1${i.NO_BREAK_SPACE}`},{pattern:/(\d)\s+(\d{3})/g,replacement:`$1${i.NO_BREAK_THIN_SPACE}$2`}];return this.applyMultipleTransforms(t,r)}handleKeyEvent(t,r){if(!this.isLocaleCompatible(["fr"]))return!1;let s={"!":i.NO_BREAK_THIN_SPACE,"?":i.NO_BREAK_THIN_SPACE,";":i.NO_BREAK_THIN_SPACE,":":i.NO_BREAK_SPACE};if(s[t.key]&&!t.ctrlKey&&!t.metaKey){let n=r.getCursor(),m=r.getLine(n.line),o=m.substring(0,n.ch).replace(/\s+$/,""),u=s[t.key],g=o+u+t.key+m.substring(n.ch);return r.setLine(n.line,g),r.setCursor({line:n.line,ch:o.length+2}),!0}return!1}getExample(){return{before:"Bonjour ! Comment allez-vous ? Tr\xE8s bien ; merci.",after:`Bonjour${i.NO_BREAK_THIN_SPACE}! Comment allez-vous${i.NO_BREAK_THIN_SPACE}? Tr\xE8s bien${i.NO_BREAK_THIN_SPACE}; merci.`}}};var b=class extends l{constructor(){super(...arguments);this.id="no-space-comma";this.name="Virgules sans espace";this.description="Supprime les espaces avant les virgules et normalise l'espacement";this.category="spacing";this.priority=6}fix(t){let r=[{pattern:/\s+,/g,replacement:","},{pattern:/,\s*/g,replacement:", "},{pattern:/,\s*$/gm,replacement:","},{pattern:/,\s*([)\]}])/g,replacement:",$1"}];return this.applyMultipleTransforms(t,r)}getExample(){return{before:"Pommes , poires,oranges ,bananes",after:"Pommes, poires, oranges, bananes"}}};var E=class extends l{constructor(){super(...arguments);this.id="smart-quotes";this.name="Guillemets intelligents";this.description="Convertit les guillemets droits en guillemets typographiques";this.category="quotes";this.priority=4}fix(t){return this.isLocaleCompatible(["fr"])?this.fixFrenchQuotes(t):this.fixEnglishQuotes(t)}fixFrenchQuotes(t){let r=t,s=!1;return r=r.replace(/"/g,()=>s?(s=!1,`${i.NO_BREAK_SPACE}${i.RAQUO}`):(s=!0,`${i.LAQUO}${i.NO_BREAK_SPACE}`)),r=r.replace(/'/g,i.RSQUO),r}fixEnglishQuotes(t){let r=t,s=!1;return r=r.replace(/"/g,()=>s?(s=!1,i.RDQUO):(s=!0,i.LDQUO)),r=r.replace(/(\w)'/g,`$1${i.RSQUO}`),r}getExample(){return this.isLocaleCompatible(["fr"])?{before:`Il a dit "Bonjour" et c'est parti.`,after:`Il a dit ${i.LAQUO}${i.NO_BREAK_SPACE}Bonjour${i.NO_BREAK_SPACE}${i.RAQUO} et c${i.RSQUO}est parti.`}:{before:`He said "Hello" and it's done.`,after:`He said ${i.LDQUO}Hello${i.RDQUO} and it${i.RSQUO}s done.`}}};var S=class extends l{constructor(){super(...arguments);this.id="math-symbols";this.name="Symboles math\xE9matiques";this.description="Convertit x entre nombres en \xD7 et am\xE9liore d'autres symboles";this.category="symbols";this.priority=5;this.enabled=!1}fix(t){let r=[{pattern:/(\d+)\s*x\s*(\d+)/gi,replacement:`$1${i.TIMES}$2`},{pattern:/(\d+)\s*\*\s*(\d+)/g,replacement:`$1${i.TIMES}$2`},{pattern:/\(tm\)/gi,replacement:i.TRADE},{pattern:/\(r\)/gi,replacement:i.REG},{pattern:/\(c\)/gi,replacement:i.COPY},{pattern:/(\d+)\s*degrees?/gi,replacement:`$1${i.DEGREE}`},{pattern:/(\d+)\s*°/g,replacement:`$1${i.DEGREE}`},{pattern:/\+\/-/g,replacement:i.PLUS_MINUS},{pattern:/\+\s*-/g,replacement:i.PLUS_MINUS},{pattern:/(\d+)\s*\/\s*(\d+)/g,replacement:`$1${i.DIVIDE}$2`}];return this.applyMultipleTransforms(t,r)}getExample(){return{before:"Matrice 3 x 4, temp\xE9rature 20 degrees (c) 2024",after:`Matrice 3${i.TIMES}4, temp\xE9rature 20${i.DEGREE} ${i.COPY} 2024`}}};function D(){return[new y,new x,new f,new b,new E,new S]}var C=class{constructor(e){this.fixers=new Map;this.settings=e,this.initializeFixers()}initializeFixers(){D().forEach(t=>{this.fixers.set(t.id,t),t.id in this.settings.fixers&&(t.enabled=this.settings.fixers[t.id]),t.setLocale&&t.setLocale(this.settings.locale)})}updateSettings(e){this.settings=e,this.fixers.forEach(t=>{t.id in e.fixers&&(t.enabled=e.fixers[t.id]),t.setLocale&&t.setLocale(e.locale)})}getFixers(){return Array.from(this.fixers.values()).sort((e,t)=>e.priority-t.priority)}getEnabledFixers(){return this.getFixers().filter(e=>e.enabled)}getFixersByCategory(e){return this.getFixers().filter(t=>t.category===e)}getFixer(e){return this.fixers.get(e)}processText(e){return this.getEnabledFixers().reduce((r,s)=>{try{return s.fix(r)}catch(n){return r}},e)}processTextWithDetails(e){let t=e,r=this.getEnabledFixers(),s=[],n=0,m=r.reduce((p,o)=>{try{let u=o.fix(p);return u!==p&&(s.push(o.id),n++),u}catch(u){return p}},e);return{original:t,corrected:m,correctionsCount:n,fixersUsed:s}}handleKeyEvent(e,t){if(!this.settings.enableRealTimeCorrection)return!1;let r=this.getEnabledFixers();for(let s of r)if(s.handleKeyEvent)try{if(s.handleKeyEvent(e,t))return!0}catch(n){}return!1}toggleFixer(e,t){let r=this.fixers.get(e);return r?(r.enabled=t,this.settings.fixers[e]=t,!0):!1}toggleCategory(e,t){let r=this.getFixersByCategory(e);return r.forEach(s=>{s.enabled=t,this.settings.fixers[s.id]=t}),r.length}resetToDefaults(){this.fixers.forEach(e=>{let t=this.getDefaultEnabledState(e.id);e.enabled=t,this.settings.fixers[e.id]=t})}getDefaultEnabledState(e){let t=["ellipsis","dash","french-spacing","smart-quotes","no-space-comma"],r=["ellipsis","dash","smart-quotes","no-space-comma"];return this.settings.locale.startsWith("fr")?t.includes(e):r.includes(e)}getStats(){let e=this.getFixers(),t=this.getEnabledFixers(),r={};return e.forEach(s=>{r[s.category]=(r[s.category]||0)+1}),{totalFixers:e.length,enabledFixers:t.length,categoriesCount:r}}};var d=require("obsidian");var h={enableRealTimeCorrection:!0,locale:"fr-FR",fixers:{ellipsis:!0,dash:!0,"french-spacing":!0,"no-space-comma":!0,"smart-quotes":!0,"math-symbols":!1},stats:{totalCorrections:0,correctionsByFixer:{},lastUsed:Date.now()}},H={enableRealTimeCorrection:!0,locale:"en-US",fixers:{ellipsis:!0,dash:!0,"french-spacing":!1,"no-space-comma":!0,"smart-quotes":!0,"math-symbols":!1},stats:{totalCorrections:0,correctionsByFixer:{},lastUsed:Date.now()}},M={enableRealTimeCorrection:!1,locale:"fr-FR",fixers:{ellipsis:!0,dash:!1,"french-spacing":!1,"no-space-comma":!0,"smart-quotes":!1,"math-symbols":!1}},N={french:h,english:H,minimal:M},R={french:"Fran\xE7ais (recommand\xE9)",english:"English",minimal:"Minimal"};function _(a){var t,r;let e={enableRealTimeCorrection:(t=a.enableRealTimeCorrection)!=null?t:h.enableRealTimeCorrection,locale:(r=a.locale)!=null?r:h.locale,fixers:{...h.fixers,...a.fixers},stats:{totalCorrections:0,correctionsByFixer:{},lastUsed:Date.now(),...a.stats}};return Object.keys(h.fixers).forEach(s=>{typeof e.fixers[s]!="boolean"&&(e.fixers[s]=h.fixers[s])}),e}var F=class extends d.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Param\xE8tres Typography Fixers"}),e.createEl("p",{text:"Plugin de correction typographique modulaire pour Obsidian. Corrige automatiquement les erreurs typographiques courantes selon les r\xE8gles fran\xE7aises et anglaises.",cls:"setting-item-description"}),this.createGeneralSettings(e),this.createPresetSettings(e),this.createFixerSettings(e),this.createStatsSection(e),this.createActionsSection(e),this.addCustomStyles(e)}createGeneralSettings(e){e.createEl("h3",{text:"Configuration g\xE9n\xE9rale"}),new d.Setting(e).setName("Correction en temps r\xE9el").setDesc("Active la correction automatique pendant la frappe").addToggle(t=>t.setValue(this.plugin.settings.enableRealTimeCorrection).onChange(async r=>{this.plugin.settings.enableRealTimeCorrection=r,await this.plugin.saveSettings()})),new d.Setting(e).setName("Langue").setDesc("Langue pour les r\xE8gles typographiques").addDropdown(t=>t.addOption("fr-FR","Fran\xE7ais (France)").addOption("fr-CA","Fran\xE7ais (Canada)").addOption("en-US","Anglais (\xC9tats-Unis)").addOption("en-GB","Anglais (Royaume-Uni)").setValue(this.plugin.settings.locale).onChange(async r=>{this.plugin.settings.locale=r,await this.plugin.saveSettings(),this.display()}))}createPresetSettings(e){e.createEl("h3",{text:"Pr\xE9configurations"});let t=e.createEl("p",{text:"Chargez rapidement une configuration optimis\xE9e pour votre usage.",cls:"setting-item-description"}),r=e.createDiv({cls:"typography-preset-container"});Object.entries(N).forEach(([s,n])=>{r.createEl("button",{text:R[s],cls:"mod-cta"}).addEventListener("click",async()=>{this.plugin.settings={...n},await this.plugin.saveSettings(),this.display(),new window.Notice(`Configuration "${R[s]}" appliqu\xE9e`)})})}createFixerSettings(e){e.createEl("h3",{text:"R\xE8gles de correction"}),e.createEl("p",{text:"Activez ou d\xE9sactivez les r\xE8gles typographiques selon vos besoins.",cls:"setting-item-description"});let t=this.plugin.engine.getFixers().reduce((s,n)=>(s[n.category]||(s[n.category]=[]),s[n.category].push(n),s),{}),r={punctuation:"Ponctuation",spacing:"Espacement",symbols:"Symboles",quotes:"Guillemets"};Object.entries(t).forEach(([s,n])=>{e.createEl("h4",{text:r[s]||s,cls:"typography-category-header"}).createEl("button",{text:"Tout basculer",cls:"typography-toggle-category"}).addEventListener("click",async()=>{let u=!n.every(g=>g.enabled);n.forEach(g=>{this.plugin.settings.fixers[g.id]=u}),await this.plugin.saveSettings(),this.display()}),n.forEach(o=>{let u=new d.Setting(e).setName(o.name).setDesc(o.description).addToggle(g=>g.setValue(o.enabled).onChange(async T=>{this.plugin.settings.fixers[o.id]=T,await this.plugin.saveSettings()}));if(o.getExample){let g=o.getExample(),T=u.descEl.createDiv({cls:"typography-example"});T.createDiv({cls:"typography-example-before"}).innerHTML=`<span class="typography-example-label">Avant :</span> <code>${g.before}</code>`,T.createDiv({cls:"typography-example-after"}).innerHTML=`<span class="typography-example-label">Apr\xE8s :</span> <code>${g.after}</code>`}})})}createStatsSection(e){e.createEl("h3",{text:"Statistiques"});let t=this.plugin.engine.getStats(),r=this.plugin.settings,s=e.createDiv({cls:"typography-stats"});if(this.createStatCard(s,"Fixers actifs",`${t.enabledFixers}/${t.totalFixers}`),r.stats){this.createStatCard(s,"Corrections totales",r.stats.totalCorrections.toString());let n=r.stats.lastUsed?new Date(r.stats.lastUsed).toLocaleDateString():"Jamais";this.createStatCard(s,"Derni\xE8re utilisation",n)}new d.Setting(e).setName("R\xE9initialiser les statistiques").setDesc("Remet \xE0 z\xE9ro toutes les statistiques d'utilisation").addButton(n=>n.setButtonText("R\xE9initialiser").setWarning().onClick(async()=>{this.plugin.settings.stats&&(this.plugin.settings.stats.totalCorrections=0,this.plugin.settings.stats.correctionsByFixer={},this.plugin.settings.stats.lastUsed=Date.now()),await this.plugin.saveSettings(),this.display(),new window.Notice("Statistiques r\xE9initialis\xE9es")}))}createActionsSection(e){e.createEl("h3",{text:"Actions"}),new d.Setting(e).setName("Tester les corrections").setDesc("Teste les r\xE8gles actives sur un texte d'exemple").addButton(t=>t.setButtonText("Tester").onClick(()=>{this.showTestModal()})),new d.Setting(e).setName("R\xE9initialiser la configuration").setDesc("Remet tous les param\xE8tres \xE0 leur valeur par d\xE9faut").addButton(t=>t.setButtonText("R\xE9initialiser").setWarning().onClick(async()=>{this.plugin.engine.resetToDefaults(),await this.plugin.saveSettings(),this.display(),new window.Notice("Configuration r\xE9initialis\xE9e")}))}createStatCard(e,t,r){let s=e.createDiv({cls:"typography-stat-card"});s.createEl("span",{text:r,cls:"typography-stat-number"}),s.createEl("span",{text:t,cls:"typography-stat-label"})}showTestModal(){let e='Voici un test... avec des "guillemets", des espaces avant ! Et des tirets -- pour voir.',t=this.plugin.engine.processText(e),r=new window.Modal(this.app);r.setTitle("Test des corrections");let s=r.contentEl;s.createEl("h4",{text:"Texte original :"}),s.createEl("pre",{text:e,cls:"typography-test-original"}),s.createEl("h4",{text:"Texte corrig\xE9 :"}),s.createEl("pre",{text:t,cls:"typography-test-corrected"}),r.open()}addCustomStyles(e){if(!e.querySelector(".typography-custom-styles")){let t=e.createEl("style",{cls:"typography-custom-styles"});t.textContent=`
                .typography-preset-container {
                    display: flex;
                    gap: 8px;
                    margin: 12px 0;
                    flex-wrap: wrap;
                }
                
                .typography-preset-container button {
                    padding: 8px 16px;
                    border-radius: 4px;
                }
                
                .typography-category-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-top: 24px;
                    margin-bottom: 12px;
                    padding-bottom: 8px;
                    border-bottom: 1px solid var(--background-modifier-border);
                }
                
                .typography-toggle-category {
                    font-size: 0.8em;
                    padding: 4px 8px;
                }
                
                .typography-stats {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                    gap: 12px;
                    margin: 16px 0;
                }
                
                .typography-stat-card {
                    background: var(--background-secondary);
                    padding: 12px;
                    border-radius: 6px;
                    text-align: center;
                    border: 1px solid var(--background-modifier-border);
                }
                
                .typography-stat-number {
                    font-size: 1.5em;
                    font-weight: 600;
                    color: var(--color-accent);
                    display: block;
                }
                
                .typography-stat-label {
                    font-size: 0.8em;
                    color: var(--text-muted);
                    margin-top: 4px;
                    display: block;
                }
                
                .typography-test-original,
                .typography-test-corrected {
                    background: var(--background-secondary);
                    padding: 12px;
                    border-radius: 4px;
                    margin: 8px 0;
                }
            `}}};var v=class extends c.Plugin{async onload(){try{await this.loadSettings(),this.engine=new C(this.settings),this.addCommands(),this.registerKeyboardHandlers(),this.addSettingTab(new F(this.app,this)),new c.Notice("Typography Fixers charg\xE9 avec succ\xE8s!",3e3)}catch(e){new c.Notice("Erreur lors du chargement du plugin Typography Fixers",5e3)}}onunload(){}async loadSettings(){let e=await this.loadData();this.settings=_(e||{})}async saveSettings(){await this.saveData(this.settings),this.engine&&this.engine.updateSettings(this.settings)}addCommands(){this.addCommand({id:"fix-selection",name:"Corriger la s\xE9lection",icon:"type",editorCallback:e=>{this.correctSelection(e)}}),this.addCommand({id:"fix-entire-note",name:"Corriger toute la note",icon:"whole-word",editorCallback:e=>{this.correctEntireNote(e)}}),this.addCommand({id:"toggle-realtime",name:"Basculer correction temps r\xE9el",icon:"zap",callback:async()=>{await this.toggleRealTimeCorrection()}}),this.addCommand({id:"show-stats",name:"Afficher les statistiques",icon:"bar-chart",callback:()=>{this.showStats()}})}correctSelection(e){let t=e.getSelection();if(t){let r=this.engine.processTextWithDetails(t);e.replaceSelection(r.corrected),this.showCorrectionNotice(r.correctionsCount,r.fixersUsed),this.updateStats(r.correctionsCount,r.fixersUsed)}else this.correctEntireNote(e)}correctEntireNote(e){let t=e.getValue(),r=this.engine.processTextWithDetails(t);r.corrected!==t?(e.setValue(r.corrected),this.showCorrectionNotice(r.correctionsCount,r.fixersUsed),this.updateStats(r.correctionsCount,r.fixersUsed)):new c.Notice("Aucune correction n\xE9cessaire",2e3)}async toggleRealTimeCorrection(){this.settings.enableRealTimeCorrection=!this.settings.enableRealTimeCorrection,await this.saveSettings();let e=this.settings.enableRealTimeCorrection?"activ\xE9e":"d\xE9sactiv\xE9e";new c.Notice(`Correction temps r\xE9el ${e}`,3e3)}showStats(){let e=this.engine.getStats(),t=this.settings.stats,r=`\u{1F4CA} Statistiques Typography Fixers

`;if(r+=`\u2022 Fixers actifs: ${e.enabledFixers}/${e.totalFixers}
`,t&&(r+=`\u2022 Corrections totales: ${t.totalCorrections}
`,t.lastUsed)){let s=new Date(t.lastUsed).toLocaleDateString();r+=`\u2022 Derni\xE8re utilisation: ${s}
`}new c.Notice(r,8e3)}updateStats(e,t){this.settings.stats||(this.settings.stats={totalCorrections:0,correctionsByFixer:{},lastUsed:Date.now()}),this.settings.stats.totalCorrections+=e,this.settings.stats.lastUsed=Date.now(),t.forEach(r=>{this.settings.stats.correctionsByFixer[r]=(this.settings.stats.correctionsByFixer[r]||0)+1}),this.saveSettings()}showCorrectionNotice(e,t){if(e===0){new c.Notice("Aucune correction appliqu\xE9e",2e3);return}let r=e===1?"1 correction appliqu\xE9e":`${e} corrections appliqu\xE9es`;new c.Notice(r,3e3)}registerKeyboardHandlers(){this.registerDomEvent(document,"keydown",e=>{this.handleKeyDown(e)})}handleKeyDown(e){let t=this.app.workspace.getActiveViewOfType(c.MarkdownView);if(!t||t.getMode()!=="source")return;let r=t.editor;this.engine.handleKeyEvent(e,r)&&(e.preventDefault(),this.updateStats(1,["real-time"]))}getEngine(){return this.engine}async applyCorrections(e){return this.engine.processText(e)}getAvailableFixers(){return this.engine.getFixers().map(e=>e.id)}};
