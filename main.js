/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
Typography Fixers Plugin for Obsidian
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var D=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var K=(o,t)=>{for(var e in t)D(o,e,{get:t[e],enumerable:!0})},H=(o,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of U(t))!I.call(o,s)&&s!==e&&D(o,s,{get:()=>t[s],enumerable:!(r=M(t,s))||r.enumerable});return o};var k=o=>H(D({},"__esModule",{value:!0}),o);var Q={};K(Q,{default:()=>O});module.exports=k(Q);var g=require("obsidian");var a=class{constructor(){this.enabled=!0;this.locale="fr-FR"}setLocale(t){this.locale=t}isLocaleCompatible(t){return t.some(e=>this.locale.startsWith(e))}isActive(){return this.enabled}applyRegexTransform(t,e,r){return t.replace(e,r)}applyMultipleTransforms(t,e){return e.reduce((r,s)=>typeof s.replacement=="string"?this.applyRegexTransform(r,s.pattern,s.replacement):this.applyRegexTransform(r,s.pattern,s.replacement),t)}isValidContext(t,e){let r=t.substring(Math.max(0,e-10),e),s=t.substring(e,Math.min(t.length,e+10));return!(r.includes("`")&&s.includes("`")||r.includes("[")&&s.includes("]"))}logCorrection(t,e){}};var i={NO_BREAK_THIN_SPACE:"\u202F",NO_BREAK_SPACE:"\xA0",NORMAL_SPACE:" ",ELLIPSIS:"\u2026",NDASH:"\u2013",MDASH:"\u2014",LDQUO:"\u201C",RDQUO:"\u201D",LSQUO:"\u201C",RSQUO:"\u2019",LAQUO:"\xAB",RAQUO:"\xBB",BDQUO:"\u201E",SHY:"\xC2\xAD",TIMES:"\xD7",DIVIDE:"\xF7",PLUS_MINUS:"\xB1",MINUS:"\u2212",TRADE:"\u2122",REG:"\xAE",COPY:"\xA9",PRIME:"\u2032",DOUBLE_PRIME:"\u2033",SECTION:"\xA7",PARAGRAPH:"\xB6",BULLET:"\u2022",ARROW_RIGHT:"\u2192",ARROW_LEFT:"\u2190",EURO:"\u20AC",POUND:"\xA3",YEN:"\xA5"},w={MULTIPLE_SPACES:/\s{2,}/g,ELLIPSIS_DOTS:/\.{3,}/g,DOUBLE_DASH:/--/g,STRAIGHT_QUOTES:/"/g,STRAIGHT_APOSTROPHES:/(\w)'/g,MULTIPLY_X:/(\d+)\s*[xX]\s*(\d+)/g,MULTIPLY_STAR:/(\d+)\s*\*\s*(\d+)/g,TRADEMARK_TEXT:/\(tm\)/gi,REGISTERED_TEXT:/\(r\)/gi,COPYRIGHT_TEXT:/\(c\)/gi};var h=class extends a{constructor(){super(...arguments);this.id="Ellipsis";this.name="Points de suspension";this.description="Remplace ... par le caract\xE8re ellipse Unicode (\u2026)";this.category="punctuation";this.priority=1}fix(e){return this.applyRegexTransform(e,w.ELLIPSIS_DOTS,i.ELLIPSIS)}handleKeyEvent(e,r){if(e.key==="."&&!e.ctrlKey&&!e.metaKey){let s=r.getCursor(),n=r.getLine(s.line);if(n.substring(0,s.ch).endsWith("..")){let l=n.substring(0,s.ch-2)+i.ELLIPSIS+n.substring(s.ch);return r.setLine(s.line,l),r.setCursor({line:s.line,ch:s.ch-1}),!0}}return!1}getExample(){return{before:"En fait... c'est compliqu\xE9...",after:`En fait${i.ELLIPSIS} c'est compliqu\xE9${i.ELLIPSIS}`}}};var y=class extends a{constructor(){super(...arguments);this.id="Dash";this.name="Tirets typographiques";this.description="Convertit -- en \u2014 et am\xE9liore les tirets entre nombres";this.category="punctuation";this.priority=2}fix(e){let r=[{pattern:/--/g,replacement:i.MDASH},{pattern:/(\d+)\s*-\s*(\d+)/g,replacement:`$1${i.NDASH}$2`},{pattern:/\s*—\s*/g,replacement:this.isLocaleCompatible(["fr"])?` ${i.MDASH} `:`${i.MDASH}`}];return this.applyMultipleTransforms(e,r)}handleKeyEvent(e,r){if(e.key==="-"&&!e.ctrlKey&&!e.metaKey){let s=r.getCursor(),n=r.getLine(s.line);if(n.substring(0,s.ch).endsWith("-")){let l=this.isLocaleCompatible(["fr"])?` ${i.MDASH} `:`${i.MDASH}`,p=n.substring(0,s.ch-1)+l+n.substring(s.ch);return r.setLine(s.line,p),r.setCursor({line:s.line,ch:s.ch-1+l.length}),!0}}return!1}getExample(){let e=this.isLocaleCompatible(["fr"])?" \u2014 ":"\u2014";return{before:"P\xE9riode 2020-2024 -- une \xE9poque importante",after:`P\xE9riode 2020${i.NDASH}2024${e}une \xE9poque importante`}}};var f=class extends a{constructor(){super(...arguments);this.id="Hyphen";this.name="C\xE9sures typographiques";this.description="Am\xE9liore les tirets et c\xE9sures (fonctionnalit\xE9 basique)";this.category="punctuation";this.priority=10;this.enabled=!1}fix(e){let r=[{pattern:/^(\s*)-\s*/gm,replacement:this.isLocaleCompatible(["fr"])?`$1${i.MDASH} `:`$1${i.MDASH}`},{pattern:/(\n\s*)-\s+/g,replacement:`$1${i.MDASH} `}];return this.applyMultipleTransforms(e,r)}getExample(){return{before:`- Premier point
- Deuxi\xE8me point
- Dialogue`,after:`${i.MDASH} Premier point
${i.MDASH} Deuxi\xE8me point
${i.MDASH} Dialogue`}}};var x=class extends a{constructor(){super(...arguments);this.id="FrenchNoBreakSpace";this.name="Espaces fran\xE7ais";this.description="Ajoute des espaces ins\xE9cables selon les r\xE8gles fran\xE7aises";this.category="spacing";this.priority=3;this.enabled=!0}fix(e){if(!this.isLocaleCompatible(["fr"]))return e;let r=[{pattern:/\s*([;!?»])/g,replacement:`${i.NO_BREAK_THIN_SPACE}$1`},{pattern:/\s*(:)/g,replacement:`${i.NO_BREAK_SPACE}$1`},{pattern:/(«)\s*/g,replacement:`$1${i.NO_BREAK_SPACE}`},{pattern:/(\d)\s+(\d{3})/g,replacement:`$1${i.NO_BREAK_THIN_SPACE}$2`}];return this.applyMultipleTransforms(e,r)}handleKeyEvent(e,r){if(!this.isLocaleCompatible(["fr"]))return!1;let s={"!":i.NO_BREAK_THIN_SPACE,"?":i.NO_BREAK_THIN_SPACE,";":i.NO_BREAK_THIN_SPACE,":":i.NO_BREAK_SPACE};if(s[e.key]&&!e.ctrlKey&&!e.metaKey){let n=r.getCursor(),c=r.getLine(n.line),p=c.substring(0,n.ch).replace(/\s+$/,""),u=s[e.key],d=p+u+e.key+c.substring(n.ch);return r.setLine(n.line,d),r.setCursor({line:n.line,ch:p.length+2}),!0}return!1}getExample(){return{before:"Bonjour ! Comment allez-vous ? Tr\xE8s bien ; merci.",after:`Bonjour${i.NO_BREAK_THIN_SPACE}! Comment allez-vous${i.NO_BREAK_THIN_SPACE}? Tr\xE8s bien${i.NO_BREAK_THIN_SPACE}; merci.`}}};var b=class extends a{constructor(){super(...arguments);this.id="NoSpaceBeforeComma";this.name="Virgules sans espace";this.description="Supprime les espaces avant les virgules et normalise l'espacement";this.category="spacing";this.priority=6}fix(e){let r=[{pattern:/\s+,/g,replacement:","},{pattern:/,\s*/g,replacement:", "},{pattern:/,\s*$/gm,replacement:","},{pattern:/,\s*([)\]}])/g,replacement:",$1"}];return this.applyMultipleTransforms(e,r)}getExample(){return{before:"Pommes , poires,oranges ,bananes",after:"Pommes, poires, oranges, bananes"}}};var E=class extends a{constructor(){super(...arguments);this.id="unit";this.name="Espaces avant unit\xE9s";this.description="Ajoute des espaces ins\xE9cables entre nombres et unit\xE9s (12 h, 50 \u20AC, 25 %)";this.category="spacing";this.priority=7;this.enabled=!0}fix(e){let r=[{pattern:/(\d+)\s*([hms])\b(?![a-zA-Z])/g,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+)\s*(heures?|minutes?|secondes?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+)\s*([€$£¥₹₽])/g,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+)\s*(euros?|dollars?|livres?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*%/g,replacement:`$1${i.NO_BREAK_SPACE}%`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(mg|[cdk]?g|tonnes?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(mm|cm|dm|[dk]?m|km)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(ml|[cdk]?l|litres?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(W|[kmMG]W|kWh?|[kmMG]Wh?)\b/g,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(Hz|[kmMG]Hz)\b/g,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*°([CF]?)\b/g,replacement:`$1${i.NO_BREAK_SPACE}\xB0$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*([kmMGT]?[Bb]|[kmMGT]?o)\b/g,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(octets?|bytes?|bits?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(degrés?|rad|radiants?)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*(km\/h|mph|m\/s)\b/gi,replacement:`$1${i.NO_BREAK_SPACE}$2`}];return this.applyMultipleTransforms(e,r)}isValidContext(e,r){if(!super.isValidContext(e,r))return!1;let s=e.substring(Math.max(0,r-5),r),n=e.substring(r,Math.min(e.length,r+5));return!(s.match(/^\s*#*\s*\d+$/)&&n.match(/^[hH]\d/))}getExample(){return{before:"Temp\xE9rature: 25 \xB0C, vitesse: 120 km/h, taille: 1.8 m, poids: 75 kg, prix: 299 \u20AC",after:`Temp\xE9rature: 25${i.NO_BREAK_SPACE}\xB0C, vitesse: 120${i.NO_BREAK_SPACE}km/h, taille: 1.8${i.NO_BREAK_SPACE}m, poids: 75${i.NO_BREAK_SPACE}kg, prix: 299${i.NO_BREAK_SPACE}\u20AC`}}};var C=class extends a{constructor(){super(...arguments);this.id="Dimension";this.name="Symboles de multiplication";this.description="Convertit x et * entre nombres en symbole \xD7 (12 x 34 \u2192 12\xD734)";this.category="spacing";this.priority=8;this.enabled=!0}fix(e){let r=[{pattern:/(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)/g,replacement:`$1${i.TIMES}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*\*\s*(\d+(?:[,.]?\d+)?)/g,replacement:`$1${i.TIMES}$2`},{pattern:/(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)/g,replacement:`$1${i.TIMES}$2${i.TIMES}$3`},{pattern:/(\d+(?:[,.]?\d+)?)\s*([a-zA-Z]+)\s*[xX]\s*(\d+(?:[,.]?\d+)?)\s*([a-zA-Z]+)?/g,replacement:`$1$2${i.TIMES}$3$4`}];return this.applyMultipleTransforms(e,r)}isValidContext(e,r){if(!super.isValidContext(e,r))return!1;let s=e.substring(Math.max(0,r-10),r),n=e.substring(r,Math.min(e.length,r+10));return!(s.match(/[a-zA-Z]$/)&&n.match(/^[a-zA-Z]/))}getExample(){return{before:"R\xE9solution: 1920 x 1080, format 16 * 9, dimensions 12cm x 34cm x 56cm",after:`R\xE9solution: 1920${i.TIMES}1080, format 16${i.TIMES}9, dimensions 12cm${i.TIMES}34cm${i.TIMES}56cm`}}};var S=class extends a{constructor(){super(...arguments);this.id="SmartQuotes";this.name="Guillemets intelligents";this.description="Convertit les guillemets droits en guillemets typographiques";this.category="quotes";this.priority=4}fix(e){return this.isLocaleCompatible(["fr"])?this.fixFrenchQuotes(e):this.fixEnglishQuotes(e)}fixFrenchQuotes(e){let r=e,s=!1;return r=r.replace(/"/g,()=>s?(s=!1,`${i.NO_BREAK_SPACE}${i.RAQUO}`):(s=!0,`${i.LAQUO}${i.NO_BREAK_SPACE}`)),r=r.replace(/'/g,i.RSQUO),r}fixEnglishQuotes(e){let r=e,s=!1;return r=r.replace(/"/g,()=>s?(s=!1,i.RDQUO):(s=!0,i.LDQUO)),r=r.replace(/(\w)'/g,`$1${i.RSQUO}`),r}getExample(){return this.isLocaleCompatible(["fr"])?{before:`Il a dit "Bonjour" et c'est parti.`,after:`Il a dit ${i.LAQUO}${i.NO_BREAK_SPACE}Bonjour${i.NO_BREAK_SPACE}${i.RAQUO} et c${i.RSQUO}est parti.`}:{before:`He said "Hello" and it's done.`,after:`He said ${i.LDQUO}Hello${i.RDQUO} and it${i.RSQUO}s done.`}}};var T=class extends a{constructor(){super(...arguments);this.id="CurlyQuote";this.name="Apostrophes courbes";this.description="Convertit les apostrophes droites ' en apostrophes typographiques '";this.category="quotes";this.priority=5}fix(e){return this.applyRegexTransform(e,/([a-z])'/gim,`$1${i.RSQUO}`)}handleKeyEvent(e,r){if(e.key==="'"&&!e.ctrlKey&&!e.metaKey){let s=r.getCursor(),n=r.getLine(s.line),c=n.substring(0,s.ch),l=c.slice(-1);if(l&&/[a-zA-Z]/.test(l)){let p=c+i.RSQUO+n.substring(s.ch);return r.setLine(s.line,p),r.setCursor({line:s.line,ch:s.ch+1}),!0}}return!1}getExample(){return{before:"I'm happy, you're great, it's working!",after:`I${i.RSQUO}m happy, you${i.RSQUO}re great, it${i.RSQUO}s working!`}}};var A=class extends a{constructor(){super(...arguments);this.id="Trademark";this.name="Symboles de marques";this.description="Convertit (c) \u2192 \xA9, (r) \u2192 \xAE, (tm) \u2192 \u2122";this.category="symbols";this.priority=9;this.enabled=!0}fix(e){let r=[{pattern:/\(([cC])\)/g,replacement:i.COPY},{pattern:/\(([rR])\)/g,replacement:i.REG},{pattern:/\(([tT][mM])\)/gi,replacement:i.TRADE}];return this.applyMultipleTransforms(e,r)}isValidContext(e,r){if(!super.isValidContext(e,r))return!1;let s=e.substring(Math.max(0,r-20),r),n=e.substring(r,Math.min(e.length,r+20));return!(s.includes("http")||s.includes("www.")||s.includes("/")&&n.includes("/"))}getExample(){return{before:"Microsoft (c) 2025, iPhone (r), Google Search (tm)",after:`Microsoft ${i.COPY} 2025, iPhone ${i.REG}, Google Search ${i.TRADE}`}}};function B(){return[new h,new y,new x,new S,new T,new b,new E,new C,new A,new f]}var $=class{constructor(t){this.fixers=new Map;this.settings=t,this.initializeFixers()}initializeFixers(){B().forEach(e=>{this.fixers.set(e.id,e),e.id in this.settings.fixers&&(e.enabled=this.settings.fixers[e.id]),e.setLocale&&e.setLocale(this.settings.locale)})}updateSettings(t){this.settings=t,this.fixers.forEach(e=>{e.id in t.fixers&&(e.enabled=t.fixers[e.id]),e.setLocale&&e.setLocale(t.locale)})}getFixers(){return Array.from(this.fixers.values()).sort((t,e)=>t.priority-e.priority)}getEnabledFixers(){return this.getFixers().filter(t=>t.enabled)}getFixersByCategory(t){return this.getFixers().filter(e=>e.category===t)}getFixer(t){return this.fixers.get(t)}processText(t){return this.getEnabledFixers().reduce((r,s)=>{try{return s.fix(r)}catch(n){return r}},t)}processTextWithDetails(t){let e=t,r=this.getEnabledFixers(),s=[],n=0,c=r.reduce((l,p)=>{try{let u=p.fix(l);return u!==l&&(s.push(p.id),n++),u}catch(u){return l}},t);return{original:e,corrected:c,correctionsCount:n,fixersUsed:s}}handleKeyEvent(t,e){if(!this.settings.enableRealTimeCorrection)return!1;let r=this.getEnabledFixers();for(let s of r)if(s.handleKeyEvent)try{if(s.handleKeyEvent(t,e))return!0}catch(n){}return!1}toggleFixer(t,e){let r=this.fixers.get(t);return r?(r.enabled=e,this.settings.fixers[t]=e,!0):!1}toggleCategory(t,e){let r=this.getFixersByCategory(t);return r.forEach(s=>{s.enabled=e,this.settings.fixers[s.id]=e}),r.length}resetToDefaults(){this.fixers.forEach(t=>{let e=this.getDefaultEnabledState(t.id);t.enabled=e,this.settings.fixers[t.id]=e})}getDefaultEnabledState(t){let e=["ellipsis","dash","french-spacing","smart-quotes","comma"],r=["ellipsis","dash","smart-quotes","comma"];return this.settings.locale.startsWith("fr")?e.includes(t):r.includes(t)}};var m=require("obsidian");var F={enableRealTimeCorrection:!0,locale:"fr_FR",fixers:{Ellipsis:!0,Dash:!0,SmartQuotes:!0,CurlyQuote:!0,FrenchNoBreakSpace:!0,NoSpaceBeforeComma:!0,Unit:!0,Dimension:!0,Hyphen:!1,Trademark:!0}},_={en_GB:["Ellipsis","Dimension","Unit","Dash","SmartQuotes","NoSpaceBeforeComma","CurlyQuote","Hyphen","Trademark"],fr_FR:["Ellipsis","Dimension","Unit","Dash","SmartQuotes","FrenchNoBreakSpace","NoSpaceBeforeComma","CurlyQuote","Hyphen","Trademark"],fr_CA:["Ellipsis","Dimension","Unit","Dash","SmartQuotes","NoSpaceBeforeComma","CurlyQuote","Hyphen","Trademark"],de_DE:["Ellipsis","Dimension","Unit","Dash","SmartQuotes","NoSpaceBeforeComma","CurlyQuote","Hyphen","Trademark"]},v={fr_FR:"\u{1F1EB}\u{1F1F7} Fran\xE7ais (France)",fr_CA:"\u{1F1E8}\u{1F1E6} Fran\xE7ais (Canada)",en_GB:"\u{1F1EC}\u{1F1E7} English (UK)",de_DE:"\u{1F1E9}\u{1F1EA} Deutsch (Deutschland)"};function L(o){var e,r;let t={enableRealTimeCorrection:(e=o.enableRealTimeCorrection)!=null?e:F.enableRealTimeCorrection,locale:(r=o.locale)!=null?r:F.locale,fixers:{...F.fixers,...o.fixers}};return Object.keys(F.fixers).forEach(s=>{typeof t.fixers[s]!="boolean"&&(t.fixers[s]=F.fixers[s])}),t.locale in _||(t.locale="fr_FR"),t}var P={punctuation:"Ponctuation",spacing:"Espacement",quotes:"Guillemets",symbols:"Symboles"};var N=class extends m.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Param\xE8tres Typography Fixers"}),t.createEl("p",{text:"Plugin de correction typographique bas\xE9 sur JoliTypo. Corrige automatiquement les erreurs typographiques selon les r\xE8gles fran\xE7aises, anglaises et allemandes.",cls:"setting-item-description"}),this.createGeneralSettings(t),this.createFixerSettings(t),this.createActionsSection(t),this.addCustomStyles(t)}createGeneralSettings(t){t.createEl("h3",{text:"Configuration g\xE9n\xE9rale"}),new m.Setting(t).setName("Correction en temps r\xE9el").setDesc("Active la correction automatique pendant la frappe").addToggle(s=>s.setValue(this.plugin.settings.enableRealTimeCorrection).onChange(async n=>{this.plugin.settings.enableRealTimeCorrection=n,await this.plugin.saveSettings()})),new m.Setting(t).setName("Langue typographique").setDesc("Choisissez les r\xE8gles typographiques \xE0 appliquer. Change automatiquement les fixers recommand\xE9s.").addDropdown(s=>(Object.entries(v).forEach(([n,c])=>{s.addOption(n,c)}),s.setValue(this.plugin.settings.locale).onChange(async n=>{this.plugin.settings.locale=n,this.updateFixersForLocale(n),await this.plugin.saveSettings()})));let e=Object.values(this.plugin.settings.fixers).filter(Boolean).length,r=Object.keys(this.plugin.settings.fixers).length;t.createEl("p",{text:`${e}/${r} r\xE8gles activ\xE9es pour ${v[this.plugin.settings.locale]}`,cls:"setting-item-description"})}createFixerSettings(t){t.createEl("h3",{text:"R\xE8gles de correction"}),t.createEl("p",{text:"Activez ou d\xE9sactivez les r\xE8gles typographiques selon vos besoins. Les r\xE8gles recommand\xE9es pour votre langue sont activ\xE9es automatiquement.",cls:"setting-item-description"});let e=this.plugin.engine.getFixers().reduce((r,s)=>(r[s.category]||(r[s.category]=[]),r[s.category].push(s),r),{});Object.entries(e).forEach(([r,s])=>{t.createEl("h4",{text:P[r]||r,cls:"typography-category-header"}).createEl("button",{text:"Tout basculer",cls:"typography-toggle-category"}).addEventListener("click",async()=>{let p=!s.every(u=>u.enabled);s.forEach(u=>{this.plugin.settings.fixers[u.id]=p}),await this.plugin.saveSettings(),this.display()}),s.forEach(l=>{let p=new m.Setting(t).setName(l.name).setDesc(l.description).addToggle(d=>d.setValue(l.enabled).onChange(async R=>{this.plugin.settings.fixers[l.id]=R,await this.plugin.saveSettings()}));if(this.isFixerRecommendedForCurrentLocale(l.id)){let d=p.nameEl.createEl("span",{text:"Recommand\xE9",cls:"typography-recommended-badge"})}if(l.getExample){let d=l.getExample(),R=p.descEl.createDiv({cls:"typography-example"});R.createDiv({cls:"typography-example-before"}).innerHTML=`<span class="typography-example-label">Avant :</span> <code>${d.before}</code>`,R.createDiv({cls:"typography-example-after"}).innerHTML=`<span class="typography-example-label">Apr\xE8s :</span> <code>${d.after}</code>`}})})}createActionsSection(t){t.createEl("h3",{text:"Actions"}),new m.Setting(t).setName("Restaurer la configuration recommand\xE9e").setDesc(`Active les fixers recommand\xE9s pour ${v[this.plugin.settings.locale]}`).addButton(e=>e.setButtonText("Restaurer").onClick(async()=>{this.updateFixersForLocale(this.plugin.settings.locale),await this.plugin.saveSettings(),new m.Notice("Configuration restaur\xE9e")}))}updateFixersForLocale(t){let e=_[t];e&&(Object.keys(this.plugin.settings.fixers).forEach(r=>{this.plugin.settings.fixers[r]=!1}),e.forEach(r=>{this.plugin.settings.fixers[r]=!0}),this.display())}isFixerRecommendedForCurrentLocale(t){let e=_[this.plugin.settings.locale];return e?e.includes(t):!1}showTestModal(){let t=`Voici un test... avec des "guillemets", des espaces avant ! Et des tirets -- pour voir. I'm testing (c) 2025.`,e=this.plugin.engine.processText(t),r=new window.Modal(this.app);r.setTitle("Test des corrections");let s=r.contentEl;s.createEl("h4",{text:"Texte original :"}),s.createEl("pre",{text:t,cls:"typography-test-original"}),s.createEl("h4",{text:"Texte corrig\xE9 :"}),s.createEl("pre",{text:e,cls:"typography-test-corrected"}),t===e&&s.createEl("p",{text:"\u26A0\uFE0F Aucune correction appliqu\xE9e. V\xE9rifiez que les fixers sont activ\xE9s.",cls:"typography-no-changes"}),r.open()}addCustomStyles(t){if(!t.querySelector(".typography-custom-styles")){let e=t.createEl("style",{cls:"typography-custom-styles"});e.textContent=`
                .typography-category-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-top: 24px;
                    margin-bottom: 12px;
                    padding-bottom: 8px;
                    border-bottom: 1px solid var(--background-modifier-border);
                }
                
                .typography-toggle-category {
                    font-size: 0.8em;
                    padding: 4px 8px;
                    border-radius: 4px;
                }
                
                .typography-recommended-badge {
                    display: inline-block;
                    background: var(--color-accent);
                    color: var(--text-on-accent);
                    font-size: 0.7em;
                    padding: 2px 6px;
                    border-radius: 10px;
                    margin-left: 8px;
                    font-weight: 500;
                }
                
                .typography-example {
                    margin-top: 12px;
                    padding: 12px;
                    background: var(--background-primary);
                    border: 1px solid var(--background-modifier-border);
                    border-radius: 6px;
                    font-size: 0.85em;
                    line-height: 1.4;
                }
                
                .typography-example-label {
                    font-weight: 600;
                    color: var(--text-accent);
                    margin-right: 6px;
                }
                
                .typography-example code {
                    background: var(--background-modifier-form-field);
                    color: var(--text-normal);
                    padding: 3px 6px;
                    border-radius: 4px;
                    font-family: var(--font-monospace);
                    font-size: 0.9em;
                    border: 1px solid var(--background-modifier-border-hover);
                }
                
                .typography-example-before {
                    margin-bottom: 6px;
                }
                
                .typography-example-after {
                    margin-top: 6px;
                }
                
                .typography-test-original,
                .typography-test-corrected {
                    background: var(--background-secondary);
                    padding: 12px;
                    border-radius: 4px;
                    margin: 8px 0;
                    font-family: var(--font-monospace);
                    font-size: 0.9em;
                    white-space: pre-wrap;
                }
                
                .typography-no-changes {
                    color: var(--text-warning);
                    font-style: italic;
                    margin-top: 12px;
                }
            `}}};var O=class extends g.Plugin{async onload(){try{await this.loadSettings(),this.engine=new $(this.settings),this.addCommands(),this.registerKeyboardHandlers(),this.addSettingTab(new N(this.app,this)),new g.Notice("Typography Fixers charg\xE9 avec succ\xE8s!",3e3)}catch(t){new g.Notice("Erreur lors du chargement du plugin Typography Fixers",5e3)}}onunload(){}async loadSettings(){let t=await this.loadData();this.settings=L(t||{})}async saveSettings(){await this.saveData(this.settings),this.engine&&this.engine.updateSettings(this.settings)}addCommands(){this.addCommand({id:"fix-selection",name:"Corriger la s\xE9lection",icon:"type",editorCallback:t=>{this.correctSelection(t)}}),this.addCommand({id:"fix-entire-note",name:"Corriger toute la note",icon:"whole-word",editorCallback:t=>{this.correctEntireNote(t)}}),this.addCommand({id:"toggle-realtime",name:"Basculer correction temps r\xE9el",icon:"zap",callback:async()=>{await this.toggleRealTimeCorrection()}})}correctSelection(t){let e=t.getSelection();if(e){let r=this.engine.processTextWithDetails(e);t.replaceSelection(r.corrected),this.showCorrectionNotice(r.correctionsCount,r.fixersUsed)}else this.correctEntireNote(t)}correctEntireNote(t){let e=t.getValue(),r=this.engine.processTextWithDetails(e);r.corrected!==e?(t.setValue(r.corrected),this.showCorrectionNotice(r.correctionsCount,r.fixersUsed)):new g.Notice("Aucune correction n\xE9cessaire",2e3)}async toggleRealTimeCorrection(){this.settings.enableRealTimeCorrection=!this.settings.enableRealTimeCorrection,await this.saveSettings();let t=this.settings.enableRealTimeCorrection?"activ\xE9e":"d\xE9sactiv\xE9e";new g.Notice(`Correction temps r\xE9el ${t}`,3e3)}showCorrectionNotice(t,e){if(t===0){new g.Notice("Aucune correction appliqu\xE9e",2e3);return}let r=t===1?"1 correction appliqu\xE9e":`${t} corrections appliqu\xE9es`;new g.Notice(r,3e3)}registerKeyboardHandlers(){this.registerDomEvent(document,"keydown",t=>{this.handleKeyDown(t)})}handleKeyDown(t){let e=this.app.workspace.getActiveViewOfType(g.MarkdownView);if(!e||e.getMode()!=="source")return;let r=e.editor;this.engine.handleKeyEvent(t,r)&&t.preventDefault()}getEngine(){return this.engine}async applyCorrections(t){return this.engine.processText(t)}getAvailableFixers(){return this.engine.getFixers().map(t=>t.id)}};
