/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
Typography Fixers Plugin for Obsidian
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TypographyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/ui/decorations.ts
var import_view = require("@codemirror/view");
var import_state = require("@codemirror/state");
var currentSettings;
function createDecorations(settings) {
  currentSettings = settings;
  const nonBreakingSpaceDecoration = import_view.Decoration.mark({
    class: "nonBreakingSpace"
  });
  const thinSpaceDecoration = import_view.Decoration.mark({
    class: "thinSpace"
  });
  const emDashDecoration = import_view.Decoration.mark({
    class: "em-dash"
  });
  const regularSpaceDecoration = import_view.Decoration.mark({
    class: "regularSpace"
  });
  return import_view.ViewPlugin.fromClass(class {
    constructor(view) {
      this.decorations = this.buildDecorations(view);
    }
    update(update) {
      if (update.docChanged || update.viewportChanged) {
        this.decorations = this.buildDecorations(update.view);
      }
    }
    buildDecorations(view) {
      const builder = new import_state.RangeSetBuilder();
      if (currentSettings && currentSettings.highlightEnabled) {
        for (let { from, to } of view.visibleRanges) {
          let text = view.state.doc.sliceString(from, to);
          let startPos = from;
          let inFrontmatter = false;
          let inCodeBlock = false;
          let lineStart = true;
          for (let i = 0; i < text.length; i++) {
            const char = text[i];
            const pos = startPos + i;
            if (lineStart && text.substr(i, 3) === "---") {
              inFrontmatter = !inFrontmatter;
              i += 2;
              lineStart = false;
              continue;
            }
            if (lineStart && text.substr(i, 3) === "```") {
              inCodeBlock = !inCodeBlock;
              i += 2;
              lineStart = false;
              continue;
            }
            if (char === "\n") {
              lineStart = true;
            } else if (lineStart && char !== " " && char !== "	") {
              lineStart = false;
            }
            const isInSpecialBlock = inFrontmatter || inCodeBlock;
            if (!isInSpecialBlock) {
              if (char === "\xA0") {
                builder.add(pos, pos + 1, nonBreakingSpaceDecoration);
              }
              if (char === "\u202F") {
                builder.add(pos, pos + 1, thinSpaceDecoration);
              }
              if (char === "\u2014") {
                builder.add(pos, pos + 1, emDashDecoration);
              }
              if (char === " ") {
                builder.add(pos, pos + 1, regularSpaceDecoration);
              }
            }
          }
        }
      }
      return builder.finish();
    }
  }, {
    decorations: (v) => v.decorations
  });
}

// src/ui/statusBar.ts
var import_obsidian = require("obsidian");
function createStatusBarButton(plugin, isEnabled, toggleCallback) {
  const statusBarItemEl = plugin.addStatusBarItem();
  statusBarItemEl.id = "highlight-status-bar-button";
  statusBarItemEl.addClass("mod-clickable");
  (0, import_obsidian.setIcon)(statusBarItemEl, "pilcrow");
  statusBarItemEl.setAttribute("aria-label", "Afficher/Masquer les caract\xE8res invisibles");
  statusBarItemEl.setAttribute("data-tooltip-position", "top");
  updateStatusBarButton(statusBarItemEl, isEnabled);
  statusBarItemEl.onClickEvent(() => {
    toggleCallback();
  });
  return statusBarItemEl;
}
function createTabTitleBarButton(plugin, isEnabled, toggleCallback) {
  const buttonEl = document.createElement("button");
  buttonEl.id = "highlight-tab-title-button";
  buttonEl.className = "clickable-icon view-action";
  buttonEl.setAttribute("aria-label", "Afficher/Masquer les caract\xE8res invisibles");
  (0, import_obsidian.setIcon)(buttonEl, "pilcrow");
  updateTabTitleBarButton(buttonEl, isEnabled);
  buttonEl.addEventListener("click", (event) => {
    event.preventDefault();
    toggleCallback();
  });
  const titleBarEl = document.querySelector(".view-header-title-container");
  if (titleBarEl) {
    const actionsEl = titleBarEl.nextElementSibling;
    if (actionsEl && actionsEl.classList.contains("view-actions")) {
      actionsEl.prepend(buttonEl);
    }
  }
  return buttonEl;
}
function updateStatusBarButton(buttonEl, isEnabled) {
  if (!buttonEl) return;
  if (isEnabled) {
    buttonEl.addClass("is-active");
  } else {
    buttonEl.removeClass("is-active");
  }
}
function updateTabTitleBarButton(buttonEl, isEnabled) {
  if (!buttonEl) return;
  if (isEnabled) {
    buttonEl.addClass("is-active");
  } else {
    buttonEl.removeClass("is-active");
  }
}
function removeStatusBarButton(buttonEl) {
  if (buttonEl) {
    buttonEl.remove();
  }
}
function removeTabTitleBarButton(buttonEl) {
  if (buttonEl) {
    buttonEl.remove();
  }
}

// src/fixers/base/base-fixer.ts
var BaseFixer = class {
  constructor() {
    this.enabled = true;
    this.locale = "fr-FR";
  }
  /**
   * Configuration de la locale (optionnelle)
   */
  setLocale(locale) {
    this.locale = locale;
  }
  /**
   * Vérifie si le fixer est compatible avec la locale actuelle
   */
  isLocaleCompatible(targetLocales) {
    return targetLocales.some(
      (locale) => this.locale.startsWith(locale)
    );
  }
  /**
   * Vérifie si le fixer est activé et compatible
   */
  isActive() {
    return this.enabled;
  }
  /**
   * Applique une transformation regex simple - implémentation
   */
  applyRegexTransform(text, pattern, replacement) {
    if (typeof replacement === "string") {
      return text.replace(pattern, replacement);
    } else {
      return text.replace(pattern, replacement);
    }
  }
  /**
   * Applique plusieurs transformations regex en séquence
   */
  applyMultipleTransforms(text, transforms) {
    return transforms.reduce((result, transform) => {
      if (typeof transform.replacement === "string") {
        return this.applyRegexTransform(result, transform.pattern, transform.replacement);
      } else {
        return this.applyRegexTransform(result, transform.pattern, transform.replacement);
      }
    }, text);
  }
  /**
   * Vérifie si une position dans le texte est dans un contexte valide
   * (pas dans du code, des liens, etc.)
   */
  isValidContext(text, position) {
    const beforeContext = text.substring(Math.max(0, position - 10), position);
    const afterContext = text.substring(position, Math.min(text.length, position + 10));
    if (beforeContext.includes("`") && afterContext.includes("`")) {
      return false;
    }
    if (beforeContext.includes("[") && afterContext.includes("]")) {
      return false;
    }
    return true;
  }
  /**
   * Méthode utilitaire pour logger les corrections (développement)
   */
  logCorrection(original, corrected) {
    if (original !== corrected) {
      console.debug(`[${this.id}] "${original}" \u2192 "${corrected}"`);
    }
  }
};

// src/constants/unicode.ts
var UNICODE_CHARS = {
  // ========================
  // ESPACES SPÉCIAUX
  // ========================
  NO_BREAK_THIN_SPACE: "\u202F",
  NO_BREAK_SPACE: "\xA0",
  NORMAL_SPACE: " ",
  // ========================
  // PONCTUATION
  // ========================
  ELLIPSIS: "\u2026",
  NDASH: "\u2013",
  MDASH: "\u2014",
  // ========================
  // GUILLEMETS ET APOSTROPHES
  // ========================
  LDQUO: "\u201C",
  RDQUO: "\u201D",
  /** LSQUO: '“',  Apostrophe ouvrante (U+2018) - Rarement utilisée */
  RSQUO: "\u2019",
  LAQUO: "\xAB",
  RAQUO: "\xBB",
  BDQUO: "\u201E",
  // &bdquo; or &#8222;
  SHY: "\xC2\xAD",
  // &shy;
  // ========================
  // SYMBOLES MATHÉMATIQUES
  // ========================
  TIMES: "\xD7",
  DIVIDE: "\xF7",
  PLUS_MINUS: "\xB1",
  /** Symbole plus ou moins (U+00B1) */
  MINUS: "\u2212",
  /** Symbole moins (U+2212) - Plus long que le trait d'union standard */
  // ========================
  // SYMBOLES DE MARQUE
  // ========================
  /** Symbole trademark (U+2122) - Remplace (tm) */
  TRADE: "\u2122",
  REG: "\xAE",
  /** Symbole registered (U+00AE) - Remplace (r) */
  COPY: "\xA9",
  /** Symbole copyright (U+00A9) - Remplace (c) */
  // ========================
  // AUTRES SYMBOLES UTILES
  // ========================
  PRIME: "\u2032",
  /** Prime (U+2032) - Minutes, pieds */
  DOUBLE_PRIME: "\u2033",
  /** Double prime (U+2033) - Secondes, pouces */
  SECTION: "\xA7",
  /** Section (U+00A7) */
  PARAGRAPH: "\xB6",
  /** Paragraphe (U+00B6) */
  BULLET: "\u2022",
  /** Puce (U+2022) */
  ARROW_RIGHT: "\u2192",
  /** Flèche droite (U+2192) */
  ARROW_LEFT: "\u2190",
  /** Flèche gauche (U+2190) */
  EURO: "\u20AC",
  /** Euro (U+20AC) */
  POUND: "\xA3",
  /** Livre sterling (U+00A3) */
  YEN: "\xA5"
  /** Yen (U+00A5) */
};
var UNICODE_PATTERNS = {
  MULTIPLE_SPACES: /\s{2,}/g,
  /** Détecte les espaces multiples */
  ELLIPSIS_DOTS: /\.{3,}/g,
  /** Détecte les points de suspension standards */
  DOUBLE_DASH: /--/g,
  /** Détecte les doubles tirets */
  STRAIGHT_QUOTES: /"/g,
  /** Détecte les guillemets droits */
  STRAIGHT_APOSTROPHES: /(\w)'/g,
  /** Détecte les apostrophes droites dans les contractions */
  MULTIPLY_X: /(\d+)\s*[xX]\s*(\d+)/g,
  /** Détecte x entre nombres pour multiplication */
  MULTIPLY_STAR: /(\d+)\s*\*\s*(\d+)/g,
  /** Détecte * entre nombres pour multiplication */
  /** Détecte les symboles de marque textuels */
  TRADEMARK_TEXT: /\(tm\)/gi,
  REGISTERED_TEXT: /\(r\)/gi,
  COPYRIGHT_TEXT: /\(c\)/gi
};

// src/fixers/punctuation/ellipsis.ts
var Ellipsis = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "Ellipsis";
    this.name = "Points de suspension";
    this.description = "Remplace ... par le caract\xE8re ellipse Unicode (\u2026)";
    this.category = "punctuation";
    this.priority = 1;
  }
  /**
   * Transforme les points multiples en ellipse Unicode
   */
  fix(text) {
    return this.applyRegexTransform(
      text,
      UNICODE_PATTERNS.ELLIPSIS_DOTS,
      UNICODE_CHARS.ELLIPSIS
    );
  }
  /**
   * Gère la saisie en temps réel des points de suspension
   */
  handleKeyEvent(event, editor) {
    if (event.key === "." && !event.ctrlKey && !event.metaKey) {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.substring(0, cursor.ch);
      if (beforeCursor.endsWith("..")) {
        const newLine = line.substring(0, cursor.ch - 2) + UNICODE_CHARS.ELLIPSIS + line.substring(cursor.ch);
        editor.setLine(cursor.line, newLine);
        editor.setCursor({
          line: cursor.line,
          ch: cursor.ch - 1
          // Position après l'ellipse
        });
        return true;
      }
    }
    return false;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "En fait... c'est compliqu\xE9...",
      after: `En fait${UNICODE_CHARS.ELLIPSIS} c'est compliqu\xE9${UNICODE_CHARS.ELLIPSIS}`
    };
  }
};

// src/fixers/punctuation/dash.ts
var Dash = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "Dash";
    this.name = "Tirets typographiques";
    this.description = "Convertit -- en \u2014 et am\xE9liore les tirets entre nombres";
    this.category = "punctuation";
    this.priority = 2;
  }
  /**
   * Applique les transformations de tirets
   */
  fix(text) {
    const transforms = [
      // Double tiret vers tiret cadratin
      {
        pattern: /--/g,
        replacement: UNICODE_CHARS.MDASH
      },
      // Tiret entre nombres (dates, plages) vers tiret demi-cadratin
      {
        pattern: /(\d+)\s*-\s*(\d+)/g,
        replacement: `$1${UNICODE_CHARS.NDASH}$2`
      },
      // Espaces autour du tiret cadratin pour le français
      {
        pattern: /\s*—\s*/g,
        replacement: this.isLocaleCompatible(["fr"]) ? ` ${UNICODE_CHARS.MDASH} ` : `${UNICODE_CHARS.MDASH}`
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Gère la saisie en temps réel des doubles tirets
   */
  handleKeyEvent(event, editor) {
    if (event.key === "-" && !event.ctrlKey && !event.metaKey) {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.substring(0, cursor.ch);
      if (beforeCursor.endsWith("-")) {
        const replacement = this.isLocaleCompatible(["fr"]) ? ` ${UNICODE_CHARS.MDASH} ` : `${UNICODE_CHARS.MDASH}`;
        const newLine = line.substring(0, cursor.ch - 1) + replacement + line.substring(cursor.ch);
        editor.setLine(cursor.line, newLine);
        editor.setCursor({
          line: cursor.line,
          ch: cursor.ch - 1 + replacement.length
        });
        return true;
      }
    }
    return false;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    const beforeDash = this.isLocaleCompatible(["fr"]) ? " \u2014 " : "\u2014";
    return {
      before: "P\xE9riode 2020-2024 -- une \xE9poque importante",
      after: `P\xE9riode 2020${UNICODE_CHARS.NDASH}2024${beforeDash}une \xE9poque importante`
    };
  }
};

// src/fixers/punctuation/hyphen.ts
var Hyphen = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "Hyphen";
    this.name = "C\xE9sures typographiques";
    this.description = "Am\xE9liore les tirets et c\xE9sures (fonctionnalit\xE9 basique)";
    this.category = "punctuation";
    this.priority = 10;
    this.enabled = false;
  }
  // Désactivé par défaut - règles complexes
  /**
   * Applique quelques transformations basiques de tirets
   * Note: Les vraies règles de césure nécessiteraient un dictionnaire complet
   */
  fix(text) {
    const transforms = [
      // Corriger les tirets mal espacés dans les dialogues français
      {
        pattern: /^(\s*)-\s*/gm,
        replacement: this.isLocaleCompatible(["fr"]) ? `$1${UNICODE_CHARS.MDASH} ` : `$1${UNICODE_CHARS.MDASH}`
      },
      // Tirets dans les énumérations
      {
        pattern: /(\n\s*)-\s+/g,
        replacement: `$1${UNICODE_CHARS.MDASH} `
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "- Premier point\n- Deuxi\xE8me point\n- Dialogue",
      after: `${UNICODE_CHARS.MDASH} Premier point
${UNICODE_CHARS.MDASH} Deuxi\xE8me point
${UNICODE_CHARS.MDASH} Dialogue`
    };
  }
};

// src/fixers/spacing/french-spacing.ts
var FrenchNoBreakSpace = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "FrenchNoBreakSpace";
    this.name = "Espaces fran\xE7ais";
    this.description = "Ajoute des espaces ins\xE9cables selon les r\xE8gles fran\xE7aises";
    this.category = "spacing";
    this.priority = 3;
    this.enabled = true;
  }
  // Activé par défaut pour le français
  /**
   * Applique les règles d'espacement françaises
   */
  fix(text) {
    if (!this.isLocaleCompatible(["fr"])) {
      return text;
    }
    const transforms = [
      // Espace fine insécable avant ; ! ? »
      {
        pattern: /\s*([;!?»])/g,
        replacement: `${UNICODE_CHARS.NO_BREAK_THIN_SPACE}$1`
      },
      // Espace insécable avant :
      {
        pattern: /\s*(:)/g,
        replacement: `${UNICODE_CHARS.NO_BREAK_SPACE}$1`
      },
      // Espace insécable après «
      {
        pattern: /(«)\s*/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_THIN_SPACE}`
      },
      // Corriger les espaces dans les nombres (optionnel)
      {
        pattern: /(\d)\s+(\d{3})/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_THIN_SPACE}$2`
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Gère la saisie en temps réel des signes de ponctuation français
   */
  handleKeyEvent(event, editor) {
    if (!this.isLocaleCompatible(["fr"])) {
      return false;
    }
    const punctuationMap = {
      "!": UNICODE_CHARS.NO_BREAK_THIN_SPACE,
      "?": UNICODE_CHARS.NO_BREAK_THIN_SPACE,
      ";": UNICODE_CHARS.NO_BREAK_THIN_SPACE,
      ":": UNICODE_CHARS.NO_BREAK_SPACE
    };
    if (punctuationMap[event.key] && !event.ctrlKey && !event.metaKey) {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.substring(0, cursor.ch);
      const cleanBefore = beforeCursor.replace(/\s+$/, "");
      const spaceChar = punctuationMap[event.key];
      const newLine = cleanBefore + spaceChar + event.key + line.substring(cursor.ch);
      editor.setLine(cursor.line, newLine);
      editor.setCursor({
        line: cursor.line,
        ch: cleanBefore.length + 2
        // Position après la ponctuation
      });
      return true;
    }
    return false;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: `Il a dit "Bonjour" et c'est parti.`,
      after: `Il a dit ${UNICODE_CHARS.LAQUO}${UNICODE_CHARS.NO_BREAK_THIN_SPACE}Bonjour${UNICODE_CHARS.NO_BREAK_THIN_SPACE}${UNICODE_CHARS.RAQUO} et c${UNICODE_CHARS.RSQUO}est parti.`
    };
  }
};

// src/fixers/spacing/comma.ts
var NoSpaceBeforeComma = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "NoSpaceBeforeComma";
    this.name = "Virgules sans espace";
    this.description = "Supprime les espaces avant les virgules et normalise l'espacement";
    this.category = "spacing";
    this.priority = 6;
  }
  /**
   * Corrige l'espacement autour des virgules
   */
  fix(text) {
    const transforms = [
      // Supprimer les espaces avant les virgules
      {
        pattern: /\s+,/g,
        replacement: ","
      },
      // Normaliser l'espacement après les virgules (exactement un espace)
      {
        pattern: /,\s*/g,
        replacement: ", "
      },
      // Cas particulier : virgule en fin de ligne (pas d'espace après)
      {
        pattern: /,\s*$/gm,
        replacement: ","
      },
      // Cas particulier : virgule avant fermeture de parenthèse/crochet
      {
        pattern: /,\s*([)\]}])/g,
        replacement: ",$1"
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "Pommes , poires,oranges ,bananes",
      after: "Pommes, poires, oranges, bananes"
    };
  }
};

// src/fixers/spacing/unit.ts
var Unit = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "unit";
    this.name = "Espaces avant unit\xE9s";
    this.description = "Ajoute des espaces ins\xE9cables entre nombres et unit\xE9s (12 h, 50 \u20AC, 25 %)";
    this.category = "spacing";
    this.priority = 7;
    this.enabled = true;
  }
  /**
   * Applique les espaces insécables avant les unités
   */
  fix(text) {
    const transforms = [
      // === UNITÉS DE TEMPS ===
      {
        pattern: /(\d+)\s*([hms])\b(?![a-zA-Z])/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Unités complètes de temps
      {
        pattern: /(\d+)\s*(heures?|minutes?|secondes?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // === UNITÉS MONÉTAIRES ===
      {
        pattern: /(\d+)\s*([€$£¥₹₽])/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Unités monétaires écrites
      {
        pattern: /(\d+)\s*(euros?|dollars?|livres?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // === POURCENTAGES ===
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*%/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}%`
      },
      // === UNITÉS SI ET MÉTRIQUES ===
      // Masse
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(mg|[cdk]?g|tonnes?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Distance
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(mm|cm|dm|[dk]?m|km)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Volume
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(ml|[cdk]?l|litres?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Énergie et puissance
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(W|[kmMG]W|kWh?|[kmMG]Wh?)\b/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Fréquence
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(Hz|[kmMG]Hz)\b/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // === TEMPÉRATURES ===
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*°([CF]?)\b/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}\xB0$2`
      },
      // === UNITÉS INFORMATIQUES ===
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*([kmMGT]?[Bb]|[kmMGT]?o)\b/g,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // Unités complètes
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(octets?|bytes?|bits?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // === UNITÉS D'ANGLES ===
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(degrés?|rad|radiants?)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      },
      // === UNITÉS DE VITESSE ===
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*(km\/h|mph|m\/s)\b/gi,
        replacement: `$1${UNICODE_CHARS.NO_BREAK_SPACE}$2`
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Vérifie si le contexte est valide pour l'ajout d'espace
   */
  isValidContext(text, position) {
    if (!super.isValidContext(text, position)) {
      return false;
    }
    const beforeContext = text.substring(Math.max(0, position - 5), position);
    const afterContext = text.substring(position, Math.min(text.length, position + 5));
    if (beforeContext.match(/^\s*#*\s*\d+$/) && afterContext.match(/^[hH]\d/)) {
      return false;
    }
    return true;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "Temp\xE9rature: 25 \xB0C, vitesse: 120 km/h, taille: 1.8 m, poids: 75 kg, prix: 299 \u20AC",
      after: `Temp\xE9rature: 25${UNICODE_CHARS.NO_BREAK_SPACE}\xB0C, vitesse: 120${UNICODE_CHARS.NO_BREAK_SPACE}km/h, taille: 1.8${UNICODE_CHARS.NO_BREAK_SPACE}m, poids: 75${UNICODE_CHARS.NO_BREAK_SPACE}kg, prix: 299${UNICODE_CHARS.NO_BREAK_SPACE}\u20AC`
    };
  }
};

// src/fixers/spacing/dimension.ts
var Dimension = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "Dimension";
    this.name = "Symboles de multiplication";
    this.description = "Convertit x et * entre nombres en symbole \xD7 (12 x 34 \u2192 12\xD734)";
    this.category = "spacing";
    this.priority = 8;
    this.enabled = true;
  }
  /**
   * Applique les transformations de multiplication
   */
  fix(text) {
    const transforms = [
      // Multiplication avec 'x' ou 'X' entre nombres
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)/g,
        replacement: `$1${UNICODE_CHARS.TIMES}$2`
      },
      // Multiplication avec '*' entre nombres
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*\*\s*(\d+(?:[,.]?\d+)?)/g,
        replacement: `$1${UNICODE_CHARS.TIMES}$2`
      },
      // Dimensions (longueur x largeur x hauteur)
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)\s*[xX]\s*(\d+(?:[,.]?\d+)?)/g,
        replacement: `$1${UNICODE_CHARS.TIMES}$2${UNICODE_CHARS.TIMES}$3`
      },
      // Format "dimensions" avec unités (ex: 12cm x 34cm)
      {
        pattern: /(\d+(?:[,.]?\d+)?)\s*([a-zA-Z]+)\s*[xX]\s*(\d+(?:[,.]?\d+)?)\s*([a-zA-Z]+)?/g,
        replacement: `$1$2${UNICODE_CHARS.TIMES}$3$4`
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Vérifie si le contexte est valide (éviter de modifier le code, variables, etc.)
   */
  isValidContext(text, position) {
    if (!super.isValidContext(text, position)) {
      return false;
    }
    const beforeContext = text.substring(Math.max(0, position - 10), position);
    const afterContext = text.substring(position, Math.min(text.length, position + 10));
    if (beforeContext.match(/[a-zA-Z]$/) && afterContext.match(/^[a-zA-Z]/)) {
      return false;
    }
    return true;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "R\xE9solution: 1920 x 1080, format 16 * 9, dimensions 12cm x 34cm x 56cm",
      after: `R\xE9solution: 1920${UNICODE_CHARS.TIMES}1080, format 16${UNICODE_CHARS.TIMES}9, dimensions 12cm${UNICODE_CHARS.TIMES}34cm${UNICODE_CHARS.TIMES}56cm`
    };
  }
};

// src/fixers/quotes/smart-quotes.ts
var SmartQuotes = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "SmartQuotes";
    this.name = "Guillemets intelligents";
    this.description = "Convertit les guillemets droits en guillemets typographiques";
    this.category = "quotes";
    this.priority = 4;
  }
  /**
   * Applique les guillemets intelligents selon la langue
   */
  fix(text) {
    if (this.isLocaleCompatible(["fr"])) {
      return this.fixFrenchQuotes(text);
    } else {
      return this.fixEnglishQuotes(text);
    }
  }
  /**
   * Applique les guillemets français « »
   */
  fixFrenchQuotes(text) {
    let result = text;
    let inQuote = false;
    result = result.replace(/"/g, () => {
      if (!inQuote) {
        inQuote = true;
        return `${UNICODE_CHARS.LAQUO}${UNICODE_CHARS.NO_BREAK_THIN_SPACE}`;
      } else {
        inQuote = false;
        return `${UNICODE_CHARS.NO_BREAK_THIN_SPACE}${UNICODE_CHARS.RAQUO}`;
      }
    });
    result = result.replace(/'/g, UNICODE_CHARS.RSQUO);
    return result;
  }
  /**
   * Applique les guillemets anglais " "
   */
  fixEnglishQuotes(text) {
    let result = text;
    let inQuote = false;
    result = result.replace(/"/g, () => {
      if (!inQuote) {
        inQuote = true;
        return UNICODE_CHARS.LDQUO;
      } else {
        inQuote = false;
        return UNICODE_CHARS.RDQUO;
      }
    });
    result = result.replace(/(\w)'/g, `$1${UNICODE_CHARS.RSQUO}`);
    return result;
  }
  /**
   * Fournit un exemple selon la langue
   */
  getExample() {
    if (this.isLocaleCompatible(["fr"])) {
      return {
        before: `Il a dit "Bonjour" et c'est parti.`,
        after: `Il a dit ${UNICODE_CHARS.LAQUO}${UNICODE_CHARS.NO_BREAK_THIN_SPACE}Bonjour${UNICODE_CHARS.NO_BREAK_THIN_SPACE}${UNICODE_CHARS.RAQUO} et c${UNICODE_CHARS.RSQUO}est parti.`
      };
    } else {
      return {
        before: `He said "Hello" and it's done.`,
        after: `He said ${UNICODE_CHARS.LDQUO}Hello${UNICODE_CHARS.RDQUO} and it${UNICODE_CHARS.RSQUO}s done.`
      };
    }
  }
};

// src/fixers/quotes/curly-quote.ts
var CurlyQuote = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "CurlyQuote";
    this.name = "Apostrophes courbes";
    this.description = "Convertit les apostrophes droites ' en apostrophes typographiques '";
    this.category = "quotes";
    this.priority = 5;
  }
  /**
   * Transforme les apostrophes droites en apostrophes courbes
   * Logique JoliTypo : cherche [lettre]' et remplace par [lettre]'
   */
  fix(text) {
    return this.applyRegexTransform(
      text,
      /([a-z])'/gim,
      `$1${UNICODE_CHARS.RSQUO}`
    );
  }
  /**
   * Gère la saisie en temps réel des apostrophes
   */
  handleKeyEvent(event, editor) {
    if (event.key === "'" && !event.ctrlKey && !event.metaKey) {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.substring(0, cursor.ch);
      const lastChar = beforeCursor.slice(-1);
      if (lastChar && /[a-zA-Z]/.test(lastChar)) {
        const newLine = beforeCursor + UNICODE_CHARS.RSQUO + line.substring(cursor.ch);
        editor.setLine(cursor.line, newLine);
        editor.setCursor({
          line: cursor.line,
          ch: cursor.ch + 1
        });
        return true;
      }
    }
    return false;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "I'm happy, you're great, it's working!",
      after: `I${UNICODE_CHARS.RSQUO}m happy, you${UNICODE_CHARS.RSQUO}re great, it${UNICODE_CHARS.RSQUO}s working!`
    };
  }
};

// src/fixers/symbols/trademark.ts
var Trademark = class extends BaseFixer {
  constructor() {
    super(...arguments);
    this.id = "Trademark";
    this.name = "Symboles de marques";
    this.description = "Convertit (c) \u2192 \xA9, (r) \u2192 \xAE, (tm) \u2192 \u2122";
    this.category = "symbols";
    this.priority = 9;
    this.enabled = true;
  }
  /**
   * Applique les transformations des symboles de marques
   */
  fix(text) {
    const transforms = [
      // Copyright: (c) ou (C) → ©
      {
        pattern: /\(([cC])\)/g,
        replacement: UNICODE_CHARS.COPY
      },
      // Registered trademark: (r) ou (R) → ®
      {
        pattern: /\(([rR])\)/g,
        replacement: UNICODE_CHARS.REG
      },
      // Trademark: (tm) ou (TM) ou (Tm) → ™
      {
        pattern: /\(([tT][mM])\)/gi,
        replacement: UNICODE_CHARS.TRADE
      }
    ];
    return this.applyMultipleTransforms(text, transforms);
  }
  /**
   * Vérifie si le contexte est approprié pour la transformation
   */
  isValidContext(text, position) {
    if (!super.isValidContext(text, position)) {
      return false;
    }
    const beforeContext = text.substring(Math.max(0, position - 20), position);
    const afterContext = text.substring(position, Math.min(text.length, position + 20));
    if (beforeContext.includes("http") || beforeContext.includes("www.")) {
      return false;
    }
    if (beforeContext.includes("/") && afterContext.includes("/")) {
      return false;
    }
    return true;
  }
  /**
   * Fournit un exemple de transformation
   */
  getExample() {
    return {
      before: "Microsoft (c) 2025, iPhone (r), Google Search (tm)",
      after: `Microsoft ${UNICODE_CHARS.COPY} 2025, iPhone ${UNICODE_CHARS.REG}, Google Search ${UNICODE_CHARS.TRADE}`
    };
  }
};

// src/fixers/index.ts
function createAllFixers() {
  return [
    // Ordre par priorité croissante
    new Ellipsis(),
    // priorité 1
    new Dash(),
    // priorité 2
    new FrenchNoBreakSpace(),
    // priorité 3
    new SmartQuotes(),
    // priorité 4
    new CurlyQuote(),
    // priorité 5
    new NoSpaceBeforeComma(),
    // priorité 6
    new Unit(),
    // priorité 7
    new Dimension(),
    // priorité 8
    new Trademark(),
    // priorité 9
    new Hyphen()
    // priorité 10 (désactivé par défaut)
  ];
}

// src/engine/typography-engine.ts
var TypographyEngine = class {
  constructor(settings) {
    this.fixers = /* @__PURE__ */ new Map();
    this.settings = settings;
    this.initializeFixers();
  }
  /**
   * Initialise tous les fixers disponibles
   */
  initializeFixers() {
    const allFixers = createAllFixers();
    allFixers.forEach((fixer) => {
      this.fixers.set(fixer.id, fixer);
      if (fixer.id in this.settings.fixers) {
        fixer.enabled = this.settings.fixers[fixer.id];
      }
      if (fixer.setLocale) {
        fixer.setLocale(this.settings.locale);
      }
    });
  }
  /**
   * Met à jour les paramètres et reconfigure les fixers
   */
  updateSettings(settings) {
    this.settings = settings;
    this.fixers.forEach((fixer) => {
      if (fixer.id in settings.fixers) {
        fixer.enabled = settings.fixers[fixer.id];
      }
      if (fixer.setLocale) {
        fixer.setLocale(settings.locale);
      }
    });
  }
  /**
   * Retourne tous les fixers triés par priorité
   */
  getFixers() {
    return Array.from(this.fixers.values()).sort((a, b) => a.priority - b.priority);
  }
  /**
   * Retourne uniquement les fixers activés
   */
  getEnabledFixers() {
    return this.getFixers().filter((fixer) => fixer.enabled);
  }
  /**
   * Retourne les fixers par catégorie
   */
  getFixersByCategory(category) {
    return this.getFixers().filter((fixer) => fixer.category === category);
  }
  /**
   * Obtient un fixer spécifique par son ID
   */
  getFixer(id) {
    return this.fixers.get(id);
  }
  /**
   * Traite un texte avec tous les fixers activés
   */
  processText(text) {
    const enabledFixers = this.getEnabledFixers();
    return enabledFixers.reduce((currentText, fixer) => {
      try {
        return fixer.fix(currentText);
      } catch (error) {
        console.warn(`[TypographyEngine] Erreur dans le fixer ${fixer.id}:`, error);
        return currentText;
      }
    }, text);
  }
  /**
   * Traite un texte et retourne des informations détaillées sur les corrections
   */
  processTextWithDetails(text) {
    const original = text;
    const enabledFixers = this.getEnabledFixers();
    const fixersUsed = [];
    let correctionsCount = 0;
    const corrected = enabledFixers.reduce((currentText, fixer) => {
      try {
        const fixedText = fixer.fix(currentText);
        if (fixedText !== currentText) {
          fixersUsed.push(fixer.id);
          correctionsCount++;
        }
        return fixedText;
      } catch (error) {
        console.warn(`[TypographyEngine] Erreur dans le fixer ${fixer.id}:`, error);
        return currentText;
      }
    }, text);
    return {
      original,
      corrected,
      correctionsCount,
      fixersUsed
    };
  }
  /**
   * Gère les événements clavier en temps réel
   */
  handleKeyEvent(event, editor) {
    if (!this.settings.enableRealTimeCorrection) {
      return false;
    }
    const enabledFixers = this.getEnabledFixers();
    for (const fixer of enabledFixers) {
      if (fixer.handleKeyEvent) {
        try {
          if (fixer.handleKeyEvent(event, editor)) {
            return true;
          }
        } catch (error) {
          console.warn(`[TypographyEngine] Erreur dans handleKeyEvent pour ${fixer.id}:`, error);
        }
      }
    }
    return false;
  }
  /**
   * Active ou désactive un fixer spécifique
   */
  toggleFixer(fixerId, enabled) {
    const fixer = this.fixers.get(fixerId);
    if (fixer) {
      fixer.enabled = enabled;
      this.settings.fixers[fixerId] = enabled;
      return true;
    }
    return false;
  }
  /**
   * Active ou désactive tous les fixers d'une catégorie
   */
  toggleCategory(category, enabled) {
    const categoryFixers = this.getFixersByCategory(category);
    categoryFixers.forEach((fixer) => {
      fixer.enabled = enabled;
      this.settings.fixers[fixer.id] = enabled;
    });
    return categoryFixers.length;
  }
  /**
   * Réinitialise tous les fixers à leur état par défaut
   */
  resetToDefaults() {
    this.fixers.forEach((fixer) => {
      const defaultEnabled = this.getDefaultEnabledState(fixer.id);
      fixer.enabled = defaultEnabled;
      this.settings.fixers[fixer.id] = defaultEnabled;
    });
  }
  /**
   * Détermine l'état par défaut d'un fixer selon la configuration
   */
  getDefaultEnabledState(fixerId) {
    const frenchEssentialFixers = ["ellipsis", "dash", "french-spacing", "smart-quotes", "comma"];
    const englishEssentialFixers = ["ellipsis", "dash", "smart-quotes", "comma"];
    if (this.settings.locale.startsWith("fr")) {
      return frenchEssentialFixers.includes(fixerId);
    } else {
      return englishEssentialFixers.includes(fixerId);
    }
  }
};

// src/settings/settings-tab.ts
var import_obsidian2 = require("obsidian");

// src/settings/default-settings.ts
var DEFAULT_SETTINGS = {
  enableRealTimeCorrection: true,
  locale: "fr_FR",
  highlightEnabled: false,
  highlightButton: true,
  tabTitleBarButton: false,
  fixers: {
    // Fixers JoliTypo - IDs exacts
    "Ellipsis": true,
    // Points de suspension : ... → …
    "Dash": true,
    // Tirets typographiques : -- → —
    "SmartQuotes": true,
    // Guillemets intelligents selon locale
    "CurlyQuote": true,
    // Apostrophes courbes : ' → '
    "FrenchNoBreakSpace": true,
    // Espaces insécables français : ! ? ; :
    "NoSpaceBeforeComma": true,
    // Virgules sans espace avant
    "Unit": true,
    // Espaces avant unités : 25 kg
    "Dimension": true,
    // Multiplication : 12 x 34 → 12×34
    "Hyphen": false,
    // Césure (complexe, désactivé par défaut)
    "Trademark": true
    // Marques : (c) → ©, (r) → ®, (tm) → ™
  }
};
var LOCALE_CONFIGURATIONS = {
  "en_GB": [
    "Ellipsis",
    "Dimension",
    "Unit",
    "Dash",
    "SmartQuotes",
    "NoSpaceBeforeComma",
    "CurlyQuote",
    "Hyphen",
    "Trademark"
  ],
  "fr_FR": [
    "Ellipsis",
    "Dimension",
    "Unit",
    "Dash",
    "SmartQuotes",
    "FrenchNoBreakSpace",
    "NoSpaceBeforeComma",
    "CurlyQuote",
    "Hyphen",
    "Trademark"
  ],
  "fr_CA": [
    "Ellipsis",
    "Dimension",
    "Unit",
    "Dash",
    "SmartQuotes",
    "NoSpaceBeforeComma",
    "CurlyQuote",
    "Hyphen",
    "Trademark"
  ],
  "de_DE": [
    "Ellipsis",
    "Dimension",
    "Unit",
    "Dash",
    "SmartQuotes",
    "NoSpaceBeforeComma",
    "CurlyQuote",
    "Hyphen",
    "Trademark"
  ]
};
var LOCALE_NAMES = {
  "fr_FR": "\u{1F1EB}\u{1F1F7} Fran\xE7ais (France)",
  "fr_CA": "\u{1F1E8}\u{1F1E6} Fran\xE7ais (Canada)",
  "en_GB": "\u{1F1EC}\u{1F1E7} English (UK)",
  "de_DE": "\u{1F1E9}\u{1F1EA} Deutsch (Deutschland)"
};
function validateSettings(settings) {
  var _a, _b, _c, _d, _e;
  const validated = {
    enableRealTimeCorrection: (_a = settings.enableRealTimeCorrection) != null ? _a : DEFAULT_SETTINGS.enableRealTimeCorrection,
    locale: (_b = settings.locale) != null ? _b : DEFAULT_SETTINGS.locale,
    highlightEnabled: (_c = settings.highlightEnabled) != null ? _c : DEFAULT_SETTINGS.highlightEnabled,
    highlightButton: (_d = settings.highlightButton) != null ? _d : DEFAULT_SETTINGS.highlightButton,
    // ✅ Ajouté
    tabTitleBarButton: (_e = settings.tabTitleBarButton) != null ? _e : DEFAULT_SETTINGS.tabTitleBarButton,
    // ✅ Ajouté
    fixers: { ...DEFAULT_SETTINGS.fixers, ...settings.fixers }
  };
  Object.keys(DEFAULT_SETTINGS.fixers).forEach((fixerId) => {
    if (typeof validated.fixers[fixerId] !== "boolean") {
      validated.fixers[fixerId] = DEFAULT_SETTINGS.fixers[fixerId];
    }
  });
  if (!(validated.locale in LOCALE_CONFIGURATIONS)) {
    validated.locale = "fr_FR";
  }
  return validated;
}
var CATEGORY_NAMES = {
  "punctuation": "Ponctuation",
  "spacing": "Espacement",
  "quotes": "Guillemets",
  "symbols": "Symboles"
};

// src/settings/settings-tab.ts
var TypographySettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Param\xE8tres Typography Fixers" });
    containerEl.createEl("p", {
      text: "Plugin de correction typographique bas\xE9 sur JoliTypo. Corrige automatiquement les erreurs typographiques selon les r\xE8gles fran\xE7aises, anglaises et allemandes.",
      cls: "setting-item-description"
    });
    this.createGeneralSettings(containerEl);
    this.createFixerSettings(containerEl);
    this.createActionsSection(containerEl);
    this.addCustomStyles(containerEl);
    this.createHighlightSettings(containerEl);
  }
  /**
   * Crée la section de configuration générale
   */
  createGeneralSettings(containerEl) {
    containerEl.createEl("h3", { text: "Configuration g\xE9n\xE9rale" });
    new import_obsidian2.Setting(containerEl).setName("Correction en temps r\xE9el").setDesc("Active la correction automatique pendant la frappe").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableRealTimeCorrection).onChange(async (value) => {
        this.plugin.settings.enableRealTimeCorrection = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian2.Setting(containerEl).setName("Langue typographique").setDesc(
      "Choisissez les r\xE8gles typographiques \xE0 appliquer. Change automatiquement les fixers recommand\xE9s."
    ).addDropdown((dropdown) => {
      Object.entries(LOCALE_NAMES).forEach(([locale, name]) => {
        dropdown.addOption(locale, name);
      });
      return dropdown.setValue(this.plugin.settings.locale).onChange(async (value) => {
        this.plugin.settings.locale = value;
        this.updateFixersForLocale(value);
        await this.plugin.saveSettings();
      });
    });
    const activeFixersCount = Object.values(this.plugin.settings.fixers).filter(
      Boolean
    ).length;
    const totalFixersCount = Object.keys(this.plugin.settings.fixers).length;
    containerEl.createEl("p", {
      text: `${activeFixersCount}/${totalFixersCount} r\xE8gles activ\xE9es pour ${LOCALE_NAMES[this.plugin.settings.locale]}`,
      cls: "setting-item-description"
    });
  }
  /**
   * Crée la section des fixers par catégorie
   */
  createFixerSettings(containerEl) {
    containerEl.createEl("h3", { text: "R\xE8gles de correction" });
    containerEl.createEl("p", {
      text: "Activez ou d\xE9sactivez les r\xE8gles typographiques selon vos besoins. Les r\xE8gles recommand\xE9es pour votre langue sont activ\xE9es automatiquement.",
      cls: "setting-item-description"
    });
    const fixersByCategory = this.plugin.engine.getFixers().reduce((acc, fixer) => {
      if (!acc[fixer.category]) acc[fixer.category] = [];
      acc[fixer.category].push(fixer);
      return acc;
    }, {});
    Object.entries(fixersByCategory).forEach(([category, fixers]) => {
      const categoryHeader = containerEl.createEl("h4", {
        text: CATEGORY_NAMES[category] || category,
        cls: "typography-category-header"
      });
      const toggleAllButton = categoryHeader.createEl("button", {
        text: "Tout basculer",
        cls: "typography-toggle-category"
      });
      toggleAllButton.addEventListener("click", async () => {
        const allEnabled = fixers.every((f) => f.enabled);
        const newState = !allEnabled;
        fixers.forEach((fixer) => {
          this.plugin.settings.fixers[fixer.id] = newState;
        });
        await this.plugin.saveSettings();
        this.display();
      });
      fixers.forEach((fixer) => {
        const setting = new import_obsidian2.Setting(containerEl).setName(fixer.name).setDesc(fixer.description).addToggle(
          (toggle) => toggle.setValue(fixer.enabled).onChange(async (value) => {
            this.plugin.settings.fixers[fixer.id] = value;
            await this.plugin.saveSettings();
          })
        );
        const isRecommended = this.isFixerRecommendedForCurrentLocale(fixer.id);
        if (isRecommended) {
          const badge = setting.nameEl.createEl("span", {
            text: "Recommand\xE9",
            cls: "typography-recommended-badge"
          });
        }
        if (fixer.getExample) {
          const example = fixer.getExample();
          const exampleEl = setting.descEl.createDiv({
            cls: "typography-example"
          });
          exampleEl.createDiv({
            cls: "typography-example-before"
          }).innerHTML = `<span class="typography-example-label">Avant :</span> <code>${example.before}</code>`;
          exampleEl.createDiv({
            cls: "typography-example-after"
          }).innerHTML = `<span class="typography-example-label">Apr\xE8s :</span> <code>${example.after}</code>`;
        }
      });
    });
  }
  /**
   * Crée la section des actions
   */
  createActionsSection(containerEl) {
    containerEl.createEl("h3", { text: "Actions" });
    new import_obsidian2.Setting(containerEl).setName("Restaurer la configuration recommand\xE9e").setDesc(
      `Active les fixers recommand\xE9s pour ${LOCALE_NAMES[this.plugin.settings.locale]}`
    ).addButton(
      (button) => button.setButtonText("Restaurer").onClick(async () => {
        this.updateFixersForLocale(this.plugin.settings.locale);
        await this.plugin.saveSettings();
        new import_obsidian2.Notice("Configuration restaur\xE9e");
      })
    );
  }
  /**
   * Met à jour les fixers actifs selon la locale choisie
   */
  updateFixersForLocale(locale) {
    const activeFixers = LOCALE_CONFIGURATIONS[locale];
    if (activeFixers) {
      Object.keys(this.plugin.settings.fixers).forEach((fixerId) => {
        this.plugin.settings.fixers[fixerId] = false;
      });
      activeFixers.forEach((fixerId) => {
        this.plugin.settings.fixers[fixerId] = true;
      });
      this.display();
    }
  }
  /**
   * Vérifie si un fixer est recommandé pour la locale actuelle
   */
  isFixerRecommendedForCurrentLocale(fixerId) {
    const recommendedFixers = LOCALE_CONFIGURATIONS[this.plugin.settings.locale];
    return recommendedFixers ? recommendedFixers.includes(fixerId) : false;
  }
  /**
   * Ajoute les styles CSS personnalisés
   */
  addCustomStyles(containerEl) {
    if (!containerEl.querySelector(".typography-custom-styles")) {
      const style = containerEl.createEl("style", {
        cls: "typography-custom-styles"
      });
      style.textContent = `
                .typography-category-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-top: 24px;
                    margin-bottom: 12px;
                    padding-bottom: 8px;
                    border-bottom: 1px solid var(--background-modifier-border);
                }
                
                .typography-toggle-category {
                    font-size: 0.8em;
                    padding: 4px 8px;
                    border-radius: 4px;
                }
                
                .typography-recommended-badge {
                    display: inline-block;
                    background: var(--color-accent);
                    color: var(--text-on-accent);
                    font-size: 0.7em;
                    padding: 2px 6px;
                    border-radius: 10px;
                    margin-left: 8px;
                    font-weight: 500;
                }
                
                .typography-example {
                    margin-top: 12px;
                    padding: 12px;
                    background: var(--background-primary);
                    border: 1px solid var(--background-modifier-border);
                    border-radius: 6px;
                    font-size: 0.85em;
                    line-height: 1.4;
                }
                
                .typography-example-label {
                    font-weight: 600;
                    color: var(--text-accent);
                    margin-right: 6px;
                }
                
                .typography-example code {
                    background: var(--background-modifier-form-field);
                    color: var(--text-normal);
                    padding: 3px 6px;
                    border-radius: 4px;
                    font-family: var(--font-monospace);
                    font-size: 0.9em;
                    border: 1px solid var(--background-modifier-border-hover);
                    user-select: text;
    pointer-events: auto;
    cursor: text;
                }
                
                .typography-example-before {
                    margin-bottom: 6px;
                }
                
                .typography-example-after {
                    margin-top: 6px;
                }
                
                .typography-test-original,
                .typography-test-corrected {
                    background: var(--background-secondary);
                    padding: 12px;
                    border-radius: 4px;
                    margin: 8px 0;
                    font-family: var(--font-monospace);
                    font-size: 0.9em;
                    white-space: pre-wrap;
                }
                
                .typography-no-changes {
                    color: var(--text-warning);
                    font-style: italic;
                    margin-top: 12px;
                }
            `;
    }
  }
  /**
   * Crée les paramètres de mise en évidence
   * @param containerEl Conteneur parent
   */
  createHighlightSettings(containerEl) {
    const desEl = containerEl.createEl("p", {
      text: "Affichage des caract\xE8res invisibles"
    });
    desEl.style.fontWeight = "bold";
    desEl.style.marginTop = "3em";
    new import_obsidian2.Setting(containerEl).setName("Activer l'affichage des caract\xE8res invisibles").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (value) => {
        this.plugin.settings.highlightEnabled = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
var TypographyPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.statusBarButton = null;
    this.tabTitleBarButton = null;
    this.decorationExtension = null;
  }
  /**
   * Chargement du plugin
   */
  async onload() {
    console.log("\u{1F680} Chargement du plugin Typography");
    try {
      await this.loadSettings();
      this.engine = new TypographyEngine(this.settings);
      this.decorationExtension = createDecorations(this.settings);
      this.registerEditorExtension(this.decorationExtension);
      this.updateInvisibleCharsDisplay();
      if (this.settings.highlightButton) {
        this.statusBarButton = createStatusBarButton(
          this,
          this.settings.highlightEnabled,
          this.toggleHighlight.bind(this)
        );
      }
      if (this.settings.tabTitleBarButton) {
        this.tabTitleBarButton = createTabTitleBarButton(
          this,
          this.settings.highlightEnabled,
          () => this.toggleHighlight()
        );
      }
      this.addCommands();
      this.registerKeyboardHandlers();
      this.addSettingTab(new TypographySettingTab(this.app, this));
      new import_obsidian3.Notice("Typography Fixers charg\xE9 avec succ\xE8s!", 3e3);
    } catch (error) {
      console.error("\u274C Erreur lors du chargement:", error);
      new import_obsidian3.Notice("Erreur lors du chargement du plugin", 5e3);
    }
  }
  /**
   * Déchargement du plugin
   */
  onunload() {
    console.log("\u{1F44B} D\xE9chargement du plugin Typography Fixers");
    removeStatusBarButton(this.statusBarButton);
    removeTabTitleBarButton(this.tabTitleBarButton);
  }
  /**
   * Charge les paramètres depuis le stockage
   */
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = validateSettings(loadedData || {});
  }
  /**
   * Sauvegarde les paramètres
   */
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.engine) {
      this.engine.updateSettings(this.settings);
    }
    this.updateInvisibleCharsDisplay();
  }
  /**
   * Ajoute les commandes du plugin
   */
  addCommands() {
    this.addCommand({
      id: "fix-selection",
      name: "Corriger la s\xE9lection",
      icon: "type",
      editorCallback: (editor) => {
        this.correctSelection(editor);
      }
    });
    this.addCommand({
      id: "fix-entire-note",
      name: "Corriger toute la note",
      icon: "whole-word",
      editorCallback: (editor) => {
        this.correctEntireNote(editor);
      }
    });
    this.addCommand({
      id: "toggle-realtime",
      name: "Basculer correction temps r\xE9el",
      icon: "zap",
      callback: async () => {
        await this.toggleRealTimeCorrection();
      }
    });
    this.addCommand({
      id: "toggle-highlight",
      name: "Afficher/Masquer les caract\xE8res invisibles",
      callback: () => {
        this.toggleHighlight();
      }
    });
  }
  /**
   * Corrige la sélection ou toute la note si rien n'est sélectionné
   */
  correctSelection(editor) {
    const selection = editor.getSelection();
    if (selection) {
      const result = this.engine.processTextWithDetails(selection);
      editor.replaceSelection(result.corrected);
      this.showCorrectionNotice(result.correctionsCount, result.fixersUsed);
    } else {
      this.correctEntireNote(editor);
    }
  }
  /**
   * Corrige toute la note
   */
  correctEntireNote(editor) {
    const content = editor.getValue();
    const result = this.engine.processTextWithDetails(content);
    if (result.corrected !== content) {
      editor.setValue(result.corrected);
      this.showCorrectionNotice(result.correctionsCount, result.fixersUsed);
    } else {
      new import_obsidian3.Notice("Aucune correction n\xE9cessaire", 2e3);
    }
  }
  /**
   * Bascule la correction en temps réel
   */
  async toggleRealTimeCorrection() {
    this.settings.enableRealTimeCorrection = !this.settings.enableRealTimeCorrection;
    await this.saveSettings();
    const status = this.settings.enableRealTimeCorrection ? "activ\xE9e" : "d\xE9sactiv\xE9e";
    new import_obsidian3.Notice(`Correction temps r\xE9el ${status}`, 3e3);
  }
  /**
   * Affiche une notification de correction
   */
  showCorrectionNotice(correctionsCount, fixersUsed) {
    if (correctionsCount === 0) {
      new import_obsidian3.Notice("Aucune correction appliqu\xE9e", 2e3);
      return;
    }
    const message = correctionsCount === 1 ? "1 correction appliqu\xE9e" : `${correctionsCount} corrections appliqu\xE9es`;
    new import_obsidian3.Notice(message, 3e3);
  }
  /**
   * Enregistre les gestionnaires d'événements clavier
   */
  registerKeyboardHandlers() {
    this.registerDomEvent(document, "keydown", (event) => {
      this.handleKeyDown(event);
    });
  }
  /**
   * Gère les événements clavier pour la correction temps réel
   */
  handleKeyDown(event) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
    if (!activeView || activeView.getMode() !== "source") {
      return;
    }
    const editor = activeView.editor;
    if (this.engine.handleKeyEvent(event, editor)) {
      event.preventDefault();
    }
  }
  /**
   * API publique pour les autres plugins (optionnel)
   */
  getEngine() {
    return this.engine;
  }
  async applyCorrections(text) {
    return this.engine.processText(text);
  }
  getAvailableFixers() {
    return this.engine.getFixers().map((f) => f.id);
  }
  /**
   * Met à jour l'affichage des caractères invisibles via CSS
   */
  updateInvisibleCharsDisplay() {
    if (this.settings.highlightEnabled) {
      document.body.addClass("typography-show-invisible");
    } else {
      document.body.removeClass("typography-show-invisible");
    }
  }
  /**
   * Bascule l'affichage des caractères invisibles
   */
  async toggleHighlight() {
    this.settings.highlightEnabled = !this.settings.highlightEnabled;
    this.updateInvisibleCharsDisplay();
    await this.saveSettings();
    const status = this.settings.highlightEnabled ? "activ\xE9" : "d\xE9sactiv\xE9";
    new import_obsidian3.Notice(`Affichage des caract\xE8res invisibles ${status}`, 3e3);
    updateStatusBarButton(this.statusBarButton, this.settings.highlightEnabled);
    updateTabTitleBarButton(this.tabTitleBarButton, this.settings.highlightEnabled);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3VpL2RlY29yYXRpb25zLnRzIiwgInNyYy91aS9zdGF0dXNCYXIudHMiLCAic3JjL2ZpeGVycy9iYXNlL2Jhc2UtZml4ZXIudHMiLCAic3JjL2NvbnN0YW50cy91bmljb2RlLnRzIiwgInNyYy9maXhlcnMvcHVuY3R1YXRpb24vZWxsaXBzaXMudHMiLCAic3JjL2ZpeGVycy9wdW5jdHVhdGlvbi9kYXNoLnRzIiwgInNyYy9maXhlcnMvcHVuY3R1YXRpb24vaHlwaGVuLnRzIiwgInNyYy9maXhlcnMvc3BhY2luZy9mcmVuY2gtc3BhY2luZy50cyIsICJzcmMvZml4ZXJzL3NwYWNpbmcvY29tbWEudHMiLCAic3JjL2ZpeGVycy9zcGFjaW5nL3VuaXQudHMiLCAic3JjL2ZpeGVycy9zcGFjaW5nL2RpbWVuc2lvbi50cyIsICJzcmMvZml4ZXJzL3F1b3Rlcy9zbWFydC1xdW90ZXMudHMiLCAic3JjL2ZpeGVycy9xdW90ZXMvY3VybHktcXVvdGUudHMiLCAic3JjL2ZpeGVycy9zeW1ib2xzL3RyYWRlbWFyay50cyIsICJzcmMvZml4ZXJzL2luZGV4LnRzIiwgInNyYy9lbmdpbmUvdHlwb2dyYXBoeS1lbmdpbmUudHMiLCAic3JjL3NldHRpbmdzL3NldHRpbmdzLXRhYi50cyIsICJzcmMvc2V0dGluZ3MvZGVmYXVsdC1zZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gc3JjL21haW4udHMgLSBQbHVnaW4gcHJpbmNpcGFsIG1vZHVsYWlyZVxyXG5pbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBQbHVnaW4sIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0aW9ucyB9IGZyb20gJy4vdWkvZGVjb3JhdGlvbnMnO1xyXG5pbXBvcnQge1xyXG4gIGNyZWF0ZVN0YXR1c0JhckJ1dHRvbixcclxuICB1cGRhdGVTdGF0dXNCYXJCdXR0b24sXHJcbiAgcmVtb3ZlU3RhdHVzQmFyQnV0dG9uLFxyXG4gIGNyZWF0ZVRhYlRpdGxlQmFyQnV0dG9uLFxyXG4gIHVwZGF0ZVRhYlRpdGxlQmFyQnV0dG9uLFxyXG4gIHJlbW92ZVRhYlRpdGxlQmFyQnV0dG9uLFxyXG59IGZyb20gXCIuL3VpL3N0YXR1c0JhclwiO1xyXG5cclxuXHJcbi8vIEltcG9ydCBkZXMgdHlwZXNcclxuaW1wb3J0IHsgVHlwb2dyYXBoeVNldHRpbmdzIH0gZnJvbSBcIi4vdHlwZXMvaW50ZXJmYWNlc1wiO1xyXG5cclxuLy8gSW1wb3J0IGRlcyBtb2R1bGVzXHJcbmltcG9ydCB7IFR5cG9ncmFwaHlFbmdpbmUgfSBmcm9tIFwiLi9lbmdpbmUvdHlwb2dyYXBoeS1lbmdpbmVcIjtcclxuaW1wb3J0IHsgVHlwb2dyYXBoeVNldHRpbmdUYWIgfSBmcm9tIFwiLi9zZXR0aW5ncy9zZXR0aW5ncy10YWJcIjtcclxuaW1wb3J0IHtcclxuICB2YWxpZGF0ZVNldHRpbmdzLFxyXG59IGZyb20gXCIuL3NldHRpbmdzL2RlZmF1bHQtc2V0dGluZ3NcIjtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuICogUGx1Z2luIHByaW5jaXBhbCBUeXBvZ3JhcGh5IEZpeGVyc1xyXG4gKiBDb3JyZWN0aW9uIHR5cG9ncmFwaGlxdWUgbW9kdWxhaXJlIHBvdXIgT2JzaWRpYW5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR5cG9ncmFwaHlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIC8vIFV0aWxpc2F0aW9uIGRlIGwnYXNzZXJ0aW9uIGQnYXNzaWduYXRpb24gZFx1MDBFOWZpbml0aXZlICghKVxyXG4gIC8vIENlcyBwcm9wcmlcdTAwRTl0XHUwMEU5cyBzb250IGluaXRpYWxpc1x1MDBFOWVzIGRhbnMgb25sb2FkKCkgYXZhbnQgdG91dGUgdXRpbGlzYXRpb25cclxuICBzZXR0aW5ncyE6IFR5cG9ncmFwaHlTZXR0aW5ncztcclxuICBlbmdpbmUhOiBUeXBvZ3JhcGh5RW5naW5lO1xyXG4gIHN0YXR1c0JhckJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICB0YWJUaXRsZUJhckJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBkZWNvcmF0aW9uRXh0ZW5zaW9uOiBhbnkgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBDaGFyZ2VtZW50IGR1IHBsdWdpblxyXG4gICAqL1xyXG5hc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERTgwIENoYXJnZW1lbnQgZHUgcGx1Z2luIFR5cG9ncmFwaHknKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoYXJnZXIgbGVzIHBhcmFtXHUwMEU4dHJlc1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpc2VyIGxlIG1vdGV1ciB0eXBvZ3JhcGhpcXVlXHJcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBuZXcgVHlwb2dyYXBoeUVuZ2luZSh0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLy8gQ3JcdTAwRTllciBldCBlbnJlZ2lzdHJlciBsZXMgZFx1MDBFOWNvcmF0aW9ucyAoVE9VSk9VUlMgYWN0aXZlcyBwb3VyIGdcdTAwRTluXHUwMEU5cmVyIGxlcyBzcGFucylcclxuICAgICAgICB0aGlzLmRlY29yYXRpb25FeHRlbnNpb24gPSBjcmVhdGVEZWNvcmF0aW9ucyh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKHRoaXMuZGVjb3JhdGlvbkV4dGVuc2lvbik7XHJcblxyXG4gICAgICAgIC8vIEFwcGxpcXVlciBsJ1x1MDBFOXRhdCBpbml0aWFsIGQnYWZmaWNoYWdlIHZpYSBDU1NcclxuICAgICAgICB0aGlzLnVwZGF0ZUludmlzaWJsZUNoYXJzRGlzcGxheSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRCdXR0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJCdXR0b24gPSBjcmVhdGVTdGF0dXNCYXJCdXR0b24oXHJcbiAgICAgICAgICAgICAgICB0aGlzLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCxcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlSGlnaGxpZ2h0LmJpbmQodGhpcylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YWJUaXRsZUJhckJ1dHRvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRhYlRpdGxlQmFyQnV0dG9uID0gY3JlYXRlVGFiVGl0bGVCYXJCdXR0b24oXHJcbiAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkLFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy50b2dnbGVIaWdobGlnaHQoKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWpvdXRlciBsZXMgY29tbWFuZGVzXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kcygpO1xyXG5cclxuICAgICAgICAvLyBHZXN0aW9ubmFpcmUgZCdcdTAwRTl2XHUwMEU5bmVtZW50cyBjbGF2aWVyXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcktleWJvYXJkSGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgLy8gSW50ZXJmYWNlIGRlIHBhcmFtXHUwMEU4dHJlc1xyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVHlwb2dyYXBoeVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgbmV3IE5vdGljZSgnVHlwb2dyYXBoeSBGaXhlcnMgY2hhcmdcdTAwRTkgYXZlYyBzdWNjXHUwMEU4cyEnLCAzMDAwKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBFcnJldXIgbG9ycyBkdSBjaGFyZ2VtZW50OicsIGVycm9yKTtcclxuICAgICAgICBuZXcgTm90aWNlKCdFcnJldXIgbG9ycyBkdSBjaGFyZ2VtZW50IGR1IHBsdWdpbicsIDUwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG4gIC8qKlxyXG4gICAqIERcdTAwRTljaGFyZ2VtZW50IGR1IHBsdWdpblxyXG4gICAqL1xyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdURDNEIgRFx1MDBFOWNoYXJnZW1lbnQgZHUgcGx1Z2luIFR5cG9ncmFwaHkgRml4ZXJzXCIpO1xyXG4gICAgcmVtb3ZlU3RhdHVzQmFyQnV0dG9uKHRoaXMuc3RhdHVzQmFyQnV0dG9uKTtcclxuICAgIHJlbW92ZVRhYlRpdGxlQmFyQnV0dG9uKHRoaXMudGFiVGl0bGVCYXJCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hhcmdlIGxlcyBwYXJhbVx1MDBFOHRyZXMgZGVwdWlzIGxlIHN0b2NrYWdlXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgIHRoaXMuc2V0dGluZ3MgPSB2YWxpZGF0ZVNldHRpbmdzKGxvYWRlZERhdGEgfHwge30pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2F1dmVnYXJkZSBsZXMgcGFyYW1cdTAwRTh0cmVzXHJcbiAgICovXHJcbmFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICBcclxuICAgIC8vIE1ldHRyZSBcdTAwRTAgam91ciBsZSBtb3RldXJcclxuICAgIGlmICh0aGlzLmVuZ2luZSkge1xyXG4gICAgICAgIHRoaXMuZW5naW5lLnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBNZXR0cmUgXHUwMEUwIGpvdXIgbCdhZmZpY2hhZ2UgQ1NTXHJcbiAgICB0aGlzLnVwZGF0ZUludmlzaWJsZUNoYXJzRGlzcGxheSgpO1xyXG59XHJcbiAgLyoqXHJcbiAgICogQWpvdXRlIGxlcyBjb21tYW5kZXMgZHUgcGx1Z2luXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRDb21tYW5kcygpOiB2b2lkIHtcclxuICAgIC8vIENvbW1hbmRlOiBDb3JyaWdlciBsYSBzXHUwMEU5bGVjdGlvbiBvdSB0b3V0ZSBsYSBub3RlXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJmaXgtc2VsZWN0aW9uXCIsXHJcbiAgICAgIG5hbWU6IFwiQ29ycmlnZXIgbGEgc1x1MDBFOWxlY3Rpb25cIixcclxuICAgICAgaWNvbjogXCJ0eXBlXCIsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcclxuICAgICAgICB0aGlzLmNvcnJlY3RTZWxlY3Rpb24oZWRpdG9yKTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENvbW1hbmRlOiBDb3JyaWdlciB0b3V0ZSBsYSBub3RlXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJmaXgtZW50aXJlLW5vdGVcIixcclxuICAgICAgbmFtZTogXCJDb3JyaWdlciB0b3V0ZSBsYSBub3RlXCIsXHJcbiAgICAgIGljb246IFwid2hvbGUtd29yZFwiLFxyXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jb3JyZWN0RW50aXJlTm90ZShlZGl0b3IpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ29tbWFuZGU6IEJhc2N1bGVyIGxhIGNvcnJlY3Rpb24gZW4gdGVtcHMgclx1MDBFOWVsXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJ0b2dnbGUtcmVhbHRpbWVcIixcclxuICAgICAgbmFtZTogXCJCYXNjdWxlciBjb3JyZWN0aW9uIHRlbXBzIHJcdTAwRTllbFwiLFxyXG4gICAgICBpY29uOiBcInphcFwiLFxyXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudG9nZ2xlUmVhbFRpbWVDb3JyZWN0aW9uKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJ0b2dnbGUtaGlnaGxpZ2h0XCIsXHJcbiAgICAgIG5hbWU6IFwiQWZmaWNoZXIvTWFzcXVlciBsZXMgY2FyYWN0XHUwMEU4cmVzIGludmlzaWJsZXNcIixcclxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUhpZ2hsaWdodCgpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb3JyaWdlIGxhIHNcdTAwRTlsZWN0aW9uIG91IHRvdXRlIGxhIG5vdGUgc2kgcmllbiBuJ2VzdCBzXHUwMEU5bGVjdGlvbm5cdTAwRTlcclxuICAgKi9cclxuICBwcml2YXRlIGNvcnJlY3RTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHJcbiAgICBpZiAoc2VsZWN0aW9uKSB7XHJcbiAgICAgIC8vIENvcnJpZ2VyIGxhIHNcdTAwRTlsZWN0aW9uXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZW5naW5lLnByb2Nlc3NUZXh0V2l0aERldGFpbHMoc2VsZWN0aW9uKTtcclxuICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzdWx0LmNvcnJlY3RlZCk7XHJcblxyXG4gICAgICB0aGlzLnNob3dDb3JyZWN0aW9uTm90aWNlKHJlc3VsdC5jb3JyZWN0aW9uc0NvdW50LCByZXN1bHQuZml4ZXJzVXNlZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBBdWN1bmUgc1x1MDBFOWxlY3Rpb24sIGNvcnJpZ2VyIHRvdXRlIGxhIG5vdGVcclxuICAgICAgdGhpcy5jb3JyZWN0RW50aXJlTm90ZShlZGl0b3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29ycmlnZSB0b3V0ZSBsYSBub3RlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb3JyZWN0RW50aXJlTm90ZShlZGl0b3I6IEVkaXRvcik6IHZvaWQge1xyXG4gICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5lbmdpbmUucHJvY2Vzc1RleHRXaXRoRGV0YWlscyhjb250ZW50KTtcclxuXHJcbiAgICBpZiAocmVzdWx0LmNvcnJlY3RlZCAhPT0gY29udGVudCkge1xyXG4gICAgICBlZGl0b3Iuc2V0VmFsdWUocmVzdWx0LmNvcnJlY3RlZCk7XHJcbiAgICAgIHRoaXMuc2hvd0NvcnJlY3Rpb25Ob3RpY2UocmVzdWx0LmNvcnJlY3Rpb25zQ291bnQsIHJlc3VsdC5maXhlcnNVc2VkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5ldyBOb3RpY2UoXCJBdWN1bmUgY29ycmVjdGlvbiBuXHUwMEU5Y2Vzc2FpcmVcIiwgMjAwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCYXNjdWxlIGxhIGNvcnJlY3Rpb24gZW4gdGVtcHMgclx1MDBFOWVsXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyB0b2dnbGVSZWFsVGltZUNvcnJlY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLnNldHRpbmdzLmVuYWJsZVJlYWxUaW1lQ29ycmVjdGlvbiA9XHJcbiAgICAgICF0aGlzLnNldHRpbmdzLmVuYWJsZVJlYWxUaW1lQ29ycmVjdGlvbjtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblxyXG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5zZXR0aW5ncy5lbmFibGVSZWFsVGltZUNvcnJlY3Rpb25cclxuICAgICAgPyBcImFjdGl2XHUwMEU5ZVwiXHJcbiAgICAgIDogXCJkXHUwMEU5c2FjdGl2XHUwMEU5ZVwiO1xyXG4gICAgbmV3IE5vdGljZShgQ29ycmVjdGlvbiB0ZW1wcyByXHUwMEU5ZWwgJHtzdGF0dXN9YCwgMzAwMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZmZpY2hlIHVuZSBub3RpZmljYXRpb24gZGUgY29ycmVjdGlvblxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2hvd0NvcnJlY3Rpb25Ob3RpY2UoXHJcbiAgICBjb3JyZWN0aW9uc0NvdW50OiBudW1iZXIsXHJcbiAgICBmaXhlcnNVc2VkOiBzdHJpbmdbXVxyXG4gICk6IHZvaWQge1xyXG4gICAgaWYgKGNvcnJlY3Rpb25zQ291bnQgPT09IDApIHtcclxuICAgICAgbmV3IE5vdGljZShcIkF1Y3VuZSBjb3JyZWN0aW9uIGFwcGxpcXVcdTAwRTllXCIsIDIwMDApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9XHJcbiAgICAgIGNvcnJlY3Rpb25zQ291bnQgPT09IDFcclxuICAgICAgICA/IFwiMSBjb3JyZWN0aW9uIGFwcGxpcXVcdTAwRTllXCJcclxuICAgICAgICA6IGAke2NvcnJlY3Rpb25zQ291bnR9IGNvcnJlY3Rpb25zIGFwcGxpcXVcdTAwRTllc2A7XHJcblxyXG4gICAgbmV3IE5vdGljZShtZXNzYWdlLCAzMDAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVucmVnaXN0cmUgbGVzIGdlc3Rpb25uYWlyZXMgZCdcdTAwRTl2XHUwMEU5bmVtZW50cyBjbGF2aWVyXHJcbiAgICovXHJcbiAgcHJpdmF0ZSByZWdpc3RlcktleWJvYXJkSGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsIFwia2V5ZG93blwiLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVLZXlEb3duKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR1x1MDBFOHJlIGxlcyBcdTAwRTl2XHUwMEU5bmVtZW50cyBjbGF2aWVyIHBvdXIgbGEgY29ycmVjdGlvbiB0ZW1wcyByXHUwMEU5ZWxcclxuICAgKi9cclxuICBwcml2YXRlIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgIC8vIFZcdTAwRTlyaWZpZXIgcXUnb24gZXN0IGRhbnMgdW4gXHUwMEU5ZGl0ZXVyIE1hcmtkb3duXHJcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgIGlmICghYWN0aXZlVmlldyB8fCBhY3RpdmVWaWV3LmdldE1vZGUoKSAhPT0gXCJzb3VyY2VcIikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XHJcblxyXG4gICAgLy8gRFx1MDBFOWxcdTAwRTlndWVyIGF1IG1vdGV1ciB0eXBvZ3JhcGhpcXVlXHJcbiAgICBpZiAodGhpcy5lbmdpbmUuaGFuZGxlS2V5RXZlbnQoZXZlbnQsIGVkaXRvcikpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQVBJIHB1YmxpcXVlIHBvdXIgbGVzIGF1dHJlcyBwbHVnaW5zIChvcHRpb25uZWwpXHJcbiAgICovXHJcbiAgcHVibGljIGdldEVuZ2luZSgpOiBUeXBvZ3JhcGh5RW5naW5lIHtcclxuICAgIHJldHVybiB0aGlzLmVuZ2luZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBhcHBseUNvcnJlY3Rpb25zKHRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gdGhpcy5lbmdpbmUucHJvY2Vzc1RleHQodGV4dCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0QXZhaWxhYmxlRml4ZXJzKCk6IHN0cmluZ1tdIHtcclxuICAgIHJldHVybiB0aGlzLmVuZ2luZS5nZXRGaXhlcnMoKS5tYXAoKGYpID0+IGYuaWQpO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4gKiBNZXQgXHUwMEUwIGpvdXIgbCdhZmZpY2hhZ2UgZGVzIGNhcmFjdFx1MDBFOHJlcyBpbnZpc2libGVzIHZpYSBDU1NcclxuICovXHJcbnByaXZhdGUgdXBkYXRlSW52aXNpYmxlQ2hhcnNEaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkQ2xhc3MoJ3R5cG9ncmFwaHktc2hvdy1pbnZpc2libGUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDbGFzcygndHlwb2dyYXBoeS1zaG93LWludmlzaWJsZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQmFzY3VsZSBsJ2FmZmljaGFnZSBkZXMgY2FyYWN0XHUwMEU4cmVzIGludmlzaWJsZXNcclxuICovXHJcbnByaXZhdGUgYXN5bmMgdG9nZ2xlSGlnaGxpZ2h0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gIXRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZDtcclxuICAgIFxyXG4gICAgLy8gTWlzZSBcdTAwRTAgam91ciBpbW1cdTAwRTlkaWF0ZSBkZSBsJ2FmZmljaGFnZVxyXG4gICAgdGhpcy51cGRhdGVJbnZpc2libGVDaGFyc0Rpc3BsYXkoKTtcclxuICAgIFxyXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID8gJ2FjdGl2XHUwMEU5JyA6ICdkXHUwMEU5c2FjdGl2XHUwMEU5JztcclxuICAgIG5ldyBOb3RpY2UoYEFmZmljaGFnZSBkZXMgY2FyYWN0XHUwMEU4cmVzIGludmlzaWJsZXMgJHtzdGF0dXN9YCwgMzAwMCk7XHJcbiAgICBcclxuICAgIC8vIE1ldHRyZSBcdTAwRTAgam91ciBsZXMgYm91dG9uc1xyXG4gICAgdXBkYXRlU3RhdHVzQmFyQnV0dG9uKHRoaXMuc3RhdHVzQmFyQnV0dG9uLCB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpO1xyXG4gICAgdXBkYXRlVGFiVGl0bGVCYXJCdXR0b24odGhpcy50YWJUaXRsZUJhckJ1dHRvbiwgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKTtcclxufVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHsgRWRpdG9yVmlldywgRGVjb3JhdGlvbiwgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB7IFJhbmdlU2V0QnVpbGRlciB9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xyXG5pbXBvcnQgeyBUeXBvZ3JhcGh5U2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9pbnRlcmZhY2VzJztcclxuXHJcbi8vIFZhcmlhYmxlIGdsb2JhbGUgc2ltcGxpZmlcdTAwRTllIHBvdXIgbGVzIHNldHRpbmdzXHJcbmxldCBjdXJyZW50U2V0dGluZ3M6IFR5cG9ncmFwaHlTZXR0aW5ncztcclxuXHJcbi8qKlxyXG4gKiBDclx1MDBFOWUgbGVzIGRcdTAwRTljb3JhdGlvbnMgdmlzdWVsbGVzIHBvdXIgbGVzIGNhcmFjdFx1MDBFOHJlcyBzcFx1MDBFOWNpYXV4XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVjb3JhdGlvbnMoc2V0dGluZ3M6IFR5cG9ncmFwaHlTZXR0aW5ncykge1xyXG4gICAgY3VycmVudFNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICBcclxuICAgIC8vIERcdTAwRTljb3JhdGlvbiBwb3VyIGwnZXNwYWNlIGluc1x1MDBFOWNhYmxlIG5vcm1hbGVcclxuICAgIGNvbnN0IG5vbkJyZWFraW5nU3BhY2VEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5tYXJrKHtcclxuICAgICAgICBjbGFzczogJ25vbkJyZWFraW5nU3BhY2UnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEXHUwMEU5Y29yYXRpb24gcG91ciBsJ2VzcGFjZSBmaW5lIGluc1x1MDBFOWNhYmxlXHJcbiAgICBjb25zdCB0aGluU3BhY2VEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5tYXJrKHtcclxuICAgICAgICBjbGFzczogJ3RoaW5TcGFjZSdcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERcdTAwRTljb3JhdGlvbiBwb3VyIGxlIHRpcmV0IGNhZHJhdGluXHJcbiAgICBjb25zdCBlbURhc2hEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5tYXJrKHtcclxuICAgICAgICBjbGFzczogJ2VtLWRhc2gnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEXHUwMEU5Y29yYXRpb24gcG91ciBsJ2VzcGFjZSBub3JtYWxlXHJcbiAgICBjb25zdCByZWd1bGFyU3BhY2VEZWNvcmF0aW9uID0gRGVjb3JhdGlvbi5tYXJrKHtcclxuICAgICAgICBjbGFzczogJ3JlZ3VsYXJTcGFjZSdcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XHJcbiAgICAgICAgZGVjb3JhdGlvbnM6IGFueTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xyXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHZpZXcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlKHVwZGF0ZTogVmlld1VwZGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBNaXNlIFx1MDBFMCBqb3VyIHNpIGxlIGRvY3VtZW50IGNoYW5nZSBPVSBzaSBsYSB2dWUgY2hhbmdlXHJcbiAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHVwZGF0ZS52aWV3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYnVpbGREZWNvcmF0aW9ucyh2aWV3OiBFZGl0b3JWaWV3KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyPERlY29yYXRpb24+KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBcHBsaXF1ZXIgbGVzIGRcdTAwRTljb3JhdGlvbnMgdW5pcXVlbWVudCBzaSBsYSBtaXNlIGVuIFx1MDBFOXZpZGVuY2UgZXN0IGFjdGl2XHUwMEU5ZVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFNldHRpbmdzICYmIGN1cnJlbnRTZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQgPSB2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0byk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUG9zaXRpb24gZGUgZFx1MDBFOXBhcnQgcG91ciBsZSB0cmFpdGVtZW50IGR1IHRleHRlXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0UG9zID0gZnJvbTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBBbmFseXNlciBsZSB0ZXh0ZSBwb3VyIGRcdTAwRTl0ZWN0ZXIgbGVzIGZyb250bWF0dGVyIGV0IGJsb2NzIGRlIGNvZGVcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5Gcm9udG1hdHRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbkNvZGVCbG9jayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lU3RhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGV4dFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gc3RhcnRQb3MgKyBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRFx1MDBFOXRlY3Rpb24gZHUgZFx1MDBFOWJ1dCBldCBmaW4gZHUgZnJvbnRtYXR0ZXIgKC0tLSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lU3RhcnQgJiYgdGV4dC5zdWJzdHIoaSwgMykgPT09ICctLS0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkZyb250bWF0dGVyID0gIWluRnJvbnRtYXR0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEXHUwMEU5dGVjdGlvbiBkdSBkXHUwMEU5YnV0IGV0IGZpbiBkZXMgYmxvY3MgZGUgY29kZSAoYGBgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZVN0YXJ0ICYmIHRleHQuc3Vic3RyKGksIDMpID09PSAnYGBgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5Db2RlQmxvY2sgPSAhaW5Db2RlQmxvY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEXHUwMEU5dGVjdGlvbiBkdSBkXHUwMEU5YnV0IGQndW5lIG5vdXZlbGxlIGxpZ25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnXFxuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0YXJ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lU3RhcnQgJiYgY2hhciAhPT0gJyAnICYmIGNoYXIgIT09ICdcXHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVlx1MDBFOXJpZmllciBzaSBsYSBsaWduZSBhY3R1ZWxsZSBlc3QgZGFucyB1biBibG9jIHNwXHUwMEU5Y2lhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0luU3BlY2lhbEJsb2NrID0gaW5Gcm9udG1hdHRlciB8fCBpbkNvZGVCbG9jaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxpcXVlciBsZXMgZFx1MDBFOWNvcmF0aW9ucyBzZXVsZW1lbnQgc2kgb24gbidlc3QgcGFzIGRhbnMgdW4gYmxvYyBzcFx1MDBFOWNpYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0luU3BlY2lhbEJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1xcdTAwQTAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQocG9zLCBwb3MgKyAxLCBub25CcmVha2luZ1NwYWNlRGVjb3JhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1xcdTIwMkYnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQocG9zLCBwb3MgKyAxLCB0aGluU3BhY2VEZWNvcmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnXHUyMDE0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKHBvcywgcG9zICsgMSwgZW1EYXNoRGVjb3JhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQocG9zLCBwb3MgKyAxLCByZWd1bGFyU3BhY2VEZWNvcmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogTWV0IFx1MDBFMCBqb3VyIGxlcyBzZXR0aW5ncyBnbG9iYXV4IChmb25jdGlvbiBzaW1wbGlmaVx1MDBFOWUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRGVjb3JhdGlvblNldHRpbmdzKHNldHRpbmdzOiBUeXBvZ3JhcGh5U2V0dGluZ3MpIHtcclxuICAgIGN1cnJlbnRTZXR0aW5ncyA9IHNldHRpbmdzO1xyXG59IiwgImltcG9ydCB7IFBsdWdpbiwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBDclx1MDBFOWUgdW4gYm91dG9uIGRhbnMgbGEgYmFycmUgZCdcdTAwRTl0YXRcclxuICogQHBhcmFtIHBsdWdpbiBJbnN0YW5jZSBkdSBwbHVnaW5cclxuICogQHBhcmFtIGlzRW5hYmxlZCBcdTAwQzl0YXQgaW5pdGlhbCAoYWN0aXZcdTAwRTkvZFx1MDBFOXNhY3Rpdlx1MDBFOSlcclxuICogQHBhcmFtIHRvZ2dsZUNhbGxiYWNrIEZvbmN0aW9uIGRlIHJhcHBlbCBwb3VyIGxlIGJhc2N1bGVtZW50XHJcbiAqIEByZXR1cm5zIFx1MDBDOWxcdTAwRTltZW50IEhUTUwgZHUgYm91dG9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RhdHVzQmFyQnV0dG9uKFxyXG4gICAgcGx1Z2luOiBQbHVnaW4sXHJcbiAgICBpc0VuYWJsZWQ6IGJvb2xlYW4sXHJcbiAgICB0b2dnbGVDYWxsYmFjazogKCkgPT4gdm9pZFxyXG4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBzdGF0dXNCYXJJdGVtRWwgPSBwbHVnaW4uYWRkU3RhdHVzQmFySXRlbSgpO1xyXG4gICAgc3RhdHVzQmFySXRlbUVsLmlkID0gXCJoaWdobGlnaHQtc3RhdHVzLWJhci1idXR0b25cIjtcclxuICAgIFxyXG4gICAgc3RhdHVzQmFySXRlbUVsLmFkZENsYXNzKFwibW9kLWNsaWNrYWJsZVwiKTtcclxuICAgIFxyXG4gICAgLy8gQ3JcdTAwRTllciBsJ2ljXHUwMEY0bmUgZXQgbCdham91dGVyIGF1IGJvdXRvblxyXG4gICAgc2V0SWNvbihzdGF0dXNCYXJJdGVtRWwsIFwicGlsY3Jvd1wiKTtcclxuXHJcbiAgICBzdGF0dXNCYXJJdGVtRWwuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkFmZmljaGVyL01hc3F1ZXIgbGVzIGNhcmFjdFx1MDBFOHJlcyBpbnZpc2libGVzXCIpO1xyXG4gICAgc3RhdHVzQmFySXRlbUVsLnNldEF0dHJpYnV0ZShcImRhdGEtdG9vbHRpcC1wb3NpdGlvblwiLCBcInRvcFwiKTtcclxuXHJcbiAgICAvLyBEXHUwMEU5ZmluaXIgbCdhcHBhcmVuY2UgaW5pdGlhbGVcclxuICAgIHVwZGF0ZVN0YXR1c0JhckJ1dHRvbihzdGF0dXNCYXJJdGVtRWwsIGlzRW5hYmxlZCk7XHJcblxyXG4gICAgLy8gQWpvdXRlciBsJ1x1MDBFOXZcdTAwRTluZW1lbnQgZGUgY2xpY1xyXG4gICAgc3RhdHVzQmFySXRlbUVsLm9uQ2xpY2tFdmVudCgoKSA9PiB7XHJcbiAgICAgICAgdG9nZ2xlQ2FsbGJhY2soKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gc3RhdHVzQmFySXRlbUVsO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JcdTAwRTllIHVuIGJvdXRvbiBkYW5zIGxhIGJhcnJlIGRlIHRpdHJlIGRlcyBvbmdsZXRzXHJcbiAqIEBwYXJhbSBwbHVnaW4gSW5zdGFuY2UgZHUgcGx1Z2luXHJcbiAqIEBwYXJhbSBpc0VuYWJsZWQgXHUwMEM5dGF0IGluaXRpYWwgKGFjdGl2XHUwMEU5L2RcdTAwRTlzYWN0aXZcdTAwRTkpXHJcbiAqIEBwYXJhbSB0b2dnbGVDYWxsYmFjayBGb25jdGlvbiBkZSByYXBwZWwgcG91ciBsZSBiYXNjdWxlbWVudFxyXG4gKiBAcmV0dXJucyBcdTAwQzlsXHUwMEU5bWVudCBIVE1MIGR1IGJvdXRvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhYlRpdGxlQmFyQnV0dG9uKFxyXG4gICAgcGx1Z2luOiBQbHVnaW4sXHJcbiAgICBpc0VuYWJsZWQ6IGJvb2xlYW4sXHJcbiAgICB0b2dnbGVDYWxsYmFjazogKCkgPT4gdm9pZFxyXG4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICAvLyBDclx1MDBFOWVyIGxlIGJvdXRvblxyXG4gICAgY29uc3QgYnV0dG9uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIGJ1dHRvbkVsLmlkID0gXCJoaWdobGlnaHQtdGFiLXRpdGxlLWJ1dHRvblwiO1xyXG4gICAgYnV0dG9uRWwuY2xhc3NOYW1lID0gXCJjbGlja2FibGUtaWNvbiB2aWV3LWFjdGlvblwiO1xyXG4gICAgYnV0dG9uRWwuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkFmZmljaGVyL01hc3F1ZXIgbGVzIGNhcmFjdFx1MDBFOHJlcyBpbnZpc2libGVzXCIpO1xyXG4gICAgXHJcbiAgICAvLyBDclx1MDBFOWVyIGwnaWNcdTAwRjRuZSBldCBsJ2Fqb3V0ZXIgYXUgYm91dG9uXHJcbiAgICBzZXRJY29uKGJ1dHRvbkVsLCBcInBpbGNyb3dcIik7XHJcbiAgICBcclxuICAgIC8vIERcdTAwRTlmaW5pciBsJ2FwcGFyZW5jZSBpbml0aWFsZVxyXG4gICAgdXBkYXRlVGFiVGl0bGVCYXJCdXR0b24oYnV0dG9uRWwsIGlzRW5hYmxlZCk7XHJcbiAgICBcclxuICAgIC8vIEFqb3V0ZXIgbCdcdTAwRTl2XHUwMEU5bmVtZW50IGRlIGNsaWNcclxuICAgIGJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0b2dnbGVDYWxsYmFjaygpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIEFqb3V0ZXIgbGUgYm91dG9uIFx1MDBFMCBsYSBiYXJyZSBkZSB0aXRyZVxyXG4gICAgY29uc3QgdGl0bGVCYXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3LWhlYWRlci10aXRsZS1jb250YWluZXInKTtcclxuICAgIGlmICh0aXRsZUJhckVsKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uc0VsID0gdGl0bGVCYXJFbC5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKGFjdGlvbnNFbCAmJiBhY3Rpb25zRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aWV3LWFjdGlvbnMnKSkge1xyXG4gICAgICAgICAgICBhY3Rpb25zRWwucHJlcGVuZChidXR0b25FbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gYnV0dG9uRWw7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTWV0IFx1MDBFMCBqb3VyIGwnYXBwYXJlbmNlIGR1IGJvdXRvbiBkZSBsYSBiYXJyZSBkJ1x1MDBFOXRhdFxyXG4gKiBAcGFyYW0gYnV0dG9uRWwgXHUwMEM5bFx1MDBFOW1lbnQgSFRNTCBkdSBib3V0b25cclxuICogQHBhcmFtIGlzRW5hYmxlZCBcdTAwQzl0YXQgKGFjdGl2XHUwMEU5L2RcdTAwRTlzYWN0aXZcdTAwRTkpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU3RhdHVzQmFyQnV0dG9uKGJ1dHRvbkVsOiBIVE1MRWxlbWVudCB8IG51bGwsIGlzRW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaWYgKCFidXR0b25FbCkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgICAgYnV0dG9uRWwuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b25FbC5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZXQgXHUwMEUwIGpvdXIgbCdhcHBhcmVuY2UgZHUgYm91dG9uIGRlIGxhIGJhcnJlIGRlIHRpdHJlXHJcbiAqIEBwYXJhbSBidXR0b25FbCBcdTAwQzlsXHUwMEU5bWVudCBIVE1MIGR1IGJvdXRvblxyXG4gKiBAcGFyYW0gaXNFbmFibGVkIFx1MDBDOXRhdCAoYWN0aXZcdTAwRTkvZFx1MDBFOXNhY3Rpdlx1MDBFOSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYWJUaXRsZUJhckJ1dHRvbihidXR0b25FbDogSFRNTEVsZW1lbnQgfCBudWxsLCBpc0VuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIGlmICghYnV0dG9uRWwpIHJldHVybjtcclxuICAgIFxyXG4gICAgaWYgKGlzRW5hYmxlZCkge1xyXG4gICAgICAgIGJ1dHRvbkVsLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU3VwcHJpbWUgbGUgYm91dG9uIGRlIGxhIGJhcnJlIGQnXHUwMEU5dGF0XHJcbiAqIEBwYXJhbSBidXR0b25FbCBcdTAwQzlsXHUwMEU5bWVudCBIVE1MIGR1IGJvdXRvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVN0YXR1c0JhckJ1dHRvbihidXR0b25FbDogSFRNTEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XHJcbiAgICBpZiAoYnV0dG9uRWwpIHtcclxuICAgICAgICBidXR0b25FbC5yZW1vdmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFN1cHByaW1lIGxlIGJvdXRvbiBkZSBsYSBiYXJyZSBkZSB0aXRyZVxyXG4gKiBAcGFyYW0gYnV0dG9uRWwgXHUwMEM5bFx1MDBFOW1lbnQgSFRNTCBkdSBib3V0b25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUYWJUaXRsZUJhckJ1dHRvbihidXR0b25FbDogSFRNTEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XHJcbiAgICBpZiAoYnV0dG9uRWwpIHtcclxuICAgICAgICBidXR0b25FbC5yZW1vdmUoKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCAiLy8gc3JjL2ZpeGVycy9iYXNlL2Jhc2UtZml4ZXIudHNcclxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUeXBvZ3JhcGhpY0ZpeGVyLCBGaXhlckNhdGVnb3J5LCBGaXhlckV4YW1wbGUgfSBmcm9tICcuLi8uLi90eXBlcy9pbnRlcmZhY2VzJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzc2UgZGUgYmFzZSBhYnN0cmFpdGUgcG91ciB0b3VzIGxlcyBmaXhlcnMgdHlwb2dyYXBoaXF1ZXNcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlRml4ZXIgaW1wbGVtZW50cyBUeXBvZ3JhcGhpY0ZpeGVyIHtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZWFkb25seSBpZDogc3RyaW5nO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IGNhdGVnb3J5OiBGaXhlckNhdGVnb3J5O1xyXG4gICAgcHVibGljIGFic3RyYWN0IHJlYWRvbmx5IHByaW9yaXR5OiBudW1iZXI7XHJcbiAgICBcclxuICAgIHB1YmxpYyBlbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByb3RlY3RlZCBsb2NhbGU6IHN0cmluZyA9ICdmci1GUic7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNXHUwMEU5dGhvZGUgcHJpbmNpcGFsZSBkZSBjb3JyZWN0aW9uIC0gZG9pdCBcdTAwRUF0cmUgaW1wbFx1MDBFOW1lbnRcdTAwRTllXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBmaXgodGV4dDogc3RyaW5nKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uZmlndXJhdGlvbiBkZSBsYSBsb2NhbGUgKG9wdGlvbm5lbGxlKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0TG9jYWxlKGxvY2FsZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sb2NhbGUgPSBsb2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXN0aW9uIGRlcyBcdTAwRTl2XHUwMEU5bmVtZW50cyBjbGF2aWVyIChvcHRpb25uZWxsZSlcclxuICAgICAqIFx1MDBDMCBzdXJjaGFyZ2VyIGRhbnMgbGVzIGNsYXNzZXMgZW5mYW50cyBzaSBuXHUwMEU5Y2Vzc2FpcmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhbmRsZUtleUV2ZW50PyhldmVudDogS2V5Ym9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhlbXBsZSBkZSB0cmFuc2Zvcm1hdGlvbiAob3B0aW9ubmVsKVxyXG4gICAgICogXHUwMEMwIHN1cmNoYXJnZXIgZGFucyBsZXMgY2xhc3NlcyBlbmZhbnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlPygpOiBGaXhlckV4YW1wbGU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWXHUwMEU5cmlmaWUgc2kgbGUgZml4ZXIgZXN0IGNvbXBhdGlibGUgYXZlYyBsYSBsb2NhbGUgYWN0dWVsbGVcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGlzTG9jYWxlQ29tcGF0aWJsZSh0YXJnZXRMb2NhbGVzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRMb2NhbGVzLnNvbWUobG9jYWxlID0+IFxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsZS5zdGFydHNXaXRoKGxvY2FsZSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVlx1MDBFOXJpZmllIHNpIGxlIGZpeGVyIGVzdCBhY3Rpdlx1MDBFOSBldCBjb21wYXRpYmxlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgdW5lIHRyYW5zZm9ybWF0aW9uIHJlZ2V4IGF2ZWMgcmVtcGxhY2VtZW50IHBhciBjaGFcdTAwRUVuZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXBwbHlSZWdleFRyYW5zZm9ybSh0ZXh0OiBzdHJpbmcsIHBhdHRlcm46IFJlZ0V4cCwgcmVwbGFjZW1lbnQ6IHN0cmluZyk6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgdW5lIHRyYW5zZm9ybWF0aW9uIHJlZ2V4IGF2ZWMgcmVtcGxhY2VtZW50IHBhciBmb25jdGlvblxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYXBwbHlSZWdleFRyYW5zZm9ybSh0ZXh0OiBzdHJpbmcsIHBhdHRlcm46IFJlZ0V4cCwgcmVwbGFjZW1lbnQ6IChzdWJzdHJpbmc6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHN0cmluZyk6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgdW5lIHRyYW5zZm9ybWF0aW9uIHJlZ2V4IHNpbXBsZSAtIGltcGxcdTAwRTltZW50YXRpb25cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFwcGx5UmVnZXhUcmFuc2Zvcm0oXHJcbiAgICAgICAgdGV4dDogc3RyaW5nLCBcclxuICAgICAgICBwYXR0ZXJuOiBSZWdFeHAsIFxyXG4gICAgICAgIHJlcGxhY2VtZW50OiBzdHJpbmcgfCAoKHN1YnN0cmluZzogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gc3RyaW5nKVxyXG4gICAgKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VtZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaXF1ZSBwbHVzaWV1cnMgdHJhbnNmb3JtYXRpb25zIHJlZ2V4IGVuIHNcdTAwRTlxdWVuY2VcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFwcGx5TXVsdGlwbGVUcmFuc2Zvcm1zKFxyXG4gICAgICAgIHRleHQ6IHN0cmluZywgXHJcbiAgICAgICAgdHJhbnNmb3JtczogQXJyYXk8e1xyXG4gICAgICAgICAgICBwYXR0ZXJuOiBSZWdFeHAsIFxyXG4gICAgICAgICAgICByZXBsYWNlbWVudDogc3RyaW5nIHwgKChzdWJzdHJpbmc6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IHN0cmluZylcclxuICAgICAgICB9PlxyXG4gICAgKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNmb3Jtcy5yZWR1Y2UoKHJlc3VsdCwgdHJhbnNmb3JtKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHJhbnNmb3JtLnJlcGxhY2VtZW50ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlSZWdleFRyYW5zZm9ybShyZXN1bHQsIHRyYW5zZm9ybS5wYXR0ZXJuLCB0cmFuc2Zvcm0ucmVwbGFjZW1lbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlSZWdleFRyYW5zZm9ybShyZXN1bHQsIHRyYW5zZm9ybS5wYXR0ZXJuLCB0cmFuc2Zvcm0ucmVwbGFjZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWXHUwMEU5cmlmaWUgc2kgdW5lIHBvc2l0aW9uIGRhbnMgbGUgdGV4dGUgZXN0IGRhbnMgdW4gY29udGV4dGUgdmFsaWRlXHJcbiAgICAgKiAocGFzIGRhbnMgZHUgY29kZSwgZGVzIGxpZW5zLCBldGMuKVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaXNWYWxpZENvbnRleHQodGV4dDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gVlx1MDBFOXJpZmljYXRpb25zIGJhc2lxdWVzIHBvdXIgXHUwMEU5dml0ZXIgZGUgbW9kaWZpZXIgbGUgY29kZSBpbmxpbmVcclxuICAgICAgICBjb25zdCBiZWZvcmVDb250ZXh0ID0gdGV4dC5zdWJzdHJpbmcoTWF0aC5tYXgoMCwgcG9zaXRpb24gLSAxMCksIHBvc2l0aW9uKTtcclxuICAgICAgICBjb25zdCBhZnRlckNvbnRleHQgPSB0ZXh0LnN1YnN0cmluZyhwb3NpdGlvbiwgTWF0aC5taW4odGV4dC5sZW5ndGgsIHBvc2l0aW9uICsgMTApKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTAwQzl2aXRlciBsZSBjb2RlIGlubGluZSBtYXJrZG93blxyXG4gICAgICAgIGlmIChiZWZvcmVDb250ZXh0LmluY2x1ZGVzKCdgJykgJiYgYWZ0ZXJDb250ZXh0LmluY2x1ZGVzKCdgJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTAwQzl2aXRlciBsZXMgbGllbnMgbWFya2Rvd25cclxuICAgICAgICBpZiAoYmVmb3JlQ29udGV4dC5pbmNsdWRlcygnWycpICYmIGFmdGVyQ29udGV4dC5pbmNsdWRlcygnXScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNXHUwMEU5dGhvZGUgdXRpbGl0YWlyZSBwb3VyIGxvZ2dlciBsZXMgY29ycmVjdGlvbnMgKGRcdTAwRTl2ZWxvcHBlbWVudClcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGxvZ0NvcnJlY3Rpb24ob3JpZ2luYWw6IHN0cmluZywgY29ycmVjdGVkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAob3JpZ2luYWwgIT09IGNvcnJlY3RlZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBbJHt0aGlzLmlkfV0gXCIke29yaWdpbmFsfVwiIFx1MjE5MiBcIiR7Y29ycmVjdGVkfVwiYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgIi8vIHNyYy9jb25zdGFudHMvdW5pY29kZS50c1xyXG5cclxuLyoqXHJcbiAqIENhcmFjdFx1MDBFOHJlcyBVbmljb2RlIHBvdXIgbGEgdHlwb2dyYXBoaWVcclxuICogQHNlZSBodHRwczovL3VuaWNvZGUub3JnL2NoYXJ0cy9cclxuICovXHJcbmV4cG9ydCBjb25zdCBVTklDT0RFX0NIQVJTID0ge1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIEVTUEFDRVMgU1BcdTAwQzlDSUFVWFxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBOT19CUkVBS19USElOX1NQQUNFOiBcIlxcdTIwMkZcIiAvKiogRXNwYWNlIGZpbmUgaW5zXHUwMEU5Y2FibGUgKFUrMjAyRikgLSBVdGlsaXNcdTAwRTllIGF2YW50IDsgISA/IGVuIGZyYW5cdTAwRTdhaXMgKi8sXHJcbiAgTk9fQlJFQUtfU1BBQ0U6IFwiXFx1MDBBMFwiIC8qKiBFc3BhY2UgaW5zXHUwMEU5Y2FibGUgKFUrMDBBMCkgLSBVdGlsaXNcdTAwRTllIGF2YW50IDogZW4gZnJhblx1MDBFN2FpcyAqLyxcclxuICBOT1JNQUxfU1BBQ0U6IFwiIFwiIC8qKiBFc3BhY2Ugbm9ybWFsZSAocG91ciByXHUwMEU5Zlx1MDBFOXJlbmNlKSAqLyxcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gUE9OQ1RVQVRJT05cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgRUxMSVBTSVM6IFwiXHUyMDI2XCIgLyoqIFBvaW50cyBkZSBzdXNwZW5zaW9uIChVKzIwMjYpIC0gUmVtcGxhY2UgLi4uICovLFxyXG4gIE5EQVNIOiBcIlx1MjAxM1wiIC8qKiBUaXJldCBkZW1pLWNhZHJhdGluIChVKzIwMTMpIC0gUG91ciBsZXMgcGxhZ2VzIGRlIG5vbWJyZXMgKi8sXHJcbiAgTURBU0g6IFwiXHUyMDE0XCIgLyoqIFRpcmV0IGNhZHJhdGluIChVKzIwMTQpIC0gUG91ciBsZXMgaW5jaXNlcyBlbiBmcmFuXHUwMEU3YWlzICovLFxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBHVUlMTEVNRVRTIEVUIEFQT1NUUk9QSEVTXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIExEUVVPOiBcIlx1MjAxQ1wiIC8qKiBHdWlsbGVtZXQgb3V2cmFudCBhbmdsYWlzIChVKzIwMUMpICovLFxyXG4gIFJEUVVPOiBcIlx1MjAxRFwiIC8qKiBHdWlsbGVtZXQgZmVybWFudCBhbmdsYWlzIChVKzIwMUQpICovLFxyXG5cclxuICAvKiogTFNRVU86ICdcdTIwMUMnLCAgQXBvc3Ryb3BoZSBvdXZyYW50ZSAoVSsyMDE4KSAtIFJhcmVtZW50IHV0aWxpc1x1MDBFOWUgKi9cclxuXHJcbiAgUlNRVU86IFwiXHUyMDE5XCIgLyoqIEFwb3N0cm9waGUgZmVybWFudGUvdHlwb2dyYXBoaXF1ZSAoVSsyMDE5KSAtIFJlbXBsYWNlICcgKi8sXHJcbiAgTEFRVU86IFwiXHUwMEFCXCIgLyoqIEd1aWxsZW1ldCBmcmFuXHUwMEU3YWlzIG91dnJhbnQgKFUrMDBBQikgKi8sXHJcbiAgUkFRVU86IFwiXHUwMEJCXCIgLyoqIEd1aWxsZW1ldCBmcmFuXHUwMEU3YWlzIGZlcm1hbnQgKFUrMDBCQikgKi8sXHJcblxyXG4gIEJEUVVPOiBcIlx1MjAxRVwiLCAvLyAmYmRxdW87IG9yICYjODIyMjtcclxuICBTSFk6IFwiXFx4QzJcXHhBRFwiLCAvLyAmc2h5O1xyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBTWU1CT0xFUyBNQVRIXHUwMEM5TUFUSVFVRVNcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgVElNRVM6IFwiXHUwMEQ3XCIgLyoqIFN5bWJvbGUgbXVsdGlwbGljYXRpb24gKFUrMDBENykgLSBSZW1wbGFjZSB4IGVudHJlIG5vbWJyZXMgKi8sXHJcbiAgRElWSURFOiBcIlx1MDBGN1wiIC8qKiBTeW1ib2xlIGRpdmlzaW9uIChVKzAwRjcpICovLFxyXG4gIFBMVVNfTUlOVVM6IFwiXHUwMEIxXCIsIC8qKiBTeW1ib2xlIHBsdXMgb3UgbW9pbnMgKFUrMDBCMSkgKi8gXHJcbiAgTUlOVVM6IFwiXHUyMjEyXCIsIC8qKiBTeW1ib2xlIG1vaW5zIChVKzIyMTIpIC0gUGx1cyBsb25nIHF1ZSBsZSB0cmFpdCBkJ3VuaW9uIHN0YW5kYXJkICovXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIFNZTUJPTEVTIERFIE1BUlFVRVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKiogU3ltYm9sZSB0cmFkZW1hcmsgKFUrMjEyMikgLSBSZW1wbGFjZSAodG0pICovXHJcbiAgVFJBREU6IFwiXHUyMTIyXCIsXHJcbiAgUkVHOiBcIlx1MDBBRVwiLCAvKiogU3ltYm9sZSByZWdpc3RlcmVkIChVKzAwQUUpIC0gUmVtcGxhY2UgKHIpICovXHJcbiAgQ09QWTogXCJcdTAwQTlcIiwgLyoqIFN5bWJvbGUgY29weXJpZ2h0IChVKzAwQTkpIC0gUmVtcGxhY2UgKGMpICovXHJcblxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyBBVVRSRVMgU1lNQk9MRVMgVVRJTEVTXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIFxyXG4gIFBSSU1FOiBcIlx1MjAzMlwiLCAvKiogUHJpbWUgKFUrMjAzMikgLSBNaW51dGVzLCBwaWVkcyAqL1xyXG4gIERPVUJMRV9QUklNRTogXCJcdTIwMzNcIiwgICAvKiogRG91YmxlIHByaW1lIChVKzIwMzMpIC0gU2Vjb25kZXMsIHBvdWNlcyAqL1xyXG4gIFNFQ1RJT046IFwiXHUwMEE3XCIsICAgLyoqIFNlY3Rpb24gKFUrMDBBNykgKi9cclxuICBQQVJBR1JBUEg6IFwiXHUwMEI2XCIsICAgLyoqIFBhcmFncmFwaGUgKFUrMDBCNikgKi9cclxuICBCVUxMRVQ6IFwiXHUyMDIyXCIsICAgLyoqIFB1Y2UgKFUrMjAyMikgKi9cclxuICBBUlJPV19SSUdIVDogXCJcdTIxOTJcIiwgICAvKiogRmxcdTAwRThjaGUgZHJvaXRlIChVKzIxOTIpICovXHJcbiAgQVJST1dfTEVGVDogXCJcdTIxOTBcIiwgICAvKiogRmxcdTAwRThjaGUgZ2F1Y2hlIChVKzIxOTApICovXHJcbiAgRVVSTzogXCJcdTIwQUNcIiwgLyoqIEV1cm8gKFUrMjBBQykgKi8gXHJcbiAgUE9VTkQ6IFwiXHUwMEEzXCIsIC8qKiBMaXZyZSBzdGVybGluZyAoVSswMEEzKSAqLyBcclxuICBZRU46IFwiXHUwMEE1XCIsIC8qKiBZZW4gKFUrMDBBNSkgKi9cclxufSBhcyBjb25zdDtcclxuXHJcbi8qKlxyXG4gKiBUeXBlIGRlcyBjbFx1MDBFOXMgZGUgY2FyYWN0XHUwMEU4cmVzIFVuaWNvZGVcclxuICovXHJcbmV4cG9ydCB0eXBlIFVuaWNvZGVDaGFyS2V5ID0ga2V5b2YgdHlwZW9mIFVOSUNPREVfQ0hBUlM7XHJcblxyXG4vKipcclxuICogUGF0dGVybnMgcmVnZXggdXRpbGVzIHBvdXIgbGEgZFx1MDBFOXRlY3Rpb25cclxuICovXHJcbmV4cG9ydCBjb25zdCBVTklDT0RFX1BBVFRFUk5TID0ge1xyXG4gIFxyXG4gIE1VTFRJUExFX1NQQUNFUzogL1xcc3syLH0vZywgLyoqIERcdTAwRTl0ZWN0ZSBsZXMgZXNwYWNlcyBtdWx0aXBsZXMgKi8gIFxyXG4gIEVMTElQU0lTX0RPVFM6IC9cXC57Myx9L2csIC8qKiBEXHUwMEU5dGVjdGUgbGVzIHBvaW50cyBkZSBzdXNwZW5zaW9uIHN0YW5kYXJkcyAqLyAgXHJcbiAgRE9VQkxFX0RBU0g6IC8tLS9nLCAvKiogRFx1MDBFOXRlY3RlIGxlcyBkb3VibGVzIHRpcmV0cyAqLyBcclxuICBTVFJBSUdIVF9RVU9URVM6IC9cIi9nLCAgLyoqIERcdTAwRTl0ZWN0ZSBsZXMgZ3VpbGxlbWV0cyBkcm9pdHMgKi8gXHJcbiAgU1RSQUlHSFRfQVBPU1RST1BIRVM6IC8oXFx3KScvZywgIC8qKiBEXHUwMEU5dGVjdGUgbGVzIGFwb3N0cm9waGVzIGRyb2l0ZXMgZGFucyBsZXMgY29udHJhY3Rpb25zICovICBcclxuICBNVUxUSVBMWV9YOiAvKFxcZCspXFxzKlt4WF1cXHMqKFxcZCspL2csIC8qKiBEXHUwMEU5dGVjdGUgeCBlbnRyZSBub21icmVzIHBvdXIgbXVsdGlwbGljYXRpb24gKi8gIFxyXG4gIE1VTFRJUExZX1NUQVI6IC8oXFxkKylcXHMqXFwqXFxzKihcXGQrKS9nLCAvKiogRFx1MDBFOXRlY3RlICogZW50cmUgbm9tYnJlcyBwb3VyIG11bHRpcGxpY2F0aW9uICovXHJcblxyXG4gIC8qKiBEXHUwMEU5dGVjdGUgbGVzIHN5bWJvbGVzIGRlIG1hcnF1ZSB0ZXh0dWVscyAqL1xyXG4gIFRSQURFTUFSS19URVhUOiAvXFwodG1cXCkvZ2ksXHJcbiAgUkVHSVNURVJFRF9URVhUOiAvXFwoclxcKS9naSxcclxuICBDT1BZUklHSFRfVEVYVDogL1xcKGNcXCkvZ2ksXHJcbn0gYXMgY29uc3Q7XHJcbiIsICIvLyBzcmMvZml4ZXJzL3B1bmN0dWF0aW9uL2VsbGlwc2lzLnRzXHJcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFVOSUNPREVfQ0hBUlMsIFVOSUNPREVfUEFUVEVSTlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvdW5pY29kZSc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsZXMgcG9pbnRzIGRlIHN1c3BlbnNpb25cclxuICogQ29udmVydGl0IC4uLiBlbiBcdTIwMjYgKGNhcmFjdFx1MDBFOHJlIFVuaWNvZGUgdW5pcXVlKVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVsbGlwc2lzIGV4dGVuZHMgQmFzZUZpeGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBpZCA9ICdFbGxpcHNpcyc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdQb2ludHMgZGUgc3VzcGVuc2lvbic7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAnUmVtcGxhY2UgLi4uIHBhciBsZSBjYXJhY3RcdTAwRThyZSBlbGxpcHNlIFVuaWNvZGUgKFx1MjAyNiknO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3B1bmN0dWF0aW9uJyBhcyBjb25zdDtcclxuICAgIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDE7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2Zvcm1lIGxlcyBwb2ludHMgbXVsdGlwbGVzIGVuIGVsbGlwc2UgVW5pY29kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlSZWdleFRyYW5zZm9ybShcclxuICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgVU5JQ09ERV9QQVRURVJOUy5FTExJUFNJU19ET1RTLFxyXG4gICAgICAgICAgICBVTklDT0RFX0NIQVJTLkVMTElQU0lTXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdcdTAwRThyZSBsYSBzYWlzaWUgZW4gdGVtcHMgclx1MDBFOWVsIGRlcyBwb2ludHMgZGUgc3VzcGVuc2lvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaGFuZGxlS2V5RXZlbnQoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJy4nICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcclxuICAgICAgICAgICAgY29uc3QgYmVmb3JlQ3Vyc29yID0gbGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFZcdTAwRTlyaWZpZXIgc2kgb24gYSBkXHUwMEU5alx1MDBFMCBkZXV4IHBvaW50cyBjb25zXHUwMEU5Y3V0aWZzXHJcbiAgICAgICAgICAgIGlmIChiZWZvcmVDdXJzb3IuZW5kc1dpdGgoJy4uJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbXBsYWNlciBsZXMgdHJvaXMgcG9pbnRzIHBhciB1bmUgZWxsaXBzZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCAtIDIpICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVTklDT0RFX0NIQVJTLkVMTElQU0lTICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY2gpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0TGluZShjdXJzb3IubGluZSwgbmV3TGluZSk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTogY3Vyc29yLmxpbmUsIFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBjdXJzb3IuY2ggLSAxIC8vIFBvc2l0aW9uIGFwclx1MDBFOHMgbCdlbGxpcHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEVtcFx1MDBFQWNoZXIgbCdpbnNlcnRpb24gZHUgdHJvaXNpXHUwMEU4bWUgcG9pbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3Vybml0IHVuIGV4ZW1wbGUgZGUgdHJhbnNmb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEV4YW1wbGUoKTogRml4ZXJFeGFtcGxlIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBiZWZvcmU6ICdFbiBmYWl0Li4uIGNcXCdlc3QgY29tcGxpcXVcdTAwRTkuLi4nLFxyXG4gICAgICAgICAgICBhZnRlcjogYEVuIGZhaXQke1VOSUNPREVfQ0hBUlMuRUxMSVBTSVN9IGMnZXN0IGNvbXBsaXF1XHUwMEU5JHtVTklDT0RFX0NIQVJTLkVMTElQU0lTfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwgIi8vIHNyYy9maXhlcnMvcHVuY3R1YXRpb24vZGFzaC50c1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VGaXhlciB9IGZyb20gJy4uL2Jhc2UvYmFzZS1maXhlcic7XHJcbmltcG9ydCB7IEZpeGVyRXhhbXBsZSB9IGZyb20gJy4uLy4uL3R5cGVzL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBVTklDT0RFX0NIQVJTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3VuaWNvZGUnO1xyXG5cclxuLyoqXHJcbiAqIEZpeGVyIHBvdXIgbGVzIHRpcmV0cyB0eXBvZ3JhcGhpcXVlc1xyXG4gKiBDb252ZXJ0aXQgLS0gZW4gXHUyMDE0ICh0aXJldCBjYWRyYXRpbilcclxuICogQ29udmVydGl0IGxlcyB0aXJldHMgZW50cmUgbm9tYnJlcyBlbiBcdTIwMTMgKHRpcmV0IGRlbWktY2FkcmF0aW4pXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGFzaCBleHRlbmRzIEJhc2VGaXhlciB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQgPSAnRGFzaCc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdUaXJldHMgdHlwb2dyYXBoaXF1ZXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ0NvbnZlcnRpdCAtLSBlbiBcdTIwMTQgZXQgYW1cdTAwRTlsaW9yZSBsZXMgdGlyZXRzIGVudHJlIG5vbWJyZXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3B1bmN0dWF0aW9uJyBhcyBjb25zdDtcclxuICAgIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaXF1ZSBsZXMgdHJhbnNmb3JtYXRpb25zIGRlIHRpcmV0c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IFtcclxuICAgICAgICAgICAgLy8gRG91YmxlIHRpcmV0IHZlcnMgdGlyZXQgY2FkcmF0aW5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLy0tL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogVU5JQ09ERV9DSEFSUy5NREFTSFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBUaXJldCBlbnRyZSBub21icmVzIChkYXRlcywgcGxhZ2VzKSB2ZXJzIHRpcmV0IGRlbWktY2FkcmF0aW5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKVxccyotXFxzKihcXGQrKS9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OREFTSH0kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRXNwYWNlcyBhdXRvdXIgZHUgdGlyZXQgY2FkcmF0aW4gcG91ciBsZSBmcmFuXHUwMEU3YWlzXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhdHRlcm46IC9cXHMqXHUyMDE0XFxzKi9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IHRoaXMuaXNMb2NhbGVDb21wYXRpYmxlKFsnZnInXSkgXHJcbiAgICAgICAgICAgICAgICAgICAgPyBgICR7VU5JQ09ERV9DSEFSUy5NREFTSH0gYCBcclxuICAgICAgICAgICAgICAgICAgICA6IGAke1VOSUNPREVfQ0hBUlMuTURBU0h9YFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNdWx0aXBsZVRyYW5zZm9ybXModGV4dCwgdHJhbnNmb3Jtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHXHUwMEU4cmUgbGEgc2Fpc2llIGVuIHRlbXBzIHJcdTAwRTllbCBkZXMgZG91YmxlcyB0aXJldHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhbmRsZUtleUV2ZW50KGV2ZW50OiBLZXlib2FyZEV2ZW50LCBlZGl0b3I6IEVkaXRvcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICctJyAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUN1cnNvciA9IGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWXHUwMEU5cmlmaWVyIHNpIG9uIGEgZFx1MDBFOWpcdTAwRTAgdW4gdGlyZXRcclxuICAgICAgICAgICAgaWYgKGJlZm9yZUN1cnNvci5lbmRzV2l0aCgnLScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHRoaXMuaXNMb2NhbGVDb21wYXRpYmxlKFsnZnInXSkgXHJcbiAgICAgICAgICAgICAgICAgICAgPyBgICR7VU5JQ09ERV9DSEFSUy5NREFTSH0gYCBcclxuICAgICAgICAgICAgICAgICAgICA6IGAke1VOSUNPREVfQ0hBUlMuTURBU0h9YDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCAtIDEpICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudCArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5zdWJzdHJpbmcoY3Vyc29yLmNoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnNldExpbmUoY3Vyc29yLmxpbmUsIG5ld0xpbmUpO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLCBcclxuICAgICAgICAgICAgICAgICAgICBjaDogY3Vyc29yLmNoIC0gMSArIHJlcGxhY2VtZW50Lmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvdXJuaXQgdW4gZXhlbXBsZSBkZSB0cmFuc2Zvcm1hdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZSgpOiBGaXhlckV4YW1wbGUge1xyXG4gICAgICAgIGNvbnN0IGJlZm9yZURhc2ggPSB0aGlzLmlzTG9jYWxlQ29tcGF0aWJsZShbJ2ZyJ10pID8gJyBcdTIwMTQgJyA6ICdcdTIwMTQnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJlZm9yZTogJ1BcdTAwRTlyaW9kZSAyMDIwLTIwMjQgLS0gdW5lIFx1MDBFOXBvcXVlIGltcG9ydGFudGUnLFxyXG4gICAgICAgICAgICBhZnRlcjogYFBcdTAwRTlyaW9kZSAyMDIwJHtVTklDT0RFX0NIQVJTLk5EQVNIfTIwMjQke2JlZm9yZURhc2h9dW5lIFx1MDBFOXBvcXVlIGltcG9ydGFudGVgXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICIvLyBzcmMvZml4ZXJzL3B1bmN0dWF0aW9uL2h5cGhlbi50c1xyXG5pbXBvcnQgeyBCYXNlRml4ZXIgfSBmcm9tICcuLi9iYXNlL2Jhc2UtZml4ZXInO1xyXG5pbXBvcnQgeyBGaXhlckV4YW1wbGUgfSBmcm9tICcuLi8uLi90eXBlcy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgVU5JQ09ERV9DSEFSUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy91bmljb2RlJztcclxuXHJcbi8qKlxyXG4gKiBGaXhlciBwb3VyIGxlcyBjXHUwMEU5c3VyZXMgZXQgdGlyZXRzIHR5cG9ncmFwaGlxdWVzIGF2YW5jXHUwMEU5c1xyXG4gKiBJbXBsXHUwMEU5bWVudGF0aW9uIGJhc2lxdWUgLSBsZXMgdnJhaWVzIHJcdTAwRThnbGVzIGRlIGNcdTAwRTlzdXJlIHNvbnQgdHJcdTAwRThzIGNvbXBsZXhlc1xyXG4gKiBEXHUwMEU5c2FjdGl2XHUwMEU5IHBhciBkXHUwMEU5ZmF1dCBjYXIgblx1MDBFOWNlc3NpdGUgdW4gZGljdGlvbm5haXJlIGRlIGNcdTAwRTlzdXJlIGNvbXBsZXRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBIeXBoZW4gZXh0ZW5kcyBCYXNlRml4ZXIge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGlkID0gJ0h5cGhlbic7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdDXHUwMEU5c3VyZXMgdHlwb2dyYXBoaXF1ZXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ0FtXHUwMEU5bGlvcmUgbGVzIHRpcmV0cyBldCBjXHUwMEU5c3VyZXMgKGZvbmN0aW9ubmFsaXRcdTAwRTkgYmFzaXF1ZSknO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3B1bmN0dWF0aW9uJyBhcyBjb25zdDtcclxuICAgIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDEwO1xyXG5cclxuICAgIHB1YmxpYyBlbmFibGVkID0gZmFsc2U7IC8vIERcdTAwRTlzYWN0aXZcdTAwRTkgcGFyIGRcdTAwRTlmYXV0IC0gclx1MDBFOGdsZXMgY29tcGxleGVzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaXF1ZSBxdWVscXVlcyB0cmFuc2Zvcm1hdGlvbnMgYmFzaXF1ZXMgZGUgdGlyZXRzXHJcbiAgICAgKiBOb3RlOiBMZXMgdnJhaWVzIHJcdTAwRThnbGVzIGRlIGNcdTAwRTlzdXJlIG5cdTAwRTljZXNzaXRlcmFpZW50IHVuIGRpY3Rpb25uYWlyZSBjb21wbGV0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaXgodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBJbXBsXHUwMEU5bWVudGF0aW9uIHRyXHUwMEU4cyBiYXNpcXVlIC0ganVzdGUgcXVlbHF1ZXMgYW1cdTAwRTlsaW9yYXRpb25zIGRlIHRpcmV0c1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybXMgPSBbXHJcbiAgICAgICAgICAgIC8vIENvcnJpZ2VyIGxlcyB0aXJldHMgbWFsIGVzcGFjXHUwMEU5cyBkYW5zIGxlcyBkaWFsb2d1ZXMgZnJhblx1MDBFN2Fpc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvXihcXHMqKS1cXHMqL2dtLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IHRoaXMuaXNMb2NhbGVDb21wYXRpYmxlKFsnZnInXSkgXHJcbiAgICAgICAgICAgICAgICAgICAgPyBgJDEke1VOSUNPREVfQ0hBUlMuTURBU0h9IGAgXHJcbiAgICAgICAgICAgICAgICAgICAgOiBgJDEke1VOSUNPREVfQ0hBUlMuTURBU0h9YFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBUaXJldHMgZGFucyBsZXMgXHUwMEU5bnVtXHUwMEU5cmF0aW9uc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFxcblxccyopLVxccysvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTURBU0h9IGBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5TXVsdGlwbGVUcmFuc2Zvcm1zKHRleHQsIHRyYW5zZm9ybXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIGRlIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlKCk6IEZpeGVyRXhhbXBsZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiAnLSBQcmVtaWVyIHBvaW50XFxuLSBEZXV4aVx1MDBFOG1lIHBvaW50XFxuLSBEaWFsb2d1ZScsXHJcbiAgICAgICAgICAgIGFmdGVyOiBgJHtVTklDT0RFX0NIQVJTLk1EQVNIfSBQcmVtaWVyIHBvaW50XFxuJHtVTklDT0RFX0NIQVJTLk1EQVNIfSBEZXV4aVx1MDBFOG1lIHBvaW50XFxuJHtVTklDT0RFX0NIQVJTLk1EQVNIfSBEaWFsb2d1ZWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwgIi8vIHNyYy9maXhlcnMvc3BhY2luZy9mcmVuY2gtc3BhY2luZy50c1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VGaXhlciB9IGZyb20gJy4uL2Jhc2UvYmFzZS1maXhlcic7XHJcbmltcG9ydCB7IEZpeGVyRXhhbXBsZSB9IGZyb20gJy4uLy4uL3R5cGVzL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBVTklDT0RFX0NIQVJTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3VuaWNvZGUnO1xyXG5cclxuLyoqXHJcbiAqIEZpeGVyIHBvdXIgbCdlc3BhY2VtZW50IFx1MDBFMCBsYSBmcmFuXHUwMEU3YWlzZVxyXG4gKiBBcHBsaXF1ZSBsZXMgclx1MDBFOGdsZXMgZCdlc3BhY2VtZW50IHNlbG9uIGxhIHR5cG9ncmFwaGllIGZyYW5cdTAwRTdhaXNlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRnJlbmNoTm9CcmVha1NwYWNlIGV4dGVuZHMgQmFzZUZpeGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBpZCA9ICdGcmVuY2hOb0JyZWFrU3BhY2UnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnRXNwYWNlcyBmcmFuXHUwMEU3YWlzJztcclxuICAgIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdBam91dGUgZGVzIGVzcGFjZXMgaW5zXHUwMEU5Y2FibGVzIHNlbG9uIGxlcyByXHUwMEU4Z2xlcyBmcmFuXHUwMEU3YWlzZXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3NwYWNpbmcnIGFzIGNvbnN0O1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHByaW9yaXR5ID0gMztcclxuXHJcbiAgICBwdWJsaWMgZW5hYmxlZCA9IHRydWU7IC8vIEFjdGl2XHUwMEU5IHBhciBkXHUwMEU5ZmF1dCBwb3VyIGxlIGZyYW5cdTAwRTdhaXNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpcXVlIGxlcyByXHUwMEU4Z2xlcyBkJ2VzcGFjZW1lbnQgZnJhblx1MDBFN2Fpc2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmaXgodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBOZSBzJ2FwcGxpcXVlIHF1J2F1eCBsb2NhbGVzIGZyYW5cdTAwRTdhaXNlc1xyXG4gICAgICAgIGlmICghdGhpcy5pc0xvY2FsZUNvbXBhdGlibGUoWydmciddKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybXMgPSBbXHJcbiAgICAgICAgICAgIC8vIEVzcGFjZSBmaW5lIGluc1x1MDBFOWNhYmxlIGF2YW50IDsgISA/IFx1MDBCQlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvXFxzKihbOyE/XHUwMEJCXSkvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1RISU5fU1BBQ0V9JDFgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIEVzcGFjZSBpbnNcdTAwRTljYWJsZSBhdmFudCA6XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhdHRlcm46IC9cXHMqKDopL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMWBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRXNwYWNlIGluc1x1MDBFOWNhYmxlIGFwclx1MDBFOHMgXHUwMEFCXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhdHRlcm46IC8oXHUwMEFCKVxccyovZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfVEhJTl9TUEFDRX1gXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENvcnJpZ2VyIGxlcyBlc3BhY2VzIGRhbnMgbGVzIG5vbWJyZXMgKG9wdGlvbm5lbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQpXFxzKyhcXGR7M30pL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1RISU5fU1BBQ0V9JDJgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU11bHRpcGxlVHJhbnNmb3Jtcyh0ZXh0LCB0cmFuc2Zvcm1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdcdTAwRThyZSBsYSBzYWlzaWUgZW4gdGVtcHMgclx1MDBFOWVsIGRlcyBzaWduZXMgZGUgcG9uY3R1YXRpb24gZnJhblx1MDBFN2Fpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaGFuZGxlS2V5RXZlbnQoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIGVkaXRvcjogRWRpdG9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzTG9jYWxlQ29tcGF0aWJsZShbJ2ZyJ10pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHB1bmN0dWF0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgICAgICAgICAnISc6IFVOSUNPREVfQ0hBUlMuTk9fQlJFQUtfVEhJTl9TUEFDRSxcclxuICAgICAgICAgICAgJz8nOiBVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1RISU5fU1BBQ0UsXHJcbiAgICAgICAgICAgICc7JzogVU5JQ09ERV9DSEFSUy5OT19CUkVBS19USElOX1NQQUNFLFxyXG4gICAgICAgICAgICAnOic6IFVOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0VcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAocHVuY3R1YXRpb25NYXBbZXZlbnQua2V5XSAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUN1cnNvciA9IGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFbmxldmVyIGwnZXNwYWNlIGV4aXN0YW50IHMnaWwgeSBlbiBhIHVuXHJcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuQmVmb3JlID0gYmVmb3JlQ3Vyc29yLnJlcGxhY2UoL1xccyskLywgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGFjZUNoYXIgPSBwdW5jdHVhdGlvbk1hcFtldmVudC5rZXldO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IGNsZWFuQmVmb3JlICsgc3BhY2VDaGFyICsgZXZlbnQua2V5ICsgbGluZS5zdWJzdHJpbmcoY3Vyc29yLmNoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkaXRvci5zZXRMaW5lKGN1cnNvci5saW5lLCBuZXdMaW5lKTtcclxuICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IFxyXG4gICAgICAgICAgICAgICAgbGluZTogY3Vyc29yLmxpbmUsIFxyXG4gICAgICAgICAgICAgICAgY2g6IGNsZWFuQmVmb3JlLmxlbmd0aCArIDIgLy8gUG9zaXRpb24gYXByXHUwMEU4cyBsYSBwb25jdHVhdGlvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIGRlIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgKi9cclxucHVibGljIGdldEV4YW1wbGUoKTogRml4ZXJFeGFtcGxlIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmVmb3JlOiAnSWwgYSBkaXQgXCJCb25qb3VyXCIgZXQgY1xcJ2VzdCBwYXJ0aS4nLFxyXG4gICAgICAgIGFmdGVyOiBgSWwgYSBkaXQgJHtVTklDT0RFX0NIQVJTLkxBUVVPfSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19USElOX1NQQUNFfUJvbmpvdXIke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfVEhJTl9TUEFDRX0ke1VOSUNPREVfQ0hBUlMuUkFRVU99IGV0IGMke1VOSUNPREVfQ0hBUlMuUlNRVU99ZXN0IHBhcnRpLmBcclxuICAgIH07XHJcbn1cclxufSIsICIvLyBzcmMvZml4ZXJzL3NwYWNpbmcvY29tbWEudHNcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsJ2VzcGFjZW1lbnQgZGVzIHZpcmd1bGVzXHJcbiAqIFN1cHByaW1lIGxlcyBlc3BhY2VzIGF2YW50IGxlcyB2aXJndWxlcyBldCBub3JtYWxpc2UgbCdlc3BhY2VtZW50IGFwclx1MDBFOHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOb1NwYWNlQmVmb3JlQ29tbWEgZXh0ZW5kcyBCYXNlRml4ZXIge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGlkID0gJ05vU3BhY2VCZWZvcmVDb21tYSc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICdWaXJndWxlcyBzYW5zIGVzcGFjZSc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAnU3VwcHJpbWUgbGVzIGVzcGFjZXMgYXZhbnQgbGVzIHZpcmd1bGVzIGV0IG5vcm1hbGlzZSBsXFwnZXNwYWNlbWVudCc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2F0ZWdvcnkgPSAnc3BhY2luZycgYXMgY29uc3Q7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJpb3JpdHkgPSA2O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ycmlnZSBsJ2VzcGFjZW1lbnQgYXV0b3VyIGRlcyB2aXJndWxlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IFtcclxuICAgICAgICAgICAgLy8gU3VwcHJpbWVyIGxlcyBlc3BhY2VzIGF2YW50IGxlcyB2aXJndWxlc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvXFxzKywvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAnLCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXNlciBsJ2VzcGFjZW1lbnQgYXByXHUwMEU4cyBsZXMgdmlyZ3VsZXMgKGV4YWN0ZW1lbnQgdW4gZXNwYWNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvLFxccyovZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAnLCAnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhcyBwYXJ0aWN1bGllciA6IHZpcmd1bGUgZW4gZmluIGRlIGxpZ25lIChwYXMgZCdlc3BhY2UgYXByXHUwMEU4cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyxcXHMqJC9nbSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAnLCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FzIHBhcnRpY3VsaWVyIDogdmlyZ3VsZSBhdmFudCBmZXJtZXR1cmUgZGUgcGFyZW50aFx1MDBFOHNlL2Nyb2NoZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyxcXHMqKFspXFxdfV0pL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogJywkMSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5TXVsdGlwbGVUcmFuc2Zvcm1zKHRleHQsIHRyYW5zZm9ybXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIGRlIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlKCk6IEZpeGVyRXhhbXBsZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiAnUG9tbWVzICwgcG9pcmVzLG9yYW5nZXMgLGJhbmFuZXMnLFxyXG4gICAgICAgICAgICBhZnRlcjogJ1BvbW1lcywgcG9pcmVzLCBvcmFuZ2VzLCBiYW5hbmVzJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gc3JjL2ZpeGVycy9zcGFjaW5nL3VuaXQudHNcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFVOSUNPREVfQ0hBUlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvdW5pY29kZSc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsZXMgZXNwYWNlcyBhdmFudCBsZXMgdW5pdFx1MDBFOXNcclxuICogQWpvdXRlIGRlcyBlc3BhY2VzIGluc1x1MDBFOWNhYmxlcyBlbnRyZSBsZXMgbm9tYnJlcyBldCBsZXVycyB1bml0XHUwMEU5c1xyXG4gKiBJbnNwaXJcdTAwRTkgZHUgZml4ZXIgXCJVbml0XCIgZGUgSm9saVR5cG9cclxuICovXHJcbmV4cG9ydCBjbGFzcyBVbml0IGV4dGVuZHMgQmFzZUZpeGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBpZCA9ICd1bml0JztcclxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ0VzcGFjZXMgYXZhbnQgdW5pdFx1MDBFOXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ0Fqb3V0ZSBkZXMgZXNwYWNlcyBpbnNcdTAwRTljYWJsZXMgZW50cmUgbm9tYnJlcyBldCB1bml0XHUwMEU5cyAoMTIgaCwgNTAgXHUyMEFDLCAyNSAlKSc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2F0ZWdvcnkgPSAnc3BhY2luZycgYXMgY29uc3Q7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJpb3JpdHkgPSA3O1xyXG5cclxuICAgIHB1YmxpYyBlbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpcXVlIGxlcyBlc3BhY2VzIGluc1x1MDBFOWNhYmxlcyBhdmFudCBsZXMgdW5pdFx1MDBFOXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpeCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybXMgPSBbXHJcbiAgICAgICAgICAgIC8vID09PSBVTklUXHUwMEM5UyBERSBURU1QUyA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKVxccyooW2htc10pXFxiKD8hW2EtekEtWl0pL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfSQyYFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBVbml0XHUwMEU5cyBjb21wbFx1MDBFOHRlcyBkZSB0ZW1wc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFxcZCspXFxzKihoZXVyZXM/fG1pbnV0ZXM/fHNlY29uZGVzPylcXGIvZ2ksXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfSQyYFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gPT09IFVOSVRcdTAwQzlTIE1PTlx1MDBDOVRBSVJFUyA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKVxccyooW1x1MjBBQyRcdTAwQTNcdTAwQTVcdTIwQjlcdTIwQkRdKS9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gVW5pdFx1MDBFOXMgbW9uXHUwMEU5dGFpcmVzIFx1MDBFOWNyaXRlc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFxcZCspXFxzKihldXJvcz98ZG9sbGFycz98bGl2cmVzPylcXGIvZ2ksXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfSQyYFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gPT09IFBPVVJDRU5UQUdFUyA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKiUvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9JWBcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vID09PSBVTklUXHUwMEM5UyBTSSBFVCBNXHUwMEM5VFJJUVVFUyA9PT1cclxuICAgICAgICAgICAgLy8gTWFzc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihtZ3xbY2RrXT9nfHRvbm5lcz8pXFxiL2dpLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRGlzdGFuY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihtbXxjbXxkbXxbZGtdP218a20pXFxiL2dpLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gVm9sdW1lXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhdHRlcm46IC8oXFxkKyg/OlssLl0/XFxkKyk/KVxccyoobWx8W2Nka10/bHxsaXRyZXM/KVxcYi9naSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9JDJgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFx1MDBDOW5lcmdpZSBldCBwdWlzc2FuY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihXfFtrbU1HXVd8a1doP3xba21NR11XaD8pXFxiL2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfSQyYFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBGclx1MDBFOXF1ZW5jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFxcZCsoPzpbLC5dP1xcZCspPylcXHMqKEh6fFtrbU1HXUh6KVxcYi9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMmBcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vID09PSBURU1QXHUwMEM5UkFUVVJFUyA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKlx1MDBCMChbQ0ZdPylcXGIvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9XHUwMEIwJDJgXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyA9PT0gVU5JVFx1MDBDOVMgSU5GT1JNQVRJUVVFUyA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihba21NR1RdP1tCYl18W2ttTUdUXT9vKVxcYi9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX0kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gVW5pdFx1MDBFOXMgY29tcGxcdTAwRTh0ZXNcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihvY3RldHM/fGJ5dGVzP3xiaXRzPylcXGIvZ2ksXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfSQyYFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gPT09IFVOSVRcdTAwQzlTIEQnQU5HTEVTID09PVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiAvKFxcZCsoPzpbLC5dP1xcZCspPylcXHMqKGRlZ3JcdTAwRTlzP3xyYWR8cmFkaWFudHM/KVxcYi9naSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9JDJgXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyA9PT0gVU5JVFx1MDBDOVMgREUgVklURVNTRSA9PT1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihrbVxcL2h8bXBofG1cXC9zKVxcYi9naSxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9JDJgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseU11bHRpcGxlVHJhbnNmb3Jtcyh0ZXh0LCB0cmFuc2Zvcm1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFZcdTAwRTlyaWZpZSBzaSBsZSBjb250ZXh0ZSBlc3QgdmFsaWRlIHBvdXIgbCdham91dCBkJ2VzcGFjZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaXNWYWxpZENvbnRleHQodGV4dDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFzdXBlci5pc1ZhbGlkQ29udGV4dCh0ZXh0LCBwb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUwMEM5dml0ZXIgbGVzIGNhcyBjb21tZSBcImgxXCIsIFwiaDJcIiAodGl0cmVzIG1hcmtkb3duKVxyXG4gICAgICAgIGNvbnN0IGJlZm9yZUNvbnRleHQgPSB0ZXh0LnN1YnN0cmluZyhNYXRoLm1heCgwLCBwb3NpdGlvbiAtIDUpLCBwb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgYWZ0ZXJDb250ZXh0ID0gdGV4dC5zdWJzdHJpbmcocG9zaXRpb24sIE1hdGgubWluKHRleHQubGVuZ3RoLCBwb3NpdGlvbiArIDUpKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBOZSBwYXMgdHJhaXRlciBzaSBjJ2VzdCB1biB0aXRyZSBtYXJrZG93blxyXG4gICAgICAgIGlmIChiZWZvcmVDb250ZXh0Lm1hdGNoKC9eXFxzKiMqXFxzKlxcZCskLykgJiYgYWZ0ZXJDb250ZXh0Lm1hdGNoKC9eW2hIXVxcZC8pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIGRlIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlKCk6IEZpeGVyRXhhbXBsZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiAnVGVtcFx1MDBFOXJhdHVyZTogMjUgXHUwMEIwQywgdml0ZXNzZTogMTIwIGttL2gsIHRhaWxsZTogMS44IG0sIHBvaWRzOiA3NSBrZywgcHJpeDogMjk5IFx1MjBBQycsXHJcbiAgICAgICAgICAgIGFmdGVyOiBgVGVtcFx1MDBFOXJhdHVyZTogMjUke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfU1BBQ0V9XHUwMEIwQywgdml0ZXNzZTogMTIwJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfWttL2gsIHRhaWxsZTogMS44JHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfW0sIHBvaWRzOiA3NSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19TUEFDRX1rZywgcHJpeDogMjk5JHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1NQQUNFfVx1MjBBQ2BcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59IiwgIi8vIHNyYy9maXhlcnMvc3BhY2luZy9kaW1lbnNpb24udHNcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFVOSUNPREVfQ0hBUlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvdW5pY29kZSc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsZXMgZGltZW5zaW9ucyBldCBtdWx0aXBsaWNhdGlvbnNcclxuICogQ29udmVydGl0IGxlcyBzaWduZXMgZGUgbXVsdGlwbGljYXRpb24gdGV4dHVlbHMgZW4gc3ltYm9sZSBcdTAwRDcgVW5pY29kZVxyXG4gKiBJbnNwaXJcdTAwRTkgZHUgZml4ZXIgXCJEaW1lbnNpb25cIiBkZSBKb2xpVHlwb1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERpbWVuc2lvbiBleHRlbmRzIEJhc2VGaXhlciB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQgPSAnRGltZW5zaW9uJztcclxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ1N5bWJvbGVzIGRlIG11bHRpcGxpY2F0aW9uJztcclxuICAgIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdDb252ZXJ0aXQgeCBldCAqIGVudHJlIG5vbWJyZXMgZW4gc3ltYm9sZSBcdTAwRDcgKDEyIHggMzQgXHUyMTkyIDEyXHUwMEQ3MzQpJztcclxuICAgIHB1YmxpYyByZWFkb25seSBjYXRlZ29yeSA9ICdzcGFjaW5nJyBhcyBjb25zdDtcclxuICAgIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDg7XHJcblxyXG4gICAgcHVibGljIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgbGVzIHRyYW5zZm9ybWF0aW9ucyBkZSBtdWx0aXBsaWNhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IFtcclxuICAgICAgICAgICAgLy8gTXVsdGlwbGljYXRpb24gYXZlYyAneCcgb3UgJ1gnIGVudHJlIG5vbWJyZXNcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKlt4WF1cXHMqKFxcZCsoPzpbLC5dP1xcZCspPykvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBgJDEke1VOSUNPREVfQ0hBUlMuVElNRVN9JDJgXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIE11bHRpcGxpY2F0aW9uIGF2ZWMgJyonIGVudHJlIG5vbWJyZXNcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKlxcKlxccyooXFxkKyg/OlssLl0/XFxkKyk/KS9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5USU1FU30kMmBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRGltZW5zaW9ucyAobG9uZ3VldXIgeCBsYXJnZXVyIHggaGF1dGV1cilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKlt4WF1cXHMqKFxcZCsoPzpbLC5dP1xcZCspPylcXHMqW3hYXVxccyooXFxkKyg/OlssLl0/XFxkKyk/KS9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGAkMSR7VU5JQ09ERV9DSEFSUy5USU1FU30kMiR7VU5JQ09ERV9DSEFSUy5USU1FU30kM2BcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRm9ybWF0IFwiZGltZW5zaW9uc1wiIGF2ZWMgdW5pdFx1MDBFOXMgKGV4OiAxMmNtIHggMzRjbSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogLyhcXGQrKD86WywuXT9cXGQrKT8pXFxzKihbYS16QS1aXSspXFxzKlt4WF1cXHMqKFxcZCsoPzpbLC5dP1xcZCspPylcXHMqKFthLXpBLVpdKyk/L2csXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYCQxJDIke1VOSUNPREVfQ0hBUlMuVElNRVN9JDMkNGBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5TXVsdGlwbGVUcmFuc2Zvcm1zKHRleHQsIHRyYW5zZm9ybXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVlx1MDBFOXJpZmllIHNpIGxlIGNvbnRleHRlIGVzdCB2YWxpZGUgKFx1MDBFOXZpdGVyIGRlIG1vZGlmaWVyIGxlIGNvZGUsIHZhcmlhYmxlcywgZXRjLilcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGlzVmFsaWRDb250ZXh0KHRleHQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuaXNWYWxpZENvbnRleHQodGV4dCwgcG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MDBDOXZpdGVyIGxlcyBjYXMgY29tbWUgXCJNYXRyaXhcIiwgXCJMaW51eFwiLCBldGMuXHJcbiAgICAgICAgY29uc3QgYmVmb3JlQ29udGV4dCA9IHRleHQuc3Vic3RyaW5nKE1hdGgubWF4KDAsIHBvc2l0aW9uIC0gMTApLCBwb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgYWZ0ZXJDb250ZXh0ID0gdGV4dC5zdWJzdHJpbmcocG9zaXRpb24sIE1hdGgubWluKHRleHQubGVuZ3RoLCBwb3NpdGlvbiArIDEwKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTmUgcGFzIHRyYWl0ZXIgc2kgYydlc3QgZGFucyB1biBtb3RcclxuICAgICAgICBpZiAoYmVmb3JlQ29udGV4dC5tYXRjaCgvW2EtekEtWl0kLykgJiYgYWZ0ZXJDb250ZXh0Lm1hdGNoKC9eW2EtekEtWl0vKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvdXJuaXQgdW4gZXhlbXBsZSBkZSB0cmFuc2Zvcm1hdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZSgpOiBGaXhlckV4YW1wbGUge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJlZm9yZTogJ1JcdTAwRTlzb2x1dGlvbjogMTkyMCB4IDEwODAsIGZvcm1hdCAxNiAqIDksIGRpbWVuc2lvbnMgMTJjbSB4IDM0Y20geCA1NmNtJyxcclxuICAgICAgICAgICAgYWZ0ZXI6IGBSXHUwMEU5c29sdXRpb246IDE5MjAke1VOSUNPREVfQ0hBUlMuVElNRVN9MTA4MCwgZm9ybWF0IDE2JHtVTklDT0RFX0NIQVJTLlRJTUVTfTksIGRpbWVuc2lvbnMgMTJjbSR7VU5JQ09ERV9DSEFSUy5USU1FU30zNGNtJHtVTklDT0RFX0NIQVJTLlRJTUVTfTU2Y21gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICIvLyBzcmMvZml4ZXJzL3F1b3Rlcy9zbWFydC1xdW90ZXMudHNcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFVOSUNPREVfQ0hBUlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvdW5pY29kZSc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsZXMgZ3VpbGxlbWV0cyBpbnRlbGxpZ2VudHNcclxuICogQ29udmVydGl0IGxlcyBndWlsbGVtZXRzIGRyb2l0cyBlbiBndWlsbGVtZXRzIHR5cG9ncmFwaGlxdWVzXHJcbiAqIEFkYXB0ZSBsZSBzdHlsZSBzZWxvbiBsYSBsYW5ndWUgKGZyYW5cdTAwRTdhaXMgPSBcdTAwQUIgXHUwMEJCLCBhbmdsYWlzID0gXCIgXCIpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU21hcnRRdW90ZXMgZXh0ZW5kcyBCYXNlRml4ZXIge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGlkID0gJ1NtYXJ0UXVvdGVzJztcclxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ0d1aWxsZW1ldHMgaW50ZWxsaWdlbnRzJztcclxuICAgIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdDb252ZXJ0aXQgbGVzIGd1aWxsZW1ldHMgZHJvaXRzIGVuIGd1aWxsZW1ldHMgdHlwb2dyYXBoaXF1ZXMnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3F1b3RlcycgYXMgY29uc3Q7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJpb3JpdHkgPSA0O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgbGVzIGd1aWxsZW1ldHMgaW50ZWxsaWdlbnRzIHNlbG9uIGxhIGxhbmd1ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNMb2NhbGVDb21wYXRpYmxlKFsnZnInXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZml4RnJlbmNoUXVvdGVzKHRleHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpeEVuZ2xpc2hRdW90ZXModGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgbGVzIGd1aWxsZW1ldHMgZnJhblx1MDBFN2FpcyBcdTAwQUIgXHUwMEJCXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZml4RnJlbmNoUXVvdGVzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRleHQ7XHJcbiAgICAgICAgbGV0IGluUXVvdGUgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcmFuc2Zvcm1lciBsZXMgZ3VpbGxlbWV0cyBkcm9pdHMgZW4gZ3VpbGxlbWV0cyBmcmFuXHUwMEU3YWlzXHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1wiL2csICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpblF1b3RlKSB7XHJcbiAgICAgICAgICAgICAgICBpblF1b3RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtVTklDT0RFX0NIQVJTLkxBUVVPfSR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19USElOX1NQQUNFfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpblF1b3RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7VU5JQ09ERV9DSEFSUy5OT19CUkVBS19USElOX1NQQUNFfSR7VU5JQ09ERV9DSEFSUy5SQVFVT31gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVHJhbnNmb3JtZXIgbGVzIGFwb3N0cm9waGVzIGRyb2l0ZXMgZW4gYXBvc3Ryb3BoZXMgdHlwb2dyYXBoaXF1ZXNcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvJy9nLCBVTklDT0RFX0NIQVJTLlJTUVVPKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgbGVzIGd1aWxsZW1ldHMgYW5nbGFpcyBcIiBcIlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpeEVuZ2xpc2hRdW90ZXModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gdGV4dDtcclxuICAgICAgICBsZXQgaW5RdW90ZSA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYW5zZm9ybWVyIGxlcyBndWlsbGVtZXRzIGRyb2l0cyBlbiBndWlsbGVtZXRzIGFuZ2xhaXNcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXCIvZywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWluUXVvdGUpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVOSUNPREVfQ0hBUlMuTERRVU87XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpblF1b3RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVU5JQ09ERV9DSEFSUy5SRFFVTztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYW5zZm9ybWVyIGxlcyBhcG9zdHJvcGhlcyBkYW5zIGxlcyBjb250cmFjdGlvbnNcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvKFxcdyknL2csIGAkMSR7VU5JQ09ERV9DSEFSUy5SU1FVT31gKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIHNlbG9uIGxhIGxhbmd1ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZSgpOiBGaXhlckV4YW1wbGUge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTG9jYWxlQ29tcGF0aWJsZShbJ2ZyJ10pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBiZWZvcmU6ICdJbCBhIGRpdCBcIkJvbmpvdXJcIiBldCBjXFwnZXN0IHBhcnRpLicsXHJcbiAgICAgICAgICAgICAgICBhZnRlcjogYElsIGEgZGl0ICR7VU5JQ09ERV9DSEFSUy5MQVFVT30ke1VOSUNPREVfQ0hBUlMuTk9fQlJFQUtfVEhJTl9TUEFDRX1Cb25qb3VyJHtVTklDT0RFX0NIQVJTLk5PX0JSRUFLX1RISU5fU1BBQ0V9JHtVTklDT0RFX0NIQVJTLlJBUVVPfSBldCBjJHtVTklDT0RFX0NIQVJTLlJTUVVPfWVzdCBwYXJ0aS5gXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGJlZm9yZTogJ0hlIHNhaWQgXCJIZWxsb1wiIGFuZCBpdFxcJ3MgZG9uZS4nLFxyXG4gICAgICAgICAgICAgICAgYWZ0ZXI6IGBIZSBzYWlkICR7VU5JQ09ERV9DSEFSUy5MRFFVT31IZWxsbyR7VU5JQ09ERV9DSEFSUy5SRFFVT30gYW5kIGl0JHtVTklDT0RFX0NIQVJTLlJTUVVPfXMgZG9uZS5gXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwgIi8vIHNyYy9maXhlcnMvcXVvdGVzL2N1cmx5LXF1b3RlLnRzXHJcbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi4vYmFzZS9iYXNlLWZpeGVyJztcclxuaW1wb3J0IHsgRml4ZXJFeGFtcGxlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IFVOSUNPREVfQ0hBUlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvdW5pY29kZSc7XHJcblxyXG4vKipcclxuICogRml4ZXIgcG91ciBsZXMgYXBvc3Ryb3BoZXMgY291cmJlcyAoQ3VybHlRdW90ZSlcclxuICogQ29udmVydGl0IGxlcyBhcG9zdHJvcGhlcyBkcm9pdGVzICcgZW4gYXBvc3Ryb3BoZXMgdHlwb2dyYXBoaXF1ZXMgJ1xyXG4gKiBCYXNcdTAwRTkgc3VyIGxlIGZpeGVyIEN1cmx5UXVvdGUgZGUgSm9saVR5cG9cclxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vam9saWNvZGUvSm9saVR5cG8vYmxvYi9tYWluL3NyYy9Kb2xpVHlwby9GaXhlci9DdXJseVF1b3RlLnBocFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEN1cmx5UXVvdGUgZXh0ZW5kcyBCYXNlRml4ZXIge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGlkID0gJ0N1cmx5UXVvdGUnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnQXBvc3Ryb3BoZXMgY291cmJlcyc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAnQ29udmVydGl0IGxlcyBhcG9zdHJvcGhlcyBkcm9pdGVzIFxcJyBlbiBhcG9zdHJvcGhlcyB0eXBvZ3JhcGhpcXVlcyBcXCcnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5ID0gJ3F1b3RlcycgYXMgY29uc3Q7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJpb3JpdHkgPSA1O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhbnNmb3JtZSBsZXMgYXBvc3Ryb3BoZXMgZHJvaXRlcyBlbiBhcG9zdHJvcGhlcyBjb3VyYmVzXHJcbiAgICAgKiBMb2dpcXVlIEpvbGlUeXBvIDogY2hlcmNoZSBbbGV0dHJlXScgZXQgcmVtcGxhY2UgcGFyIFtsZXR0cmVdJ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gUGF0dGVybiBleGFjdCBkZSBKb2xpVHlwbyA6IChbYS16XSknIGF2ZWMgZmxhZ3MgaW5zZW5zaWJsZSBcdTAwRTAgbGEgY2Fzc2UgZXQgbXVsdGlsaW5lXHJcbiAgICAgICAgLy8gUmVtcGxhY2UgdW5lIGFwb3N0cm9waGUgZHJvaXRlIHByXHUwMEU5Y1x1MDBFOWRcdTAwRTllIGQndW5lIGxldHRyZSBwYXIgdW5lIGFwb3N0cm9waGUgY291cmJlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlSZWdleFRyYW5zZm9ybShcclxuICAgICAgICAgICAgdGV4dCxcclxuICAgICAgICAgICAgLyhbYS16XSknL2dpbSxcclxuICAgICAgICAgICAgYCQxJHtVTklDT0RFX0NIQVJTLlJTUVVPfWBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR1x1MDBFOHJlIGxhIHNhaXNpZSBlbiB0ZW1wcyByXHUwMEU5ZWwgZGVzIGFwb3N0cm9waGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoYW5kbGVLZXlFdmVudChldmVudDogS2V5Ym9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIidcIiAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQubWV0YUtleSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUN1cnNvciA9IGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBWXHUwMEU5cmlmaWVyIHNpIGxlIGNhcmFjdFx1MDBFOHJlIHByXHUwMEU5Y1x1MDBFOWRlbnQgZXN0IHVuZSBsZXR0cmVcclxuICAgICAgICAgICAgY29uc3QgbGFzdENoYXIgPSBiZWZvcmVDdXJzb3Iuc2xpY2UoLTEpO1xyXG4gICAgICAgICAgICBpZiAobGFzdENoYXIgJiYgL1thLXpBLVpdLy50ZXN0KGxhc3RDaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtcGxhY2VyIGwnYXBvc3Ryb3BoZSBkcm9pdGUgcGFyIHVuZSBhcG9zdHJvcGhlIGNvdXJiZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IGJlZm9yZUN1cnNvciArIFVOSUNPREVfQ0hBUlMuUlNRVU8gKyBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY2gpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0TGluZShjdXJzb3IubGluZSwgbmV3TGluZSk7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZTogY3Vyc29yLmxpbmUsIFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiBjdXJzb3IuY2ggKyAxXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEVtcFx1MDBFQWNoZXIgbCdpbnNlcnRpb24gZGUgbCdhcG9zdHJvcGhlIGRyb2l0ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvdXJuaXQgdW4gZXhlbXBsZSBkZSB0cmFuc2Zvcm1hdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXhhbXBsZSgpOiBGaXhlckV4YW1wbGUge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJlZm9yZTogXCJJJ20gaGFwcHksIHlvdSdyZSBncmVhdCwgaXQncyB3b3JraW5nIVwiLFxyXG4gICAgICAgICAgICBhZnRlcjogYEkke1VOSUNPREVfQ0hBUlMuUlNRVU99bSBoYXBweSwgeW91JHtVTklDT0RFX0NIQVJTLlJTUVVPfXJlIGdyZWF0LCBpdCR7VU5JQ09ERV9DSEFSUy5SU1FVT31zIHdvcmtpbmchYFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0iLCAiLy8gc3JjL2ZpeGVycy9zeW1ib2xzL3RyYWRlbWFyay50c1xyXG5pbXBvcnQgeyBCYXNlRml4ZXIgfSBmcm9tICcuLi9iYXNlL2Jhc2UtZml4ZXInO1xyXG5pbXBvcnQgeyBGaXhlckV4YW1wbGUgfSBmcm9tICcuLi8uLi90eXBlcy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgVU5JQ09ERV9DSEFSUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy91bmljb2RlJztcclxuXHJcbi8qKlxyXG4gKiBGaXhlciBwb3VyIGxlcyBzeW1ib2xlcyBkZSBtYXJxdWVzIGNvbW1lcmNpYWxlc1xyXG4gKiBDb252ZXJ0aXQgKGMpLCAociksICh0bSkgZW4gc3ltYm9sZXMgVW5pY29kZSBcdTAwQTksIFx1MDBBRSwgXHUyMTIyXHJcbiAqIEluc3Bpclx1MDBFOSBkdSBmaXhlciBcIlRyYWRlbWFya1wiIGRlIEpvbGlUeXBvXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVHJhZGVtYXJrIGV4dGVuZHMgQmFzZUZpeGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBpZCA9ICdUcmFkZW1hcmsnO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAnU3ltYm9sZXMgZGUgbWFycXVlcyc7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAnQ29udmVydGl0IChjKSBcdTIxOTIgXHUwMEE5LCAocikgXHUyMTkyIFx1MDBBRSwgKHRtKSBcdTIxOTIgXHUyMTIyJztcclxuICAgIHB1YmxpYyByZWFkb25seSBjYXRlZ29yeSA9ICdzeW1ib2xzJyBhcyBjb25zdDtcclxuICAgIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDk7XHJcblxyXG4gICAgcHVibGljIGVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGlxdWUgbGVzIHRyYW5zZm9ybWF0aW9ucyBkZXMgc3ltYm9sZXMgZGUgbWFycXVlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZml4KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IFtcclxuICAgICAgICAgICAgLy8gQ29weXJpZ2h0OiAoYykgb3UgKEMpIFx1MjE5MiBcdTAwQTlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogL1xcKChbY0NdKVxcKS9nLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IFVOSUNPREVfQ0hBUlMuQ09QWVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBSZWdpc3RlcmVkIHRyYWRlbWFyazogKHIpIG91IChSKSBcdTIxOTIgXHUwMEFFXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBhdHRlcm46IC9cXCgoW3JSXSlcXCkvZyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBVTklDT0RFX0NIQVJTLlJFR1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBUcmFkZW1hcms6ICh0bSkgb3UgKFRNKSBvdSAoVG0pIFx1MjE5MiBcdTIxMjJcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybjogL1xcKChbdFRdW21NXSlcXCkvZ2ksXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogVU5JQ09ERV9DSEFSUy5UUkFERVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlNdWx0aXBsZVRyYW5zZm9ybXModGV4dCwgdHJhbnNmb3Jtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWXHUwMEU5cmlmaWUgc2kgbGUgY29udGV4dGUgZXN0IGFwcHJvcHJpXHUwMEU5IHBvdXIgbGEgdHJhbnNmb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGlzVmFsaWRDb250ZXh0KHRleHQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghc3VwZXIuaXNWYWxpZENvbnRleHQodGV4dCwgcG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1MDBDOXZpdGVyIGxlcyB0cmFuc2Zvcm1hdGlvbnMgZGFucyBkZXMgY29udGV4dGVzIGluYXBwcm9wcmlcdTAwRTlzXHJcbiAgICAgICAgY29uc3QgYmVmb3JlQ29udGV4dCA9IHRleHQuc3Vic3RyaW5nKE1hdGgubWF4KDAsIHBvc2l0aW9uIC0gMjApLCBwb3NpdGlvbik7XHJcbiAgICAgICAgY29uc3QgYWZ0ZXJDb250ZXh0ID0gdGV4dC5zdWJzdHJpbmcocG9zaXRpb24sIE1hdGgubWluKHRleHQubGVuZ3RoLCBwb3NpdGlvbiArIDIwKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTmUgcGFzIHRyYW5zZm9ybWVyIGRhbnMgZHUgY29kZSBvdSBkZXMgVVJMXHJcbiAgICAgICAgaWYgKGJlZm9yZUNvbnRleHQuaW5jbHVkZXMoJ2h0dHAnKSB8fCBiZWZvcmVDb250ZXh0LmluY2x1ZGVzKCd3d3cuJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTmUgcGFzIHRyYW5zZm9ybWVyIGRhbnMgZGVzIGV4cHJlc3Npb25zIHJcdTAwRTlndWxpXHUwMEU4cmVzIG91IGR1IGNvZGVcclxuICAgICAgICBpZiAoYmVmb3JlQ29udGV4dC5pbmNsdWRlcygnLycpICYmIGFmdGVyQ29udGV4dC5pbmNsdWRlcygnLycpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm91cm5pdCB1biBleGVtcGxlIGRlIHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFeGFtcGxlKCk6IEZpeGVyRXhhbXBsZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmVmb3JlOiAnTWljcm9zb2Z0IChjKSAyMDI1LCBpUGhvbmUgKHIpLCBHb29nbGUgU2VhcmNoICh0bSknLFxyXG4gICAgICAgICAgICBhZnRlcjogYE1pY3Jvc29mdCAke1VOSUNPREVfQ0hBUlMuQ09QWX0gMjAyNSwgaVBob25lICR7VU5JQ09ERV9DSEFSUy5SRUd9LCBHb29nbGUgU2VhcmNoICR7VU5JQ09ERV9DSEFSUy5UUkFERX1gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSIsICIvLyBzcmMvZml4ZXJzL2luZGV4LnRzXHJcblxyXG4vLyBFeHBvcnQgZGUgbGEgY2xhc3NlIGRlIGJhc2VcclxuZXhwb3J0IHsgQmFzZUZpeGVyIH0gZnJvbSAnLi9iYXNlL2Jhc2UtZml4ZXInO1xyXG5cclxuLy8gRXhwb3J0IGRlcyBmaXhlcnMgZGUgcG9uY3R1YXRpb25cclxuZXhwb3J0IHsgRWxsaXBzaXMgfSBmcm9tICcuL3B1bmN0dWF0aW9uL2VsbGlwc2lzJztcclxuZXhwb3J0IHsgRGFzaCB9IGZyb20gJy4vcHVuY3R1YXRpb24vZGFzaCc7XHJcbmV4cG9ydCB7IEh5cGhlbiB9IGZyb20gJy4vcHVuY3R1YXRpb24vaHlwaGVuJztcclxuXHJcbi8vIEV4cG9ydCBkZXMgZml4ZXJzIGQnZXNwYWNlbWVudFxyXG5leHBvcnQgeyBGcmVuY2hOb0JyZWFrU3BhY2UgfSBmcm9tICcuL3NwYWNpbmcvZnJlbmNoLXNwYWNpbmcnO1xyXG5leHBvcnQgeyBOb1NwYWNlQmVmb3JlQ29tbWEgfSBmcm9tICcuL3NwYWNpbmcvY29tbWEnO1xyXG5leHBvcnQgeyBVbml0IH0gZnJvbSAnLi9zcGFjaW5nL3VuaXQnO1xyXG5leHBvcnQgeyBEaW1lbnNpb24gfSBmcm9tICcuL3NwYWNpbmcvZGltZW5zaW9uJztcclxuXHJcbi8vIEV4cG9ydCBkZXMgZml4ZXJzIGRlIGd1aWxsZW1ldHNcclxuZXhwb3J0IHsgU21hcnRRdW90ZXMgfSBmcm9tICcuL3F1b3Rlcy9zbWFydC1xdW90ZXMnO1xyXG5leHBvcnQgeyBDdXJseVF1b3RlIH0gZnJvbSAnLi9xdW90ZXMvY3VybHktcXVvdGUnO1xyXG5cclxuLy8gRXhwb3J0IGRlcyBmaXhlcnMgZGUgc3ltYm9sZXNcclxuZXhwb3J0IHsgVHJhZGVtYXJrIH0gZnJvbSAnLi9zeW1ib2xzL3RyYWRlbWFyayc7XHJcblxyXG4vLyBJbXBvcnQgcG91ciBsJ3VzYWdlIGludGVybmVcclxuaW1wb3J0IHsgRWxsaXBzaXMgfSBmcm9tICcuL3B1bmN0dWF0aW9uL2VsbGlwc2lzJztcclxuaW1wb3J0IHsgRGFzaCB9IGZyb20gJy4vcHVuY3R1YXRpb24vZGFzaCc7XHJcbmltcG9ydCB7IEZyZW5jaE5vQnJlYWtTcGFjZSB9IGZyb20gJy4vc3BhY2luZy9mcmVuY2gtc3BhY2luZyc7XHJcbmltcG9ydCB7IFNtYXJ0UXVvdGVzIH0gZnJvbSAnLi9xdW90ZXMvc21hcnQtcXVvdGVzJztcclxuaW1wb3J0IHsgQ3VybHlRdW90ZSB9IGZyb20gJy4vcXVvdGVzL2N1cmx5LXF1b3RlJztcclxuaW1wb3J0IHsgTm9TcGFjZUJlZm9yZUNvbW1hIH0gZnJvbSAnLi9zcGFjaW5nL2NvbW1hJztcclxuaW1wb3J0IHsgVW5pdCB9IGZyb20gJy4vc3BhY2luZy91bml0JztcclxuaW1wb3J0IHsgRGltZW5zaW9uIH0gZnJvbSAnLi9zcGFjaW5nL2RpbWVuc2lvbic7XHJcbmltcG9ydCB7IFRyYWRlbWFyayB9IGZyb20gJy4vc3ltYm9scy90cmFkZW1hcmsnO1xyXG5pbXBvcnQgeyBIeXBoZW4gfSBmcm9tICcuL3B1bmN0dWF0aW9uL2h5cGhlbic7XHJcblxyXG5pbXBvcnQgeyBUeXBvZ3JhcGhpY0ZpeGVyIH0gZnJvbSAnLi4vdHlwZXMvaW50ZXJmYWNlcyc7XHJcblxyXG4vKipcclxuICogRmFjdG9yeSBwb3VyIGNyXHUwMEU5ZXIgdG91cyBsZXMgZml4ZXJzIGRpc3BvbmlibGVzXHJcbiAqIEByZXR1cm5zIExpc3RlIGRlIHRvdXMgbGVzIGZpeGVycyBpbnN0YW5jaVx1MDBFOXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBbGxGaXhlcnMoKTogVHlwb2dyYXBoaWNGaXhlcltdIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgLy8gT3JkcmUgcGFyIHByaW9yaXRcdTAwRTkgY3JvaXNzYW50ZVxyXG4gICAgICAgIG5ldyBFbGxpcHNpcygpLCAgICAgICAgICAgLy8gcHJpb3JpdFx1MDBFOSAxXHJcbiAgICAgICAgbmV3IERhc2goKSwgICAgICAgICAgICAgICAvLyBwcmlvcml0XHUwMEU5IDJcclxuICAgICAgICBuZXcgRnJlbmNoTm9CcmVha1NwYWNlKCksIC8vIHByaW9yaXRcdTAwRTkgM1xyXG4gICAgICAgIG5ldyBTbWFydFF1b3RlcygpLCAgIC8vIHByaW9yaXRcdTAwRTkgNFxyXG4gICAgICAgIG5ldyBDdXJseVF1b3RlKCksICAgIC8vIHByaW9yaXRcdTAwRTkgNVxyXG4gICAgICAgIG5ldyBOb1NwYWNlQmVmb3JlQ29tbWEoKSwgLy8gcHJpb3JpdFx1MDBFOSA2XHJcbiAgICAgICAgbmV3IFVuaXQoKSwgICAgICAgICAgLy8gcHJpb3JpdFx1MDBFOSA3XHJcbiAgICAgICAgbmV3IERpbWVuc2lvbigpLCAgICAgLy8gcHJpb3JpdFx1MDBFOSA4XHJcbiAgICAgICAgbmV3IFRyYWRlbWFyaygpLCAgICAgLy8gcHJpb3JpdFx1MDBFOSA5XHJcbiAgICAgICAgbmV3IEh5cGhlbigpLCAgICAgICAgLy8gcHJpb3JpdFx1MDBFOSAxMCAoZFx1MDBFOXNhY3Rpdlx1MDBFOSBwYXIgZFx1MDBFOWZhdXQpXHJcbiAgICBdO1xyXG59XHJcblxyXG4vKipcclxuICogRmFjdG9yeSBwb3VyIGNyXHUwMEU5ZXIgbGVzIGZpeGVycyBwYXIgY2F0XHUwMEU5Z29yaWVcclxuICovXHJcbmV4cG9ydCBjb25zdCBGaXhlckZhY3RvcmllcyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JcdTAwRTllIHRvdXMgbGVzIGZpeGVycyBkZSBwb25jdHVhdGlvblxyXG4gICAgICovXHJcbiAgICBjcmVhdGVQdW5jdHVhdGlvbkZpeGVycygpOiBUeXBvZ3JhcGhpY0ZpeGVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIG5ldyBFbGxpcHNpcygpLFxyXG4gICAgICAgICAgICBuZXcgRGFzaCgpLFxyXG4gICAgICAgICAgICBuZXcgSHlwaGVuKCksXHJcbiAgICAgICAgXTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDclx1MDBFOWUgdG91cyBsZXMgZml4ZXJzIGQnZXNwYWNlbWVudFxyXG4gICAgICovXHJcbiAgICBjcmVhdGVTcGFjaW5nRml4ZXJzKCk6IFR5cG9ncmFwaGljRml4ZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgbmV3IEZyZW5jaE5vQnJlYWtTcGFjZSgpLFxyXG4gICAgICAgICAgICBuZXcgTm9TcGFjZUJlZm9yZUNvbW1hKCksXHJcbiAgICAgICAgICAgIG5ldyBVbml0KCksXHJcbiAgICAgICAgICAgIG5ldyBEaW1lbnNpb24oKSxcclxuICAgICAgICBdO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyXHUwMEU5ZSB0b3VzIGxlcyBmaXhlcnMgZGUgZ3VpbGxlbWV0c1xyXG4gICAgICovXHJcbiAgICBjcmVhdGVRdW90ZUZpeGVycygpOiBUeXBvZ3JhcGhpY0ZpeGVyW10ge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIG5ldyBTbWFydFF1b3RlcygpLFxyXG4gICAgICAgICAgICBuZXcgQ3VybHlRdW90ZSgpLFxyXG4gICAgICAgIF07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JcdTAwRTllIHRvdXMgbGVzIGZpeGVycyBkZSBzeW1ib2xlc1xyXG4gICAgICovXHJcbiAgICBjcmVhdGVTeW1ib2xGaXhlcnMoKTogVHlwb2dyYXBoaWNGaXhlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXcgVHJhZGVtYXJrKCksXHJcbiAgICAgICAgXTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDclx1MDBFOWUgbGVzIGZpeGVycyBlc3NlbnRpZWxzIHBvdXIgbGUgZnJhblx1MDBFN2Fpc1xyXG4gICAgICogQ29ycmVzcG9uZCBcdTAwRTAgbGEgY29uZmlndXJhdGlvbiBKb2xpVHlwbyBmcl9GUlxyXG4gICAgICovXHJcbiAgICBjcmVhdGVGcmVuY2hFc3NlbnRpYWxGaXhlcnMoKTogVHlwb2dyYXBoaWNGaXhlcltdIHtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXcgRWxsaXBzaXMoKSxcclxuICAgICAgICAgICAgbmV3IERhc2goKSxcclxuICAgICAgICAgICAgbmV3IEZyZW5jaE5vQnJlYWtTcGFjZSgpLFxyXG4gICAgICAgICAgICBuZXcgU21hcnRRdW90ZXMoKSxcclxuICAgICAgICAgICAgbmV3IEN1cmx5UXVvdGUoKSxcclxuICAgICAgICAgICAgbmV3IFVuaXQoKSxcclxuICAgICAgICAgICAgbmV3IERpbWVuc2lvbigpLFxyXG4gICAgICAgICAgICBuZXcgVHJhZGVtYXJrKCksXHJcbiAgICAgICAgICAgIG5ldyBOb1NwYWNlQmVmb3JlQ29tbWEoKSxcclxuICAgICAgICAgICAgLy8gTm90ZTogSHlwaGVuIGRcdTAwRTlzYWN0aXZcdTAwRTkgcGFyIGRcdTAwRTlmYXV0IGNhciBjb21wbGV4ZVxyXG4gICAgICAgIF07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JcdTAwRTllIGxlcyBmaXhlcnMgZXNzZW50aWVscyBwb3VyIGwnYW5nbGFpc1xyXG4gICAgICogQ29ycmVzcG9uZCBcdTAwRTAgbGEgY29uZmlndXJhdGlvbiBKb2xpVHlwbyBlbl9HQlxyXG4gICAgICovXHJcbiAgICBjcmVhdGVFbmdsaXNoRXNzZW50aWFsRml4ZXJzKCk6IFR5cG9ncmFwaGljRml4ZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgbmV3IEVsbGlwc2lzKCksXHJcbiAgICAgICAgICAgIG5ldyBEYXNoKCksXHJcbiAgICAgICAgICAgIG5ldyBTbWFydFF1b3RlcygpLFxyXG4gICAgICAgICAgICBuZXcgQ3VybHlRdW90ZSgpLFxyXG4gICAgICAgICAgICBuZXcgVW5pdCgpLFxyXG4gICAgICAgICAgICBuZXcgRGltZW5zaW9uKCksXHJcbiAgICAgICAgICAgIG5ldyBUcmFkZW1hcmsoKSxcclxuICAgICAgICAgICAgbmV3IE5vU3BhY2VCZWZvcmVDb21tYSgpLFxyXG4gICAgICAgICAgICAvLyBOb3RlOiBIeXBoZW4gZFx1MDBFOXNhY3Rpdlx1MDBFOSBwYXIgZFx1MDBFOWZhdXRcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1cdTAwRTl0YWRvbm5cdTAwRTllcyBzdXIgbGVzIGZpeGVycyBkaXNwb25pYmxlc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZpeGVyTWV0YWRhdGEgPSB7XHJcbiAgICB0b3RhbENvdW50OiAxMCwgLy8gTm9tYnJlIHRvdGFsIGRlIGZpeGVycyBpbXBsXHUwMEU5bWVudFx1MDBFOXNcclxuICAgIGNhdGVnb3JpZXM6IFsncHVuY3R1YXRpb24nLCAnc3BhY2luZycsICdxdW90ZXMnLCAnc3ltYm9scyddIGFzIGNvbnN0LFxyXG4gICAgXHJcbiAgICBnZXRDYXRlZ29yeUNvdW50KGNhdGVnb3J5OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5TWFwOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xyXG4gICAgICAgICAgICAncHVuY3R1YXRpb24nOiAzLCAgIC8vIEVsbGlwc2lzLCBEYXNoLCBIeXBoZW5cclxuICAgICAgICAgICAgJ3NwYWNpbmcnOiA0LCAgICAgICAvLyBGcmVuY2hOb0JyZWFrU3BhY2UsIE5vU3BhY2VCZWZvcmVDb21tYSwgVW5pdCwgRGltZW5zaW9uXHJcbiAgICAgICAgICAgICdxdW90ZXMnOiAyLCAgICAgICAgLy8gU21hcnRRdW90ZXMsIEN1cmx5UXVvdGUgIFxyXG4gICAgICAgICAgICAnc3ltYm9scyc6IDEgICAgICAgIC8vIFRyYWRlbWFya1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5TWFwW2NhdGVnb3J5XSB8fCAwO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRGaXhlcklkcygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgJ0VsbGlwc2lzJyxcclxuICAgICAgICAgICAgJ0Rhc2gnLFxyXG4gICAgICAgICAgICAnSHlwaGVuJywgXHJcbiAgICAgICAgICAgICdGcmVuY2hOb0JyZWFrU3BhY2UnLFxyXG4gICAgICAgICAgICAnTm9TcGFjZUJlZm9yZUNvbW1hJyxcclxuICAgICAgICAgICAgJ1VuaXQnLFxyXG4gICAgICAgICAgICAnRGltZW5zaW9uJyxcclxuICAgICAgICAgICAgJ1NtYXJ0UXVvdGVzJyxcclxuICAgICAgICAgICAgJ0N1cmx5UXVvdGUnLFxyXG4gICAgICAgICAgICAnVHJhZGVtYXJrJ1xyXG4gICAgICAgIF07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0b3VybmUgbGVzIGZpeGVycyByZWNvbW1hbmRcdTAwRTlzIHBhciBsb2NhbGUgKGNvbW1lIEpvbGlUeXBvKVxyXG4gICAgICovXHJcbiAgICBnZXRSZWNvbW1lbmRlZEZpeGVyc0ZvckxvY2FsZShsb2NhbGU6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICBjb25zdCBsb2NhbGVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcclxuICAgICAgICAgICAgJ2ZyX0ZSJzogWydFbGxpcHNpcycsICdEaW1lbnNpb24nLCAnVW5pdCcsICdEYXNoJywgJ1NtYXJ0UXVvdGVzJywgJ0ZyZW5jaE5vQnJlYWtTcGFjZScsICdOb1NwYWNlQmVmb3JlQ29tbWEnLCAnQ3VybHlRdW90ZScsICdUcmFkZW1hcmsnXSxcclxuICAgICAgICAgICAgJ2ZyX0NBJzogWydFbGxpcHNpcycsICdEaW1lbnNpb24nLCAnVW5pdCcsICdEYXNoJywgJ1NtYXJ0UXVvdGVzJywgJ05vU3BhY2VCZWZvcmVDb21tYScsICdDdXJseVF1b3RlJywgJ1RyYWRlbWFyayddLFxyXG4gICAgICAgICAgICAnZW5fR0InOiBbJ0VsbGlwc2lzJywgJ0RpbWVuc2lvbicsICdVbml0JywgJ0Rhc2gnLCAnU21hcnRRdW90ZXMnLCAnTm9TcGFjZUJlZm9yZUNvbW1hJywgJ0N1cmx5UXVvdGUnLCAnVHJhZGVtYXJrJ10sXHJcbiAgICAgICAgICAgICdkZV9ERSc6IFsnRWxsaXBzaXMnLCAnRGltZW5zaW9uJywgJ1VuaXQnLCAnRGFzaCcsICdTbWFydFF1b3RlcycsICdOb1NwYWNlQmVmb3JlQ29tbWEnLCAnQ3VybHlRdW90ZScsICdUcmFkZW1hcmsnXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZU1hcFtsb2NhbGVdIHx8IGxvY2FsZU1hcFsnZnJfRlInXTtcclxuICAgIH1cclxufTsiLCAiLy8gc3JjL2VuZ2luZS90eXBvZ3JhcGh5LWVuZ2luZS50c1xyXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFxyXG4gICAgVHlwb2dyYXBoaWNGaXhlciwgXHJcbiAgICBUeXBvZ3JhcGh5U2V0dGluZ3MsIFxyXG4gICAgQ29ycmVjdGlvblJlc3VsdCxcclxuICAgIEZpeGVyQ29uZmlnIFxyXG59IGZyb20gJy4uL3R5cGVzL2ludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBjcmVhdGVBbGxGaXhlcnMgfSBmcm9tICcuLi9maXhlcnMnO1xyXG5cclxuLyoqXHJcbiAqIE1vdGV1ciBwcmluY2lwYWwgZGUgY29ycmVjdGlvbiB0eXBvZ3JhcGhpcXVlXHJcbiAqIEdcdTAwRThyZSBsJ2Vuc2VtYmxlIGRlcyBmaXhlcnMgZXQgYXBwbGlxdWUgbGVzIGNvcnJlY3Rpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVHlwb2dyYXBoeUVuZ2luZSB7XHJcbiAgICBwcml2YXRlIGZpeGVyczogTWFwPHN0cmluZywgVHlwb2dyYXBoaWNGaXhlcj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHNldHRpbmdzOiBUeXBvZ3JhcGh5U2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3M6IFR5cG9ncmFwaHlTZXR0aW5ncykge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVGaXhlcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpc2UgdG91cyBsZXMgZml4ZXJzIGRpc3BvbmlibGVzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUZpeGVycygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhbGxGaXhlcnMgPSBjcmVhdGVBbGxGaXhlcnMoKTtcclxuICAgICAgICBcclxuICAgICAgICBhbGxGaXhlcnMuZm9yRWFjaChmaXhlciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZml4ZXJzLnNldChmaXhlci5pZCwgZml4ZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQXBwbGlxdWVyIGxlcyBwYXJhbVx1MDBFOHRyZXMgZCdhY3RpdmF0aW9uXHJcbiAgICAgICAgICAgIGlmIChmaXhlci5pZCBpbiB0aGlzLnNldHRpbmdzLmZpeGVycykge1xyXG4gICAgICAgICAgICAgICAgZml4ZXIuZW5hYmxlZCA9IHRoaXMuc2V0dGluZ3MuZml4ZXJzW2ZpeGVyLmlkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29uZmlndXJlciBsYSBsb2NhbGUgc2kgbGUgZml4ZXIgbGUgc3VwcG9ydGVcclxuICAgICAgICAgICAgaWYgKGZpeGVyLnNldExvY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgZml4ZXIuc2V0TG9jYWxlKHRoaXMuc2V0dGluZ3MubG9jYWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWV0IFx1MDBFMCBqb3VyIGxlcyBwYXJhbVx1MDBFOHRyZXMgZXQgcmVjb25maWd1cmUgbGVzIGZpeGVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFR5cG9ncmFwaHlTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmZpeGVycy5mb3JFYWNoKGZpeGVyID0+IHtcclxuICAgICAgICAgICAgLy8gTWV0dHJlIFx1MDBFMCBqb3VyIGwnXHUwMEU5dGF0IGQnYWN0aXZhdGlvblxyXG4gICAgICAgICAgICBpZiAoZml4ZXIuaWQgaW4gc2V0dGluZ3MuZml4ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmaXhlci5lbmFibGVkID0gc2V0dGluZ3MuZml4ZXJzW2ZpeGVyLmlkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTWV0dHJlIFx1MDBFMCBqb3VyIGxhIGxvY2FsZVxyXG4gICAgICAgICAgICBpZiAoZml4ZXIuc2V0TG9jYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBmaXhlci5zZXRMb2NhbGUoc2V0dGluZ3MubG9jYWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0b3VybmUgdG91cyBsZXMgZml4ZXJzIHRyaVx1MDBFOXMgcGFyIHByaW9yaXRcdTAwRTlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEZpeGVycygpOiBUeXBvZ3JhcGhpY0ZpeGVyW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZml4ZXJzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0b3VybmUgdW5pcXVlbWVudCBsZXMgZml4ZXJzIGFjdGl2XHUwMEU5c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RW5hYmxlZEZpeGVycygpOiBUeXBvZ3JhcGhpY0ZpeGVyW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpeGVycygpLmZpbHRlcihmaXhlciA9PiBmaXhlci5lbmFibGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldG91cm5lIGxlcyBmaXhlcnMgcGFyIGNhdFx1MDBFOWdvcmllXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRGaXhlcnNCeUNhdGVnb3J5KGNhdGVnb3J5OiBzdHJpbmcpOiBUeXBvZ3JhcGhpY0ZpeGVyW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpeGVycygpLmZpbHRlcihmaXhlciA9PiBmaXhlci5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT2J0aWVudCB1biBmaXhlciBzcFx1MDBFOWNpZmlxdWUgcGFyIHNvbiBJRFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Rml4ZXIoaWQ6IHN0cmluZyk6IFR5cG9ncmFwaGljRml4ZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpeGVycy5nZXQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhaXRlIHVuIHRleHRlIGF2ZWMgdG91cyBsZXMgZml4ZXJzIGFjdGl2XHUwMEU5c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJvY2Vzc1RleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBlbmFibGVkRml4ZXJzID0gdGhpcy5nZXRFbmFibGVkRml4ZXJzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGVuYWJsZWRGaXhlcnMucmVkdWNlKChjdXJyZW50VGV4dCwgZml4ZXIpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaXhlci5maXgoY3VycmVudFRleHQpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbVHlwb2dyYXBoeUVuZ2luZV0gRXJyZXVyIGRhbnMgbGUgZml4ZXIgJHtmaXhlci5pZH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRUZXh0OyAvLyBSZXRvdXJuZXIgbGUgdGV4dGUgbm9uIG1vZGlmaVx1MDBFOSBlbiBjYXMgZCdlcnJldXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhaXRlIHVuIHRleHRlIGV0IHJldG91cm5lIGRlcyBpbmZvcm1hdGlvbnMgZFx1MDBFOXRhaWxsXHUwMEU5ZXMgc3VyIGxlcyBjb3JyZWN0aW9uc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJvY2Vzc1RleHRXaXRoRGV0YWlscyh0ZXh0OiBzdHJpbmcpOiBDb3JyZWN0aW9uUmVzdWx0IHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHRleHQ7XHJcbiAgICAgICAgY29uc3QgZW5hYmxlZEZpeGVycyA9IHRoaXMuZ2V0RW5hYmxlZEZpeGVycygpO1xyXG4gICAgICAgIGNvbnN0IGZpeGVyc1VzZWQ6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgbGV0IGNvcnJlY3Rpb25zQ291bnQgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBjb3JyZWN0ZWQgPSBlbmFibGVkRml4ZXJzLnJlZHVjZSgoY3VycmVudFRleHQsIGZpeGVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaXhlZFRleHQgPSBmaXhlci5maXgoY3VycmVudFRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpeGVkVGV4dCAhPT0gY3VycmVudFRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXhlcnNVc2VkLnB1c2goZml4ZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlY3Rpb25zQ291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmaXhlZFRleHQ7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFtUeXBvZ3JhcGh5RW5naW5lXSBFcnJldXIgZGFucyBsZSBmaXhlciAke2ZpeGVyLmlkfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0ZXh0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb3JpZ2luYWwsXHJcbiAgICAgICAgICAgIGNvcnJlY3RlZCxcclxuICAgICAgICAgICAgY29ycmVjdGlvbnNDb3VudCxcclxuICAgICAgICAgICAgZml4ZXJzVXNlZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHXHUwMEU4cmUgbGVzIFx1MDBFOXZcdTAwRTluZW1lbnRzIGNsYXZpZXIgZW4gdGVtcHMgclx1MDBFOWVsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoYW5kbGVLZXlFdmVudChldmVudDogS2V5Ym9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlUmVhbFRpbWVDb3JyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGVuYWJsZWRGaXhlcnMgPSB0aGlzLmdldEVuYWJsZWRGaXhlcnMoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGZpeGVyIG9mIGVuYWJsZWRGaXhlcnMpIHtcclxuICAgICAgICAgICAgaWYgKGZpeGVyLmhhbmRsZUtleUV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXhlci5oYW5kbGVLZXlFdmVudChldmVudCwgZWRpdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gVW4gZml4ZXIgYSB0cmFpdFx1MDBFOSBsJ1x1MDBFOXZcdTAwRTluZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW1R5cG9ncmFwaHlFbmdpbmVdIEVycmV1ciBkYW5zIGhhbmRsZUtleUV2ZW50IHBvdXIgJHtmaXhlci5pZH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2ZSBvdSBkXHUwMEU5c2FjdGl2ZSB1biBmaXhlciBzcFx1MDBFOWNpZmlxdWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvZ2dsZUZpeGVyKGZpeGVySWQ6IHN0cmluZywgZW5hYmxlZDogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGZpeGVyID0gdGhpcy5maXhlcnMuZ2V0KGZpeGVySWQpO1xyXG4gICAgICAgIGlmIChmaXhlcikge1xyXG4gICAgICAgICAgICBmaXhlci5lbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maXhlcnNbZml4ZXJJZF0gPSBlbmFibGVkO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWN0aXZlIG91IGRcdTAwRTlzYWN0aXZlIHRvdXMgbGVzIGZpeGVycyBkJ3VuZSBjYXRcdTAwRTlnb3JpZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9nZ2xlQ2F0ZWdvcnkoY2F0ZWdvcnk6IHN0cmluZywgZW5hYmxlZDogYm9vbGVhbik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlGaXhlcnMgPSB0aGlzLmdldEZpeGVyc0J5Q2F0ZWdvcnkoY2F0ZWdvcnkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNhdGVnb3J5Rml4ZXJzLmZvckVhY2goZml4ZXIgPT4ge1xyXG4gICAgICAgICAgICBmaXhlci5lbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maXhlcnNbZml4ZXIuaWRdID0gZW5hYmxlZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY2F0ZWdvcnlGaXhlcnMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUlx1MDBFOWluaXRpYWxpc2UgdG91cyBsZXMgZml4ZXJzIFx1MDBFMCBsZXVyIFx1MDBFOXRhdCBwYXIgZFx1MDBFOWZhdXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0VG9EZWZhdWx0cygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpeGVycy5mb3JFYWNoKGZpeGVyID0+IHtcclxuICAgICAgICAgICAgLy8gTG9naXF1ZSBwYXIgZFx1MDBFOWZhdXQgOiBjZXJ0YWlucyBmaXhlcnMgYWN0aXZcdTAwRTlzIHNlbG9uIGxhIGxhbmd1ZVxyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0RW5hYmxlZCA9IHRoaXMuZ2V0RGVmYXVsdEVuYWJsZWRTdGF0ZShmaXhlci5pZCk7XHJcbiAgICAgICAgICAgIGZpeGVyLmVuYWJsZWQgPSBkZWZhdWx0RW5hYmxlZDtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maXhlcnNbZml4ZXIuaWRdID0gZGVmYXVsdEVuYWJsZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEXHUwMEU5dGVybWluZSBsJ1x1MDBFOXRhdCBwYXIgZFx1MDBFOWZhdXQgZCd1biBmaXhlciBzZWxvbiBsYSBjb25maWd1cmF0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdEVuYWJsZWRTdGF0ZShmaXhlcklkOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBmcmVuY2hFc3NlbnRpYWxGaXhlcnMgPSBbJ2VsbGlwc2lzJywgJ2Rhc2gnLCAnZnJlbmNoLXNwYWNpbmcnLCAnc21hcnQtcXVvdGVzJywgJ2NvbW1hJ107XHJcbiAgICAgICAgY29uc3QgZW5nbGlzaEVzc2VudGlhbEZpeGVycyA9IFsnZWxsaXBzaXMnLCAnZGFzaCcsICdzbWFydC1xdW90ZXMnLCAnY29tbWEnXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5sb2NhbGUuc3RhcnRzV2l0aCgnZnInKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnJlbmNoRXNzZW50aWFsRml4ZXJzLmluY2x1ZGVzKGZpeGVySWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbmdsaXNoRXNzZW50aWFsRml4ZXJzLmluY2x1ZGVzKGZpeGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59IiwgIi8vIHNyYy9zZXR0aW5ncy9zZXR0aW5ncy10YWIudHNcclxuaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgVHlwb2dyYXBoaWNGaXhlciB9IGZyb20gXCIuLi90eXBlcy9pbnRlcmZhY2VzXCI7XHJcbmltcG9ydCB7XHJcbiAgTE9DQUxFX0NPTkZJR1VSQVRJT05TLFxyXG4gIExPQ0FMRV9OQU1FUyxcclxuICBDQVRFR09SWV9OQU1FUyxcclxufSBmcm9tIFwiLi9kZWZhdWx0LXNldHRpbmdzXCI7XHJcbmltcG9ydCBUeXBvZ3JhcGh5UGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGRlIGNvbmZpZ3VyYXRpb24gZHUgcGx1Z2luIFR5cG9ncmFwaHkgRml4ZXJzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVHlwb2dyYXBoeVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBwbHVnaW46IFR5cG9ncmFwaHlQbHVnaW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFR5cG9ncmFwaHlQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgIC8vIFRpdHJlIHByaW5jaXBhbFxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiUGFyYW1cdTAwRTh0cmVzIFR5cG9ncmFwaHkgRml4ZXJzXCIgfSk7XHJcblxyXG4gICAgLy8gRGVzY3JpcHRpb25cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgIHRleHQ6IFwiUGx1Z2luIGRlIGNvcnJlY3Rpb24gdHlwb2dyYXBoaXF1ZSBiYXNcdTAwRTkgc3VyIEpvbGlUeXBvLiBDb3JyaWdlIGF1dG9tYXRpcXVlbWVudCBsZXMgZXJyZXVycyB0eXBvZ3JhcGhpcXVlcyBzZWxvbiBsZXMgclx1MDBFOGdsZXMgZnJhblx1MDBFN2Fpc2VzLCBhbmdsYWlzZXMgZXQgYWxsZW1hbmRlcy5cIixcclxuICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2VjdGlvbjogQ29uZmlndXJhdGlvbiBnXHUwMEU5blx1MDBFOXJhbGVcclxuICAgIHRoaXMuY3JlYXRlR2VuZXJhbFNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcbiAgICAvLyBTZWN0aW9uOiBSXHUwMEU4Z2xlcyBkZSBjb3JyZWN0aW9uXHJcbiAgICB0aGlzLmNyZWF0ZUZpeGVyU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuICAgIC8vIFNlY3Rpb246IEFjdGlvbnNcclxuICAgIHRoaXMuY3JlYXRlQWN0aW9uc1NlY3Rpb24oY29udGFpbmVyRWwpO1xyXG5cclxuICAgIC8vIEFqb3V0ZXIgbGVzIHN0eWxlcyBDU1MgcGVyc29ubmFsaXNcdTAwRTlzXHJcbiAgICB0aGlzLmFkZEN1c3RvbVN0eWxlcyhjb250YWluZXJFbCk7XHJcblxyXG4gICAgdGhpcy5jcmVhdGVIaWdobGlnaHRTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDclx1MDBFOWUgbGEgc2VjdGlvbiBkZSBjb25maWd1cmF0aW9uIGdcdTAwRTluXHUwMEU5cmFsZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgY3JlYXRlR2VuZXJhbFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ29uZmlndXJhdGlvbiBnXHUwMEU5blx1MDBFOXJhbGVcIiB9KTtcclxuXHJcbiAgICAvLyBDb3JyZWN0aW9uIGVuIHRlbXBzIHJcdTAwRTllbFxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiQ29ycmVjdGlvbiBlbiB0ZW1wcyByXHUwMEU5ZWxcIilcclxuICAgICAgLnNldERlc2MoXCJBY3RpdmUgbGEgY29ycmVjdGlvbiBhdXRvbWF0aXF1ZSBwZW5kYW50IGxhIGZyYXBwZVwiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUmVhbFRpbWVDb3JyZWN0aW9uKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSZWFsVGltZUNvcnJlY3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgIC8vIExhbmd1ZSB0eXBvZ3JhcGhpcXVlXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJMYW5ndWUgdHlwb2dyYXBoaXF1ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICBcIkNob2lzaXNzZXogbGVzIHJcdTAwRThnbGVzIHR5cG9ncmFwaGlxdWVzIFx1MDBFMCBhcHBsaXF1ZXIuIENoYW5nZSBhdXRvbWF0aXF1ZW1lbnQgbGVzIGZpeGVycyByZWNvbW1hbmRcdTAwRTlzLlwiXHJcbiAgICAgIClcclxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgIC8vIEFqb3V0ZXIgdG91dGVzIGxlcyBsb2NhbGVzIGRpc3BvbmlibGVzXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoTE9DQUxFX05BTUVTKS5mb3JFYWNoKChbbG9jYWxlLCBuYW1lXSkgPT4ge1xyXG4gICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGxvY2FsZSwgbmFtZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkcm9wZG93blxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxvY2FsZSlcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubG9jYWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRml4ZXJzRm9yTG9jYWxlKHZhbHVlKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMuZGlzcGxheSgpIHNlcmEgYXBwZWxcdTAwRTkgZGFucyB1cGRhdGVGaXhlcnNGb3JMb2NhbGUoKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIC8vIEluZm9ybWF0aW9uIHN1ciBsZXMgZml4ZXJzIGFjdGlmc1xyXG4gICAgY29uc3QgYWN0aXZlRml4ZXJzQ291bnQgPSBPYmplY3QudmFsdWVzKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVycykuZmlsdGVyKFxyXG4gICAgICBCb29sZWFuXHJcbiAgICApLmxlbmd0aDtcclxuICAgIGNvbnN0IHRvdGFsRml4ZXJzQ291bnQgPSBPYmplY3Qua2V5cyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlcnMpLmxlbmd0aDtcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICB0ZXh0OiBgJHthY3RpdmVGaXhlcnNDb3VudH0vJHt0b3RhbEZpeGVyc0NvdW50fSByXHUwMEU4Z2xlcyBhY3Rpdlx1MDBFOWVzIHBvdXIgJHtcclxuICAgICAgICBMT0NBTEVfTkFNRVNbdGhpcy5wbHVnaW4uc2V0dGluZ3MubG9jYWxlXVxyXG4gICAgICB9YCxcclxuICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDclx1MDBFOWUgbGEgc2VjdGlvbiBkZXMgZml4ZXJzIHBhciBjYXRcdTAwRTlnb3JpZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgY3JlYXRlRml4ZXJTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlJcdTAwRThnbGVzIGRlIGNvcnJlY3Rpb25cIiB9KTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgIHRleHQ6IFwiQWN0aXZleiBvdSBkXHUwMEU5c2FjdGl2ZXogbGVzIHJcdTAwRThnbGVzIHR5cG9ncmFwaGlxdWVzIHNlbG9uIHZvcyBiZXNvaW5zLiBMZXMgclx1MDBFOGdsZXMgcmVjb21tYW5kXHUwMEU5ZXMgcG91ciB2b3RyZSBsYW5ndWUgc29udCBhY3Rpdlx1MDBFOWVzIGF1dG9tYXRpcXVlbWVudC5cIixcclxuICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR3JvdXBlciBsZXMgZml4ZXJzIHBhciBjYXRcdTAwRTlnb3JpZVxyXG4gICAgY29uc3QgZml4ZXJzQnlDYXRlZ29yeSA9IHRoaXMucGx1Z2luLmVuZ2luZVxyXG4gICAgICAuZ2V0Rml4ZXJzKClcclxuICAgICAgLnJlZHVjZSgoYWNjLCBmaXhlcikgPT4ge1xyXG4gICAgICAgIGlmICghYWNjW2ZpeGVyLmNhdGVnb3J5XSkgYWNjW2ZpeGVyLmNhdGVnb3J5XSA9IFtdO1xyXG4gICAgICAgIGFjY1tmaXhlci5jYXRlZ29yeV0ucHVzaChmaXhlcik7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgVHlwb2dyYXBoaWNGaXhlcltdPik7XHJcblxyXG4gICAgLy8gQ3JcdTAwRTllciBsZXMgcGFyYW1cdTAwRTh0cmVzIHBvdXIgY2hhcXVlIGNhdFx1MDBFOWdvcmllXHJcbiAgICBPYmplY3QuZW50cmllcyhmaXhlcnNCeUNhdGVnb3J5KS5mb3JFYWNoKChbY2F0ZWdvcnksIGZpeGVyc10pID0+IHtcclxuICAgICAgLy8gVGl0cmUgZGUgY2F0XHUwMEU5Z29yaWUgYXZlYyBjb250clx1MDBGNGxlIGdsb2JhbFxyXG4gICAgICBjb25zdCBjYXRlZ29yeUhlYWRlciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgIHRleHQ6IENBVEVHT1JZX05BTUVTW2NhdGVnb3J5XSB8fCBjYXRlZ29yeSxcclxuICAgICAgICBjbHM6IFwidHlwb2dyYXBoeS1jYXRlZ29yeS1oZWFkZXJcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBCb3V0b24gcG91ciBhY3RpdmVyL2RcdTAwRTlzYWN0aXZlciB0b3V0ZSBsYSBjYXRcdTAwRTlnb3JpZVxyXG4gICAgICBjb25zdCB0b2dnbGVBbGxCdXR0b24gPSBjYXRlZ29yeUhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XHJcbiAgICAgICAgdGV4dDogXCJUb3V0IGJhc2N1bGVyXCIsXHJcbiAgICAgICAgY2xzOiBcInR5cG9ncmFwaHktdG9nZ2xlLWNhdGVnb3J5XCIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdG9nZ2xlQWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYWxsRW5hYmxlZCA9IGZpeGVycy5ldmVyeSgoZikgPT4gZi5lbmFibGVkKTtcclxuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9ICFhbGxFbmFibGVkO1xyXG5cclxuICAgICAgICBmaXhlcnMuZm9yRWFjaCgoZml4ZXIpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVyc1tmaXhlci5pZF0gPSBuZXdTdGF0ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gUGFyYW1cdTAwRTh0cmVzIGluZGl2aWR1ZWxzIGRlcyBmaXhlcnNcclxuICAgICAgZml4ZXJzLmZvckVhY2goKGZpeGVyKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgLnNldE5hbWUoZml4ZXIubmFtZSlcclxuICAgICAgICAgIC5zZXREZXNjKGZpeGVyLmRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxyXG4gICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUoZml4ZXIuZW5hYmxlZCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZXJzW2ZpeGVyLmlkXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQWpvdXRlciB1biBiYWRnZSBzaSBjJ2VzdCByZWNvbW1hbmRcdTAwRTkgcG91ciBsYSBsb2NhbGUgYWN0dWVsbGVcclxuICAgICAgICBjb25zdCBpc1JlY29tbWVuZGVkID0gdGhpcy5pc0ZpeGVyUmVjb21tZW5kZWRGb3JDdXJyZW50TG9jYWxlKGZpeGVyLmlkKTtcclxuICAgICAgICBpZiAoaXNSZWNvbW1lbmRlZCkge1xyXG4gICAgICAgICAgY29uc3QgYmFkZ2UgPSBzZXR0aW5nLm5hbWVFbC5jcmVhdGVFbChcInNwYW5cIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlJlY29tbWFuZFx1MDBFOVwiLFxyXG4gICAgICAgICAgICBjbHM6IFwidHlwb2dyYXBoeS1yZWNvbW1lbmRlZC1iYWRnZVwiLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBam91dGVyIHVuIGV4ZW1wbGUgc2kgZGlzcG9uaWJsZVxyXG4gICAgICAgIGlmIChmaXhlci5nZXRFeGFtcGxlKSB7XHJcbiAgICAgICAgICBjb25zdCBleGFtcGxlID0gZml4ZXIuZ2V0RXhhbXBsZSgpO1xyXG4gICAgICAgICAgY29uc3QgZXhhbXBsZUVsID0gc2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcclxuICAgICAgICAgICAgY2xzOiBcInR5cG9ncmFwaHktZXhhbXBsZVwiLFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgZXhhbXBsZUVsLmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogXCJ0eXBvZ3JhcGh5LWV4YW1wbGUtYmVmb3JlXCIsXHJcbiAgICAgICAgICB9KS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJ0eXBvZ3JhcGh5LWV4YW1wbGUtbGFiZWxcIj5BdmFudCA6PC9zcGFuPiA8Y29kZT4ke2V4YW1wbGUuYmVmb3JlfTwvY29kZT5gO1xyXG5cclxuICAgICAgICAgIGV4YW1wbGVFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwidHlwb2dyYXBoeS1leGFtcGxlLWFmdGVyXCIsXHJcbiAgICAgICAgICB9KS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJ0eXBvZ3JhcGh5LWV4YW1wbGUtbGFiZWxcIj5BcHJcdTAwRThzIDo8L3NwYW4+IDxjb2RlPiR7ZXhhbXBsZS5hZnRlcn08L2NvZGU+YDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDclx1MDBFOWUgbGEgc2VjdGlvbiBkZXMgYWN0aW9uc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgY3JlYXRlQWN0aW9uc1NlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJBY3Rpb25zXCIgfSk7XHJcblxyXG4gICAgLy8gU2VjdGlvbjogQWN0aW9ucyAoc2ltcGxpZmlcdTAwRTllKVxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKFwiUmVzdGF1cmVyIGxhIGNvbmZpZ3VyYXRpb24gcmVjb21tYW5kXHUwMEU5ZVwiKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICBgQWN0aXZlIGxlcyBmaXhlcnMgcmVjb21tYW5kXHUwMEU5cyBwb3VyICR7XHJcbiAgICAgICAgICBMT0NBTEVfTkFNRVNbdGhpcy5wbHVnaW4uc2V0dGluZ3MubG9jYWxlXVxyXG4gICAgICAgIH1gXHJcbiAgICAgIClcclxuICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxyXG4gICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiUmVzdGF1cmVyXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVGaXhlcnNGb3JMb2NhbGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubG9jYWxlKTtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgbmV3IE5vdGljZShcIkNvbmZpZ3VyYXRpb24gcmVzdGF1clx1MDBFOWVcIik7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldCBcdTAwRTAgam91ciBsZXMgZml4ZXJzIGFjdGlmcyBzZWxvbiBsYSBsb2NhbGUgY2hvaXNpZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgdXBkYXRlRml4ZXJzRm9yTG9jYWxlKGxvY2FsZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBjb25zdCBhY3RpdmVGaXhlcnMgPSBMT0NBTEVfQ09ORklHVVJBVElPTlNbbG9jYWxlXTtcclxuICAgIGlmIChhY3RpdmVGaXhlcnMpIHtcclxuICAgICAgLy8gRFx1MDBFOXNhY3RpdmVyIHRvdXMgbGVzIGZpeGVycyBkJ2Fib3JkXHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVycykuZm9yRWFjaCgoZml4ZXJJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZXJzW2ZpeGVySWRdID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWN0aXZlciBsZXMgZml4ZXJzIHJlY29tbWFuZFx1MDBFOXMgcG91ciBjZXR0ZSBsb2NhbGVcclxuICAgICAgYWN0aXZlRml4ZXJzLmZvckVhY2goKGZpeGVySWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpeGVyc1tmaXhlcklkXSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gUmVkZXNzaW5lciBsJ2ludGVyZmFjZSBwb3VyIHJlZmxcdTAwRTl0ZXIgbGVzIGNoYW5nZW1lbnRzXHJcbiAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVlx1MDBFOXJpZmllIHNpIHVuIGZpeGVyIGVzdCByZWNvbW1hbmRcdTAwRTkgcG91ciBsYSBsb2NhbGUgYWN0dWVsbGVcclxuICAgKi9cclxuICBwcml2YXRlIGlzRml4ZXJSZWNvbW1lbmRlZEZvckN1cnJlbnRMb2NhbGUoZml4ZXJJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCByZWNvbW1lbmRlZEZpeGVycyA9XHJcbiAgICAgIExPQ0FMRV9DT05GSUdVUkFUSU9OU1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbGVdO1xyXG4gICAgcmV0dXJuIHJlY29tbWVuZGVkRml4ZXJzID8gcmVjb21tZW5kZWRGaXhlcnMuaW5jbHVkZXMoZml4ZXJJZCkgOiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFqb3V0ZSBsZXMgc3R5bGVzIENTUyBwZXJzb25uYWxpc1x1MDBFOXNcclxuICAgKi9cclxuICBwcml2YXRlIGFkZEN1c3RvbVN0eWxlcyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgIGlmICghY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi50eXBvZ3JhcGh5LWN1c3RvbS1zdHlsZXNcIikpIHtcclxuICAgICAgY29uc3Qgc3R5bGUgPSBjb250YWluZXJFbC5jcmVhdGVFbChcInN0eWxlXCIsIHtcclxuICAgICAgICBjbHM6IFwidHlwb2dyYXBoeS1jdXN0b20tc3R5bGVzXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcclxuICAgICAgICAgICAgICAgIC50eXBvZ3JhcGh5LWNhdGVnb3J5LWhlYWRlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAudHlwb2dyYXBoeS10b2dnbGUtY2F0ZWdvcnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC50eXBvZ3JhcGh5LXJlY29tbWVuZGVkLWJhZGdlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItYWNjZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLnR5cG9ncmFwaHktZXhhbXBsZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTJweDtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAudHlwb2dyYXBoeS1leGFtcGxlLWxhYmVsIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC50eXBvZ3JhcGh5LWV4YW1wbGUgY29kZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1mb3JtLWZpZWxkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDNweCA2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlci1ob3Zlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XHJcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcclxuICAgIGN1cnNvcjogdGV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLnR5cG9ncmFwaHktZXhhbXBsZS1iZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLnR5cG9ncmFwaHktZXhhbXBsZS1hZnRlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNnB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAudHlwb2dyYXBoeS10ZXN0LW9yaWdpbmFsLFxyXG4gICAgICAgICAgICAgICAgLnR5cG9ncmFwaHktdGVzdC1jb3JyZWN0ZWQge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDhweCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcclxuICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC50eXBvZ3JhcGh5LW5vLWNoYW5nZXMge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXdhcm5pbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JcdTAwRTllIGxlcyBwYXJhbVx1MDBFOHRyZXMgZGUgbWlzZSBlbiBcdTAwRTl2aWRlbmNlXHJcbiAgICogQHBhcmFtIGNvbnRhaW5lckVsIENvbnRlbmV1ciBwYXJlbnRcclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZUhpZ2hsaWdodFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgZGVzRWwgPSBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICB0ZXh0OiBcIkFmZmljaGFnZSBkZXMgY2FyYWN0XHUwMEU4cmVzIGludmlzaWJsZXNcIixcclxuICAgIH0pO1xyXG4gICAgZGVzRWwuc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xyXG4gICAgZGVzRWwuc3R5bGUubWFyZ2luVG9wID0gXCIzZW1cIjtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoXCJBY3RpdmVyIGwnYWZmaWNoYWdlIGRlcyBjYXJhY3RcdTAwRThyZXMgaW52aXNpYmxlc1wiKVxyXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XHJcbiAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZClcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG59XHJcbiIsICIvLyBzcmMvc2V0dGluZ3MvZGVmYXVsdC1zZXR0aW5ncy50c1xyXG5pbXBvcnQgeyBUeXBvZ3JhcGh5U2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9pbnRlcmZhY2VzJztcclxuXHJcbi8qKlxyXG4gKiBDb25maWd1cmF0aW9uIHBhciBkXHUwMEU5ZmF1dCBkdSBwbHVnaW4gLSBiYXNcdTAwRTllIHN1ciBKb2xpVHlwbyBmcl9GUlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFR5cG9ncmFwaHlTZXR0aW5ncyA9IHtcclxuICAgIGVuYWJsZVJlYWxUaW1lQ29ycmVjdGlvbjogdHJ1ZSxcclxuICAgIGxvY2FsZTogJ2ZyX0ZSJyxcclxuICAgIGhpZ2hsaWdodEVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgaGlnaGxpZ2h0QnV0dG9uOiB0cnVlLCAgICAgXHJcbiAgICB0YWJUaXRsZUJhckJ1dHRvbjogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgZml4ZXJzOiB7XHJcbiAgICAgICAgLy8gRml4ZXJzIEpvbGlUeXBvIC0gSURzIGV4YWN0c1xyXG4gICAgICAgICdFbGxpcHNpcyc6IHRydWUsICAgICAgICAgICAgICAgIC8vIFBvaW50cyBkZSBzdXNwZW5zaW9uIDogLi4uIFx1MjE5MiBcdTIwMjZcclxuICAgICAgICAnRGFzaCc6IHRydWUsICAgICAgICAgICAgICAgICAgICAvLyBUaXJldHMgdHlwb2dyYXBoaXF1ZXMgOiAtLSBcdTIxOTIgXHUyMDE0XHJcbiAgICAgICAgJ1NtYXJ0UXVvdGVzJzogdHJ1ZSwgICAgICAgICAgICAgLy8gR3VpbGxlbWV0cyBpbnRlbGxpZ2VudHMgc2Vsb24gbG9jYWxlXHJcbiAgICAgICAgJ0N1cmx5UXVvdGUnOiB0cnVlLCAgICAgICAgICAgICAgLy8gQXBvc3Ryb3BoZXMgY291cmJlcyA6ICcgXHUyMTkyICdcclxuICAgICAgICAnRnJlbmNoTm9CcmVha1NwYWNlJzogdHJ1ZSwgICAgICAvLyBFc3BhY2VzIGluc1x1MDBFOWNhYmxlcyBmcmFuXHUwMEU3YWlzIDogISA/IDsgOlxyXG4gICAgICAgICdOb1NwYWNlQmVmb3JlQ29tbWEnOiB0cnVlLCAgICAgIC8vIFZpcmd1bGVzIHNhbnMgZXNwYWNlIGF2YW50XHJcbiAgICAgICAgJ1VuaXQnOiB0cnVlLCAgICAgICAgICAgICAgICAgICAgLy8gRXNwYWNlcyBhdmFudCB1bml0XHUwMEU5cyA6IDI1IGtnXHJcbiAgICAgICAgJ0RpbWVuc2lvbic6IHRydWUsICAgICAgICAgICAgICAgLy8gTXVsdGlwbGljYXRpb24gOiAxMiB4IDM0IFx1MjE5MiAxMlx1MDBENzM0XHJcbiAgICAgICAgJ0h5cGhlbic6IGZhbHNlLCAgICAgICAgICAgICAgICAgLy8gQ1x1MDBFOXN1cmUgKGNvbXBsZXhlLCBkXHUwMEU5c2FjdGl2XHUwMEU5IHBhciBkXHUwMEU5ZmF1dClcclxuICAgICAgICAnVHJhZGVtYXJrJzogdHJ1ZSAgICAgICAgICAgICAgICAvLyBNYXJxdWVzIDogKGMpIFx1MjE5MiBcdTAwQTksIChyKSBcdTIxOTIgXHUwMEFFLCAodG0pIFx1MjE5MiBcdTIxMjJcclxuICAgIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb25maWd1cmF0aW9ucyBKb2xpVHlwbyBwYXIgbG9jYWxlXHJcbiAqIFV0aWxpc2UgUmVjb3JkPHN0cmluZywgc3RyaW5nW10+IHBvdXIgbGEgY29tcGF0aWJpbGl0XHUwMEU5IFR5cGVTY3JpcHRcclxuICovXHJcbmV4cG9ydCBjb25zdCBMT0NBTEVfQ09ORklHVVJBVElPTlM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcclxuICAgICdlbl9HQic6IFtcclxuICAgICAgICAnRWxsaXBzaXMnLCBcclxuICAgICAgICAnRGltZW5zaW9uJywgXHJcbiAgICAgICAgJ1VuaXQnLCBcclxuICAgICAgICAnRGFzaCcsIFxyXG4gICAgICAgICdTbWFydFF1b3RlcycsIFxyXG4gICAgICAgICdOb1NwYWNlQmVmb3JlQ29tbWEnLCBcclxuICAgICAgICAnQ3VybHlRdW90ZScsIFxyXG4gICAgICAgICdIeXBoZW4nLCBcclxuICAgICAgICAnVHJhZGVtYXJrJ1xyXG4gICAgXSxcclxuICAgICdmcl9GUic6IFtcclxuICAgICAgICAnRWxsaXBzaXMnLCBcclxuICAgICAgICAnRGltZW5zaW9uJywgXHJcbiAgICAgICAgJ1VuaXQnLCBcclxuICAgICAgICAnRGFzaCcsIFxyXG4gICAgICAgICdTbWFydFF1b3RlcycsIFxyXG4gICAgICAgICdGcmVuY2hOb0JyZWFrU3BhY2UnLCBcclxuICAgICAgICAnTm9TcGFjZUJlZm9yZUNvbW1hJywgXHJcbiAgICAgICAgJ0N1cmx5UXVvdGUnLCBcclxuICAgICAgICAnSHlwaGVuJywgXHJcbiAgICAgICAgJ1RyYWRlbWFyaydcclxuICAgIF0sXHJcbiAgICAnZnJfQ0EnOiBbXHJcbiAgICAgICAgJ0VsbGlwc2lzJywgXHJcbiAgICAgICAgJ0RpbWVuc2lvbicsIFxyXG4gICAgICAgICdVbml0JywgXHJcbiAgICAgICAgJ0Rhc2gnLCBcclxuICAgICAgICAnU21hcnRRdW90ZXMnLCBcclxuICAgICAgICAnTm9TcGFjZUJlZm9yZUNvbW1hJywgXHJcbiAgICAgICAgJ0N1cmx5UXVvdGUnLCBcclxuICAgICAgICAnSHlwaGVuJywgXHJcbiAgICAgICAgJ1RyYWRlbWFyaydcclxuICAgIF0sXHJcbiAgICAnZGVfREUnOiBbXHJcbiAgICAgICAgJ0VsbGlwc2lzJywgXHJcbiAgICAgICAgJ0RpbWVuc2lvbicsIFxyXG4gICAgICAgICdVbml0JywgXHJcbiAgICAgICAgJ0Rhc2gnLCBcclxuICAgICAgICAnU21hcnRRdW90ZXMnLCBcclxuICAgICAgICAnTm9TcGFjZUJlZm9yZUNvbW1hJywgXHJcbiAgICAgICAgJ0N1cmx5UXVvdGUnLCBcclxuICAgICAgICAnSHlwaGVuJywgXHJcbiAgICAgICAgJ1RyYWRlbWFyaydcclxuICAgIF1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBOb21zIGQnYWZmaWNoYWdlIGRlcyBsYW5ndWVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgTE9DQUxFX05BTUVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgJ2ZyX0ZSJzogJ1x1RDgzQ1x1RERFQlx1RDgzQ1x1RERGNyBGcmFuXHUwMEU3YWlzIChGcmFuY2UpJyxcclxuICAgICdmcl9DQSc6ICdcdUQ4M0NcdURERThcdUQ4M0NcdURERTYgRnJhblx1MDBFN2FpcyAoQ2FuYWRhKScsXHJcbiAgICAnZW5fR0InOiAnXHVEODNDXHVEREVDXHVEODNDXHVEREU3IEVuZ2xpc2ggKFVLKScsXHJcbiAgICAnZGVfREUnOiAnXHVEODNDXHVEREU5XHVEODNDXHVEREVBIERldXRzY2ggKERldXRzY2hsYW5kKSdcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGYWN0b3J5IHBvdXIgY3JcdTAwRTllciBkZXMgcGFyYW1cdTAwRTh0cmVzIHNlbG9uIGxhIGxhbmd1ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzRm9yTG9jYWxlKGxvY2FsZTogc3RyaW5nKTogVHlwb2dyYXBoeVNldHRpbmdzIHtcclxuICAgIGNvbnN0IGFjdGl2ZUZpeGVycyA9IExPQ0FMRV9DT05GSUdVUkFUSU9OU1tsb2NhbGVdIHx8IExPQ0FMRV9DT05GSUdVUkFUSU9OU1snZnJfRlInXTtcclxuICAgIFxyXG4gICAgY29uc3Qgc2V0dGluZ3M6IFR5cG9ncmFwaHlTZXR0aW5ncyA9IHtcclxuICAgICAgICBlbmFibGVSZWFsVGltZUNvcnJlY3Rpb246IHRydWUsXHJcbiAgICAgICAgbG9jYWxlOiBsb2NhbGUsXHJcbiAgICAgICAgaGlnaGxpZ2h0RW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgaGlnaGxpZ2h0QnV0dG9uOiB0cnVlLCAgICAgICAgXHJcbiAgICAgICAgdGFiVGl0bGVCYXJCdXR0b246IGZhbHNlLCAgICAgXHJcbiAgICAgICAgZml4ZXJzOiB7fVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXNlciB0b3VzIGxlcyBmaXhlcnMgXHUwMEUwIGZhbHNlXHJcbiAgICBPYmplY3Qua2V5cyhERUZBVUxUX1NFVFRJTkdTLmZpeGVycykuZm9yRWFjaChmaXhlcklkID0+IHtcclxuICAgICAgICBzZXR0aW5ncy5maXhlcnNbZml4ZXJJZF0gPSBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFjdGl2ZXIgbGVzIGZpeGVycyByZWNvbW1hbmRcdTAwRTlzIHBvdXIgY2V0dGUgbG9jYWxlXHJcbiAgICBhY3RpdmVGaXhlcnMuZm9yRWFjaChmaXhlcklkID0+IHtcclxuICAgICAgICBzZXR0aW5ncy5maXhlcnNbZml4ZXJJZF0gPSB0cnVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNldHRpbmdzO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRlIGV0IGNvcnJpZ2UgbGVzIHBhcmFtXHUwMEU4dHJlcyBjaGFyZ1x1MDBFOXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPFR5cG9ncmFwaHlTZXR0aW5ncz4pOiBUeXBvZ3JhcGh5U2V0dGluZ3Mge1xyXG5jb25zdCB2YWxpZGF0ZWQ6IFR5cG9ncmFwaHlTZXR0aW5ncyA9IHtcclxuICAgIGVuYWJsZVJlYWxUaW1lQ29ycmVjdGlvbjogc2V0dGluZ3MuZW5hYmxlUmVhbFRpbWVDb3JyZWN0aW9uID8/IERFRkFVTFRfU0VUVElOR1MuZW5hYmxlUmVhbFRpbWVDb3JyZWN0aW9uLFxyXG4gICAgbG9jYWxlOiBzZXR0aW5ncy5sb2NhbGUgPz8gREVGQVVMVF9TRVRUSU5HUy5sb2NhbGUsXHJcbiAgICBoaWdobGlnaHRFbmFibGVkOiBzZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID8/IERFRkFVTFRfU0VUVElOR1MuaGlnaGxpZ2h0RW5hYmxlZCxcclxuICAgIGhpZ2hsaWdodEJ1dHRvbjogc2V0dGluZ3MuaGlnaGxpZ2h0QnV0dG9uID8/IERFRkFVTFRfU0VUVElOR1MuaGlnaGxpZ2h0QnV0dG9uLCAgICAgICAgICAgLy8gXHUyNzA1IEFqb3V0XHUwMEU5XHJcbiAgICB0YWJUaXRsZUJhckJ1dHRvbjogc2V0dGluZ3MudGFiVGl0bGVCYXJCdXR0b24gPz8gREVGQVVMVF9TRVRUSU5HUy50YWJUaXRsZUJhckJ1dHRvbiwgICAgIC8vIFx1MjcwNSBBam91dFx1MDBFOVxyXG4gICAgZml4ZXJzOiB7IC4uLkRFRkFVTFRfU0VUVElOR1MuZml4ZXJzLCAuLi5zZXR0aW5ncy5maXhlcnMgfVxyXG59O1xyXG5cclxuICAgIC8vIEFzc3VyZXIgcXVlIHRvdXMgbGVzIGZpeGVycyBvbnQgdW5lIHZhbGV1ciBib29sXHUwMEU5ZW5uZVxyXG4gICAgT2JqZWN0LmtleXMoREVGQVVMVF9TRVRUSU5HUy5maXhlcnMpLmZvckVhY2goZml4ZXJJZCA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZWQuZml4ZXJzW2ZpeGVySWRdICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVkLmZpeGVyc1tmaXhlcklkXSA9IERFRkFVTFRfU0VUVElOR1MuZml4ZXJzW2ZpeGVySWRdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFZcdTAwRTlyaWZpZXIgcXVlIGxhIGxvY2FsZSBlc3Qgc3VwcG9ydFx1MDBFOWVcclxuICAgIGlmICghKHZhbGlkYXRlZC5sb2NhbGUgaW4gTE9DQUxFX0NPTkZJR1VSQVRJT05TKSkge1xyXG4gICAgICAgIHZhbGlkYXRlZC5sb2NhbGUgPSAnZnJfRlInOyAvLyBGYWxsYmFjayB2ZXJzIGZyYW5cdTAwRTdhaXNcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsaWRhdGVkO1xyXG59XHJcblxyXG4vKipcclxuICogT2J0aWVudCBsYSBsaXN0ZSBkZXMgZml4ZXJzIHJlY29tbWFuZFx1MDBFOXMgcG91ciB1bmUgbG9jYWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb21tZW5kZWRGaXhlcnNGb3JMb2NhbGUobG9jYWxlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICByZXR1cm4gTE9DQUxFX0NPTkZJR1VSQVRJT05TW2xvY2FsZV0gfHwgTE9DQUxFX0NPTkZJR1VSQVRJT05TWydmcl9GUiddO1xyXG59XHJcblxyXG4vKipcclxuICogVlx1MDBFOXJpZmllIHNpIHVuIGZpeGVyIGVzdCByZWNvbW1hbmRcdTAwRTkgcG91ciB1bmUgbG9jYWxlIGRvbm5cdTAwRTllXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGaXhlclJlY29tbWVuZGVkRm9yTG9jYWxlKGZpeGVySWQ6IHN0cmluZywgbG9jYWxlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHJlY29tbWVuZGVkRml4ZXJzID0gZ2V0UmVjb21tZW5kZWRGaXhlcnNGb3JMb2NhbGUobG9jYWxlKTtcclxuICAgIHJldHVybiByZWNvbW1lbmRlZEZpeGVycy5pbmNsdWRlcyhmaXhlcklkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1cdTAwRTl0YWRvbm5cdTAwRTllcyBzdXIgbGVzIGNhdFx1MDBFOWdvcmllcyBkZSBmaXhlcnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBGSVhFUl9DQVRFR09SSUVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XHJcbiAgICAncHVuY3R1YXRpb24nOiBbJ0VsbGlwc2lzJywgJ0Rhc2gnLCAnSHlwaGVuJ10sXHJcbiAgICAnc3BhY2luZyc6IFsnRnJlbmNoTm9CcmVha1NwYWNlJywgJ05vU3BhY2VCZWZvcmVDb21tYScsICdVbml0JywgJ0RpbWVuc2lvbiddLFxyXG4gICAgJ3F1b3Rlcyc6IFsnU21hcnRRdW90ZXMnLCAnQ3VybHlRdW90ZSddLFxyXG4gICAgJ3N5bWJvbHMnOiBbJ1RyYWRlbWFyayddXHJcbn07XHJcblxyXG4vKipcclxuICogTm9tcyBkJ2FmZmljaGFnZSBkZXMgY2F0XHUwMEU5Z29yaWVzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQ0FURUdPUllfTkFNRVM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICAncHVuY3R1YXRpb24nOiAnUG9uY3R1YXRpb24nLFxyXG4gICAgJ3NwYWNpbmcnOiAnRXNwYWNlbWVudCcsIFxyXG4gICAgJ3F1b3Rlcyc6ICdHdWlsbGVtZXRzJyxcclxuICAgICdzeW1ib2xzJzogJ1N5bWJvbGVzJ1xyXG59OyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLElBQUFBLG1CQUEwRDs7O0FDRDFELGtCQUErRDtBQUMvRCxtQkFBZ0M7QUFJaEMsSUFBSTtBQUtHLFNBQVMsa0JBQWtCLFVBQThCO0FBQzVELG9CQUFrQjtBQUdsQixRQUFNLDZCQUE2Qix1QkFBVyxLQUFLO0FBQUEsSUFDL0MsT0FBTztBQUFBLEVBQ1gsQ0FBQztBQUdELFFBQU0sc0JBQXNCLHVCQUFXLEtBQUs7QUFBQSxJQUN4QyxPQUFPO0FBQUEsRUFDWCxDQUFDO0FBR0QsUUFBTSxtQkFBbUIsdUJBQVcsS0FBSztBQUFBLElBQ3JDLE9BQU87QUFBQSxFQUNYLENBQUM7QUFHRCxRQUFNLHlCQUF5Qix1QkFBVyxLQUFLO0FBQUEsSUFDM0MsT0FBTztBQUFBLEVBQ1gsQ0FBQztBQUVELFNBQU8sdUJBQVcsVUFBVSxNQUFNO0FBQUEsSUFHOUIsWUFBWSxNQUFrQjtBQUMxQixXQUFLLGNBQWMsS0FBSyxpQkFBaUIsSUFBSTtBQUFBLElBQ2pEO0FBQUEsSUFFQSxPQUFPLFFBQW9CO0FBRXZCLFVBQUksT0FBTyxjQUFjLE9BQU8saUJBQWlCO0FBQzdDLGFBQUssY0FBYyxLQUFLLGlCQUFpQixPQUFPLElBQUk7QUFBQSxNQUN4RDtBQUFBLElBQ0o7QUFBQSxJQUVBLGlCQUFpQixNQUFrQjtBQUMvQixZQUFNLFVBQVUsSUFBSSw2QkFBNEI7QUFHaEQsVUFBSSxtQkFBbUIsZ0JBQWdCLGtCQUFrQjtBQUNyRCxpQkFBUyxFQUFFLE1BQU0sR0FBRyxLQUFLLEtBQUssZUFBZTtBQUN6QyxjQUFJLE9BQU8sS0FBSyxNQUFNLElBQUksWUFBWSxNQUFNLEVBQUU7QUFHOUMsY0FBSSxXQUFXO0FBR2YsY0FBSSxnQkFBZ0I7QUFDcEIsY0FBSSxjQUFjO0FBQ2xCLGNBQUksWUFBWTtBQUVoQixtQkFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNsQyxrQkFBTSxPQUFPLEtBQUssQ0FBQztBQUNuQixrQkFBTSxNQUFNLFdBQVc7QUFHdkIsZ0JBQUksYUFBYSxLQUFLLE9BQU8sR0FBRyxDQUFDLE1BQU0sT0FBTztBQUMxQyw4QkFBZ0IsQ0FBQztBQUNqQixtQkFBSztBQUNMLDBCQUFZO0FBQ1o7QUFBQSxZQUNKO0FBR0EsZ0JBQUksYUFBYSxLQUFLLE9BQU8sR0FBRyxDQUFDLE1BQU0sT0FBTztBQUMxQyw0QkFBYyxDQUFDO0FBQ2YsbUJBQUs7QUFDTCwwQkFBWTtBQUNaO0FBQUEsWUFDSjtBQUdBLGdCQUFJLFNBQVMsTUFBTTtBQUNmLDBCQUFZO0FBQUEsWUFDaEIsV0FBVyxhQUFhLFNBQVMsT0FBTyxTQUFTLEtBQU07QUFDbkQsMEJBQVk7QUFBQSxZQUNoQjtBQUdBLGtCQUFNLG1CQUFtQixpQkFBaUI7QUFHMUMsZ0JBQUksQ0FBQyxrQkFBa0I7QUFDbkIsa0JBQUksU0FBUyxRQUFVO0FBQ25CLHdCQUFRLElBQUksS0FBSyxNQUFNLEdBQUcsMEJBQTBCO0FBQUEsY0FDeEQ7QUFDQSxrQkFBSSxTQUFTLFVBQVU7QUFDbkIsd0JBQVEsSUFBSSxLQUFLLE1BQU0sR0FBRyxtQkFBbUI7QUFBQSxjQUNqRDtBQUNBLGtCQUFJLFNBQVMsVUFBSztBQUNkLHdCQUFRLElBQUksS0FBSyxNQUFNLEdBQUcsZ0JBQWdCO0FBQUEsY0FDOUM7QUFDQSxrQkFBSSxTQUFTLEtBQUs7QUFDZCx3QkFBUSxJQUFJLEtBQUssTUFBTSxHQUFHLHNCQUFzQjtBQUFBLGNBQ3BEO0FBQUEsWUFDSjtBQUFBLFVBQ0o7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUVBLGFBQU8sUUFBUSxPQUFPO0FBQUEsSUFDMUI7QUFBQSxFQUNKLEdBQUc7QUFBQSxJQUNDLGFBQWEsT0FBSyxFQUFFO0FBQUEsRUFDeEIsQ0FBQztBQUNMOzs7QUNySEEsc0JBQWdDO0FBVXpCLFNBQVMsc0JBQ1osUUFDQSxXQUNBLGdCQUNXO0FBQ1gsUUFBTSxrQkFBa0IsT0FBTyxpQkFBaUI7QUFDaEQsa0JBQWdCLEtBQUs7QUFFckIsa0JBQWdCLFNBQVMsZUFBZTtBQUd4QywrQkFBUSxpQkFBaUIsU0FBUztBQUVsQyxrQkFBZ0IsYUFBYSxjQUFjLCtDQUE0QztBQUN2RixrQkFBZ0IsYUFBYSx5QkFBeUIsS0FBSztBQUczRCx3QkFBc0IsaUJBQWlCLFNBQVM7QUFHaEQsa0JBQWdCLGFBQWEsTUFBTTtBQUMvQixtQkFBZTtBQUFBLEVBQ25CLENBQUM7QUFFRCxTQUFPO0FBQ1g7QUFTTyxTQUFTLHdCQUNaLFFBQ0EsV0FDQSxnQkFDVztBQUVYLFFBQU0sV0FBVyxTQUFTLGNBQWMsUUFBUTtBQUNoRCxXQUFTLEtBQUs7QUFDZCxXQUFTLFlBQVk7QUFDckIsV0FBUyxhQUFhLGNBQWMsK0NBQTRDO0FBR2hGLCtCQUFRLFVBQVUsU0FBUztBQUczQiwwQkFBd0IsVUFBVSxTQUFTO0FBRzNDLFdBQVMsaUJBQWlCLFNBQVMsQ0FBQyxVQUFVO0FBQzFDLFVBQU0sZUFBZTtBQUNyQixtQkFBZTtBQUFBLEVBQ25CLENBQUM7QUFHRCxRQUFNLGFBQWEsU0FBUyxjQUFjLDhCQUE4QjtBQUN4RSxNQUFJLFlBQVk7QUFDWixVQUFNLFlBQVksV0FBVztBQUM3QixRQUFJLGFBQWEsVUFBVSxVQUFVLFNBQVMsY0FBYyxHQUFHO0FBQzNELGdCQUFVLFFBQVEsUUFBUTtBQUFBLElBQzlCO0FBQUEsRUFDSjtBQUVBLFNBQU87QUFDWDtBQVFPLFNBQVMsc0JBQXNCLFVBQThCLFdBQTBCO0FBQzFGLE1BQUksQ0FBQyxTQUFVO0FBRWYsTUFBSSxXQUFXO0FBQ1gsYUFBUyxTQUFTLFdBQVc7QUFBQSxFQUNqQyxPQUFPO0FBQ0gsYUFBUyxZQUFZLFdBQVc7QUFBQSxFQUNwQztBQUNKO0FBT08sU0FBUyx3QkFBd0IsVUFBOEIsV0FBMEI7QUFDNUYsTUFBSSxDQUFDLFNBQVU7QUFFZixNQUFJLFdBQVc7QUFDWCxhQUFTLFNBQVMsV0FBVztBQUFBLEVBQ2pDLE9BQU87QUFDSCxhQUFTLFlBQVksV0FBVztBQUFBLEVBQ3BDO0FBQ0o7QUFNTyxTQUFTLHNCQUFzQixVQUFvQztBQUN0RSxNQUFJLFVBQVU7QUFDVixhQUFTLE9BQU87QUFBQSxFQUNwQjtBQUNKO0FBTU8sU0FBUyx3QkFBd0IsVUFBb0M7QUFDeEUsTUFBSSxVQUFVO0FBQ1YsYUFBUyxPQUFPO0FBQUEsRUFDcEI7QUFDSjs7O0FDekhPLElBQWUsWUFBZixNQUFxRDtBQUFBLEVBQXJEO0FBT0gsU0FBTyxVQUFtQjtBQUMxQixTQUFVLFNBQWlCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVVwQixVQUFVLFFBQXNCO0FBQ25DLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFpQlUsbUJBQW1CLGVBQWtDO0FBQzNELFdBQU8sY0FBYztBQUFBLE1BQUssWUFDdEIsS0FBSyxPQUFPLFdBQVcsTUFBTTtBQUFBLElBQ2pDO0FBQUEsRUFDSjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sV0FBb0I7QUFDdkIsV0FBTyxLQUFLO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWFVLG9CQUNOLE1BQ0EsU0FDQSxhQUNNO0FBQ04sUUFBSSxPQUFPLGdCQUFnQixVQUFVO0FBQ2pDLGFBQU8sS0FBSyxRQUFRLFNBQVMsV0FBVztBQUFBLElBQzVDLE9BQU87QUFDSCxhQUFPLEtBQUssUUFBUSxTQUFTLFdBQVc7QUFBQSxJQUM1QztBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtVLHdCQUNOLE1BQ0EsWUFJTTtBQUNOLFdBQU8sV0FBVyxPQUFPLENBQUMsUUFBUSxjQUFjO0FBQzVDLFVBQUksT0FBTyxVQUFVLGdCQUFnQixVQUFVO0FBQzNDLGVBQU8sS0FBSyxvQkFBb0IsUUFBUSxVQUFVLFNBQVMsVUFBVSxXQUFXO0FBQUEsTUFDcEYsT0FBTztBQUNILGVBQU8sS0FBSyxvQkFBb0IsUUFBUSxVQUFVLFNBQVMsVUFBVSxXQUFXO0FBQUEsTUFDcEY7QUFBQSxJQUNKLEdBQUcsSUFBSTtBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTVUsZUFBZSxNQUFjLFVBQTJCO0FBRTlELFVBQU0sZ0JBQWdCLEtBQUssVUFBVSxLQUFLLElBQUksR0FBRyxXQUFXLEVBQUUsR0FBRyxRQUFRO0FBQ3pFLFVBQU0sZUFBZSxLQUFLLFVBQVUsVUFBVSxLQUFLLElBQUksS0FBSyxRQUFRLFdBQVcsRUFBRSxDQUFDO0FBR2xGLFFBQUksY0FBYyxTQUFTLEdBQUcsS0FBSyxhQUFhLFNBQVMsR0FBRyxHQUFHO0FBQzNELGFBQU87QUFBQSxJQUNYO0FBR0EsUUFBSSxjQUFjLFNBQVMsR0FBRyxLQUFLLGFBQWEsU0FBUyxHQUFHLEdBQUc7QUFDM0QsYUFBTztBQUFBLElBQ1g7QUFFQSxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1UsY0FBYyxVQUFrQixXQUF5QjtBQUMvRCxRQUFJLGFBQWEsV0FBVztBQUN4QixjQUFRLE1BQU0sSUFBSSxLQUFLLEVBQUUsTUFBTSxRQUFRLGFBQVEsU0FBUyxHQUFHO0FBQUEsSUFDL0Q7QUFBQSxFQUNKO0FBQ0o7OztBQzNITyxJQUFNLGdCQUFnQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSzNCLHFCQUFxQjtBQUFBLEVBQ3JCLGdCQUFnQjtBQUFBLEVBQ2hCLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1kLFVBQVU7QUFBQSxFQUNWLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1QLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQTtBQUFBLEVBSVAsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBLEVBRVAsT0FBTztBQUFBO0FBQUEsRUFDUCxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1MLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLFlBQVk7QUFBQTtBQUFBLEVBQ1osT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9QLE9BQU87QUFBQSxFQUNQLEtBQUs7QUFBQTtBQUFBLEVBQ0wsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRTixPQUFPO0FBQUE7QUFBQSxFQUNQLGNBQWM7QUFBQTtBQUFBLEVBQ2QsU0FBUztBQUFBO0FBQUEsRUFDVCxXQUFXO0FBQUE7QUFBQSxFQUNYLFFBQVE7QUFBQTtBQUFBLEVBQ1IsYUFBYTtBQUFBO0FBQUEsRUFDYixZQUFZO0FBQUE7QUFBQSxFQUNaLE1BQU07QUFBQTtBQUFBLEVBQ04sT0FBTztBQUFBO0FBQUEsRUFDUCxLQUFLO0FBQUE7QUFDUDtBQVVPLElBQU0sbUJBQW1CO0FBQUEsRUFFOUIsaUJBQWlCO0FBQUE7QUFBQSxFQUNqQixlQUFlO0FBQUE7QUFBQSxFQUNmLGFBQWE7QUFBQTtBQUFBLEVBQ2IsaUJBQWlCO0FBQUE7QUFBQSxFQUNqQixzQkFBc0I7QUFBQTtBQUFBLEVBQ3RCLFlBQVk7QUFBQTtBQUFBLEVBQ1osZUFBZTtBQUFBO0FBQUE7QUFBQSxFQUdmLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLGdCQUFnQjtBQUNsQjs7O0FDdkZPLElBQU0sV0FBTixjQUF1QixVQUFVO0FBQUEsRUFBakM7QUFBQTtBQUNILFNBQWdCLEtBQUs7QUFDckIsU0FBZ0IsT0FBTztBQUN2QixTQUFnQixjQUFjO0FBQzlCLFNBQWdCLFdBQVc7QUFDM0IsU0FBZ0IsV0FBVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLcEIsSUFBSSxNQUFzQjtBQUM3QixXQUFPLEtBQUs7QUFBQSxNQUNSO0FBQUEsTUFDQSxpQkFBaUI7QUFBQSxNQUNqQixjQUFjO0FBQUEsSUFDbEI7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxlQUFlLE9BQXNCLFFBQXlCO0FBQ2pFLFFBQUksTUFBTSxRQUFRLE9BQU8sQ0FBQyxNQUFNLFdBQVcsQ0FBQyxNQUFNLFNBQVM7QUFDdkQsWUFBTSxTQUFTLE9BQU8sVUFBVTtBQUNoQyxZQUFNLE9BQU8sT0FBTyxRQUFRLE9BQU8sSUFBSTtBQUN2QyxZQUFNLGVBQWUsS0FBSyxVQUFVLEdBQUcsT0FBTyxFQUFFO0FBR2hELFVBQUksYUFBYSxTQUFTLElBQUksR0FBRztBQUU3QixjQUFNLFVBQVUsS0FBSyxVQUFVLEdBQUcsT0FBTyxLQUFLLENBQUMsSUFDaEMsY0FBYyxXQUNkLEtBQUssVUFBVSxPQUFPLEVBQUU7QUFFdkMsZUFBTyxRQUFRLE9BQU8sTUFBTSxPQUFPO0FBQ25DLGVBQU8sVUFBVTtBQUFBLFVBQ2IsTUFBTSxPQUFPO0FBQUEsVUFDYixJQUFJLE9BQU8sS0FBSztBQUFBO0FBQUEsUUFDcEIsQ0FBQztBQUVELGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSjtBQUNBLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxhQUEyQjtBQUM5QixXQUFPO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPLFVBQVUsY0FBYyxRQUFRLHNCQUFtQixjQUFjLFFBQVE7QUFBQSxJQUNwRjtBQUFBLEVBQ0o7QUFDSjs7O0FDdERPLElBQU0sT0FBTixjQUFtQixVQUFVO0FBQUEsRUFBN0I7QUFBQTtBQUNILFNBQWdCLEtBQUs7QUFDckIsU0FBZ0IsT0FBTztBQUN2QixTQUFnQixjQUFjO0FBQzlCLFNBQWdCLFdBQVc7QUFDM0IsU0FBZ0IsV0FBVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLcEIsSUFBSSxNQUFzQjtBQUM3QixVQUFNLGFBQWE7QUFBQTtBQUFBLE1BRWY7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsY0FBYztBQUFBLE1BQy9CO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxLQUFLO0FBQUEsTUFDekM7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFDckMsSUFBSSxjQUFjLEtBQUssTUFDdkIsR0FBRyxjQUFjLEtBQUs7QUFBQSxNQUNoQztBQUFBLElBQ0o7QUFFQSxXQUFPLEtBQUssd0JBQXdCLE1BQU0sVUFBVTtBQUFBLEVBQ3hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxlQUFlLE9BQXNCLFFBQXlCO0FBQ2pFLFFBQUksTUFBTSxRQUFRLE9BQU8sQ0FBQyxNQUFNLFdBQVcsQ0FBQyxNQUFNLFNBQVM7QUFDdkQsWUFBTSxTQUFTLE9BQU8sVUFBVTtBQUNoQyxZQUFNLE9BQU8sT0FBTyxRQUFRLE9BQU8sSUFBSTtBQUN2QyxZQUFNLGVBQWUsS0FBSyxVQUFVLEdBQUcsT0FBTyxFQUFFO0FBR2hELFVBQUksYUFBYSxTQUFTLEdBQUcsR0FBRztBQUM1QixjQUFNLGNBQWMsS0FBSyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFDNUMsSUFBSSxjQUFjLEtBQUssTUFDdkIsR0FBRyxjQUFjLEtBQUs7QUFFNUIsY0FBTSxVQUFVLEtBQUssVUFBVSxHQUFHLE9BQU8sS0FBSyxDQUFDLElBQ2hDLGNBQ0EsS0FBSyxVQUFVLE9BQU8sRUFBRTtBQUV2QyxlQUFPLFFBQVEsT0FBTyxNQUFNLE9BQU87QUFDbkMsZUFBTyxVQUFVO0FBQUEsVUFDYixNQUFNLE9BQU87QUFBQSxVQUNiLElBQUksT0FBTyxLQUFLLElBQUksWUFBWTtBQUFBLFFBQ3BDLENBQUM7QUFFRCxlQUFPO0FBQUEsTUFDWDtBQUFBLElBQ0o7QUFDQSxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sYUFBMkI7QUFDOUIsVUFBTSxhQUFhLEtBQUssbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksYUFBUTtBQUU3RCxXQUFPO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPLGtCQUFlLGNBQWMsS0FBSyxPQUFPLFVBQVU7QUFBQSxJQUM5RDtBQUFBLEVBQ0o7QUFDSjs7O0FDN0VPLElBQU0sU0FBTixjQUFxQixVQUFVO0FBQUEsRUFBL0I7QUFBQTtBQUNILFNBQWdCLEtBQUs7QUFDckIsU0FBZ0IsT0FBTztBQUN2QixTQUFnQixjQUFjO0FBQzlCLFNBQWdCLFdBQVc7QUFDM0IsU0FBZ0IsV0FBVztBQUUzQixTQUFPLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1WLElBQUksTUFBc0I7QUFFN0IsVUFBTSxhQUFhO0FBQUE7QUFBQSxNQUVmO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQ3JDLEtBQUssY0FBYyxLQUFLLE1BQ3hCLEtBQUssY0FBYyxLQUFLO0FBQUEsTUFDbEM7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLEtBQUs7QUFBQSxNQUN6QztBQUFBLElBQ0o7QUFFQSxXQUFPLEtBQUssd0JBQXdCLE1BQU0sVUFBVTtBQUFBLEVBQ3hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxhQUEyQjtBQUM5QixXQUFPO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPLEdBQUcsY0FBYyxLQUFLO0FBQUEsRUFBbUIsY0FBYyxLQUFLO0FBQUEsRUFBb0IsY0FBYyxLQUFLO0FBQUEsSUFDOUc7QUFBQSxFQUNKO0FBQ0o7OztBQzFDTyxJQUFNLHFCQUFOLGNBQWlDLFVBQVU7QUFBQSxFQUEzQztBQUFBO0FBQ0gsU0FBZ0IsS0FBSztBQUNyQixTQUFnQixPQUFPO0FBQ3ZCLFNBQWdCLGNBQWM7QUFDOUIsU0FBZ0IsV0FBVztBQUMzQixTQUFnQixXQUFXO0FBRTNCLFNBQU8sVUFBVTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtWLElBQUksTUFBc0I7QUFFN0IsUUFBSSxDQUFDLEtBQUssbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDbEMsYUFBTztBQUFBLElBQ1g7QUFFQSxVQUFNLGFBQWE7QUFBQTtBQUFBLE1BRWY7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsR0FBRyxjQUFjLG1CQUFtQjtBQUFBLE1BQ3JEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEdBQUcsY0FBYyxjQUFjO0FBQUEsTUFDaEQ7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLG1CQUFtQjtBQUFBLE1BQ3ZEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxtQkFBbUI7QUFBQSxNQUN2RDtBQUFBLElBQ0o7QUFFQSxXQUFPLEtBQUssd0JBQXdCLE1BQU0sVUFBVTtBQUFBLEVBQ3hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxlQUFlLE9BQXNCLFFBQXlCO0FBQ2pFLFFBQUksQ0FBQyxLQUFLLG1CQUFtQixDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ2xDLGFBQU87QUFBQSxJQUNYO0FBRUEsVUFBTSxpQkFBeUM7QUFBQSxNQUMzQyxLQUFLLGNBQWM7QUFBQSxNQUNuQixLQUFLLGNBQWM7QUFBQSxNQUNuQixLQUFLLGNBQWM7QUFBQSxNQUNuQixLQUFLLGNBQWM7QUFBQSxJQUN2QjtBQUVBLFFBQUksZUFBZSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sV0FBVyxDQUFDLE1BQU0sU0FBUztBQUMvRCxZQUFNLFNBQVMsT0FBTyxVQUFVO0FBQ2hDLFlBQU0sT0FBTyxPQUFPLFFBQVEsT0FBTyxJQUFJO0FBQ3ZDLFlBQU0sZUFBZSxLQUFLLFVBQVUsR0FBRyxPQUFPLEVBQUU7QUFHaEQsWUFBTSxjQUFjLGFBQWEsUUFBUSxRQUFRLEVBQUU7QUFDbkQsWUFBTSxZQUFZLGVBQWUsTUFBTSxHQUFHO0FBRTFDLFlBQU0sVUFBVSxjQUFjLFlBQVksTUFBTSxNQUFNLEtBQUssVUFBVSxPQUFPLEVBQUU7QUFFOUUsYUFBTyxRQUFRLE9BQU8sTUFBTSxPQUFPO0FBQ25DLGFBQU8sVUFBVTtBQUFBLFFBQ2IsTUFBTSxPQUFPO0FBQUEsUUFDYixJQUFJLFlBQVksU0FBUztBQUFBO0FBQUEsTUFDN0IsQ0FBQztBQUVELGFBQU87QUFBQSxJQUNYO0FBRUEsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtHLGFBQTJCO0FBQzlCLFdBQU87QUFBQSxNQUNILFFBQVE7QUFBQSxNQUNSLE9BQU8sWUFBWSxjQUFjLEtBQUssR0FBRyxjQUFjLG1CQUFtQixVQUFVLGNBQWMsbUJBQW1CLEdBQUcsY0FBYyxLQUFLLFFBQVEsY0FBYyxLQUFLO0FBQUEsSUFDMUs7QUFBQSxFQUNKO0FBQ0E7OztBQzdGTyxJQUFNLHFCQUFOLGNBQWlDLFVBQVU7QUFBQSxFQUEzQztBQUFBO0FBQ0gsU0FBZ0IsS0FBSztBQUNyQixTQUFnQixPQUFPO0FBQ3ZCLFNBQWdCLGNBQWM7QUFDOUIsU0FBZ0IsV0FBVztBQUMzQixTQUFnQixXQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtwQixJQUFJLE1BQXNCO0FBQzdCLFVBQU0sYUFBYTtBQUFBO0FBQUEsTUFFZjtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYTtBQUFBLE1BQ2pCO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhO0FBQUEsTUFDakI7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWE7QUFBQSxNQUNqQjtBQUFBO0FBQUEsTUFFQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYTtBQUFBLE1BQ2pCO0FBQUEsSUFDSjtBQUVBLFdBQU8sS0FBSyx3QkFBd0IsTUFBTSxVQUFVO0FBQUEsRUFDeEQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGFBQTJCO0FBQzlCLFdBQU87QUFBQSxNQUNILFFBQVE7QUFBQSxNQUNSLE9BQU87QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUNKOzs7QUM1Q08sSUFBTSxPQUFOLGNBQW1CLFVBQVU7QUFBQSxFQUE3QjtBQUFBO0FBQ0gsU0FBZ0IsS0FBSztBQUNyQixTQUFnQixPQUFPO0FBQ3ZCLFNBQWdCLGNBQWM7QUFDOUIsU0FBZ0IsV0FBVztBQUMzQixTQUFnQixXQUFXO0FBRTNCLFNBQU8sVUFBVTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLVixJQUFJLE1BQXNCO0FBQzdCLFVBQU0sYUFBYTtBQUFBO0FBQUEsTUFFZjtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDbEQ7QUFBQTtBQUFBLE1BR0E7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLGNBQWM7QUFBQSxNQUNsRDtBQUFBO0FBQUEsTUFFQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUE7QUFBQSxNQUdBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDbEQ7QUFBQTtBQUFBO0FBQUEsTUFJQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDbEQ7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLGNBQWM7QUFBQSxNQUNsRDtBQUFBO0FBQUEsTUFFQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDbEQ7QUFBQTtBQUFBLE1BR0E7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLGNBQWM7QUFBQSxNQUNsRDtBQUFBO0FBQUEsTUFHQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxjQUFjO0FBQUEsTUFDbEQ7QUFBQTtBQUFBLE1BR0E7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLGNBQWM7QUFBQSxNQUNsRDtBQUFBO0FBQUEsTUFHQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsY0FBYztBQUFBLE1BQ2xEO0FBQUEsSUFDSjtBQUVBLFdBQU8sS0FBSyx3QkFBd0IsTUFBTSxVQUFVO0FBQUEsRUFDeEQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtVLGVBQWUsTUFBYyxVQUEyQjtBQUM5RCxRQUFJLENBQUMsTUFBTSxlQUFlLE1BQU0sUUFBUSxHQUFHO0FBQ3ZDLGFBQU87QUFBQSxJQUNYO0FBR0EsVUFBTSxnQkFBZ0IsS0FBSyxVQUFVLEtBQUssSUFBSSxHQUFHLFdBQVcsQ0FBQyxHQUFHLFFBQVE7QUFDeEUsVUFBTSxlQUFlLEtBQUssVUFBVSxVQUFVLEtBQUssSUFBSSxLQUFLLFFBQVEsV0FBVyxDQUFDLENBQUM7QUFHakYsUUFBSSxjQUFjLE1BQU0sZUFBZSxLQUFLLGFBQWEsTUFBTSxTQUFTLEdBQUc7QUFDdkUsYUFBTztBQUFBLElBQ1g7QUFFQSxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sYUFBMkI7QUFDOUIsV0FBTztBQUFBLE1BQ0gsUUFBUTtBQUFBLE1BQ1IsT0FBTyxxQkFBa0IsY0FBYyxjQUFjLHNCQUFtQixjQUFjLGNBQWMsb0JBQW9CLGNBQWMsY0FBYyxlQUFlLGNBQWMsY0FBYyxnQkFBZ0IsY0FBYyxjQUFjO0FBQUEsSUFDL087QUFBQSxFQUNKO0FBQ0o7OztBQ25JTyxJQUFNLFlBQU4sY0FBd0IsVUFBVTtBQUFBLEVBQWxDO0FBQUE7QUFDSCxTQUFnQixLQUFLO0FBQ3JCLFNBQWdCLE9BQU87QUFDdkIsU0FBZ0IsY0FBYztBQUM5QixTQUFnQixXQUFXO0FBQzNCLFNBQWdCLFdBQVc7QUFFM0IsU0FBTyxVQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtWLElBQUksTUFBc0I7QUFDN0IsVUFBTSxhQUFhO0FBQUE7QUFBQSxNQUVmO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLEtBQUssY0FBYyxLQUFLO0FBQUEsTUFDekM7QUFBQTtBQUFBLE1BRUE7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsS0FBSyxjQUFjLEtBQUs7QUFBQSxNQUN6QztBQUFBO0FBQUEsTUFFQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxLQUFLLGNBQWMsS0FBSyxLQUFLLGNBQWMsS0FBSztBQUFBLE1BQ2pFO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLE9BQU8sY0FBYyxLQUFLO0FBQUEsTUFDM0M7QUFBQSxJQUNKO0FBRUEsV0FBTyxLQUFLLHdCQUF3QixNQUFNLFVBQVU7QUFBQSxFQUN4RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1UsZUFBZSxNQUFjLFVBQTJCO0FBQzlELFFBQUksQ0FBQyxNQUFNLGVBQWUsTUFBTSxRQUFRLEdBQUc7QUFDdkMsYUFBTztBQUFBLElBQ1g7QUFHQSxVQUFNLGdCQUFnQixLQUFLLFVBQVUsS0FBSyxJQUFJLEdBQUcsV0FBVyxFQUFFLEdBQUcsUUFBUTtBQUN6RSxVQUFNLGVBQWUsS0FBSyxVQUFVLFVBQVUsS0FBSyxJQUFJLEtBQUssUUFBUSxXQUFXLEVBQUUsQ0FBQztBQUdsRixRQUFJLGNBQWMsTUFBTSxXQUFXLEtBQUssYUFBYSxNQUFNLFdBQVcsR0FBRztBQUNyRSxhQUFPO0FBQUEsSUFDWDtBQUVBLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxhQUEyQjtBQUM5QixXQUFPO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPLHNCQUFtQixjQUFjLEtBQUssa0JBQWtCLGNBQWMsS0FBSyxxQkFBcUIsY0FBYyxLQUFLLE9BQU8sY0FBYyxLQUFLO0FBQUEsSUFDeEo7QUFBQSxFQUNKO0FBQ0o7OztBQ3BFTyxJQUFNLGNBQU4sY0FBMEIsVUFBVTtBQUFBLEVBQXBDO0FBQUE7QUFDSCxTQUFnQixLQUFLO0FBQ3JCLFNBQWdCLE9BQU87QUFDdkIsU0FBZ0IsY0FBYztBQUM5QixTQUFnQixXQUFXO0FBQzNCLFNBQWdCLFdBQVc7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3BCLElBQUksTUFBc0I7QUFDN0IsUUFBSSxLQUFLLG1CQUFtQixDQUFDLElBQUksQ0FBQyxHQUFHO0FBQ2pDLGFBQU8sS0FBSyxnQkFBZ0IsSUFBSTtBQUFBLElBQ3BDLE9BQU87QUFDSCxhQUFPLEtBQUssaUJBQWlCLElBQUk7QUFBQSxJQUNyQztBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGdCQUFnQixNQUFzQjtBQUMxQyxRQUFJLFNBQVM7QUFDYixRQUFJLFVBQVU7QUFHZCxhQUFTLE9BQU8sUUFBUSxNQUFNLE1BQU07QUFDaEMsVUFBSSxDQUFDLFNBQVM7QUFDVixrQkFBVTtBQUNWLGVBQU8sR0FBRyxjQUFjLEtBQUssR0FBRyxjQUFjLG1CQUFtQjtBQUFBLE1BQ3JFLE9BQU87QUFDSCxrQkFBVTtBQUNWLGVBQU8sR0FBRyxjQUFjLG1CQUFtQixHQUFHLGNBQWMsS0FBSztBQUFBLE1BQ3JFO0FBQUEsSUFDSixDQUFDO0FBR0QsYUFBUyxPQUFPLFFBQVEsTUFBTSxjQUFjLEtBQUs7QUFFakQsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGlCQUFpQixNQUFzQjtBQUMzQyxRQUFJLFNBQVM7QUFDYixRQUFJLFVBQVU7QUFHZCxhQUFTLE9BQU8sUUFBUSxNQUFNLE1BQU07QUFDaEMsVUFBSSxDQUFDLFNBQVM7QUFDVixrQkFBVTtBQUNWLGVBQU8sY0FBYztBQUFBLE1BQ3pCLE9BQU87QUFDSCxrQkFBVTtBQUNWLGVBQU8sY0FBYztBQUFBLE1BQ3pCO0FBQUEsSUFDSixDQUFDO0FBR0QsYUFBUyxPQUFPLFFBQVEsVUFBVSxLQUFLLGNBQWMsS0FBSyxFQUFFO0FBRTVELFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxhQUEyQjtBQUM5QixRQUFJLEtBQUssbUJBQW1CLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDakMsYUFBTztBQUFBLFFBQ0gsUUFBUTtBQUFBLFFBQ1IsT0FBTyxZQUFZLGNBQWMsS0FBSyxHQUFHLGNBQWMsbUJBQW1CLFVBQVUsY0FBYyxtQkFBbUIsR0FBRyxjQUFjLEtBQUssUUFBUSxjQUFjLEtBQUs7QUFBQSxNQUMxSztBQUFBLElBQ0osT0FBTztBQUNILGFBQU87QUFBQSxRQUNILFFBQVE7QUFBQSxRQUNSLE9BQU8sV0FBVyxjQUFjLEtBQUssUUFBUSxjQUFjLEtBQUssVUFBVSxjQUFjLEtBQUs7QUFBQSxNQUNqRztBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0o7OztBQ2hGTyxJQUFNLGFBQU4sY0FBeUIsVUFBVTtBQUFBLEVBQW5DO0FBQUE7QUFDSCxTQUFnQixLQUFLO0FBQ3JCLFNBQWdCLE9BQU87QUFDdkIsU0FBZ0IsY0FBYztBQUM5QixTQUFnQixXQUFXO0FBQzNCLFNBQWdCLFdBQVc7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNcEIsSUFBSSxNQUFzQjtBQUc3QixXQUFPLEtBQUs7QUFBQSxNQUNSO0FBQUEsTUFDQTtBQUFBLE1BQ0EsS0FBSyxjQUFjLEtBQUs7QUFBQSxJQUM1QjtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGVBQWUsT0FBc0IsUUFBeUI7QUFDakUsUUFBSSxNQUFNLFFBQVEsT0FBTyxDQUFDLE1BQU0sV0FBVyxDQUFDLE1BQU0sU0FBUztBQUN2RCxZQUFNLFNBQVMsT0FBTyxVQUFVO0FBQ2hDLFlBQU0sT0FBTyxPQUFPLFFBQVEsT0FBTyxJQUFJO0FBQ3ZDLFlBQU0sZUFBZSxLQUFLLFVBQVUsR0FBRyxPQUFPLEVBQUU7QUFHaEQsWUFBTSxXQUFXLGFBQWEsTUFBTSxFQUFFO0FBQ3RDLFVBQUksWUFBWSxXQUFXLEtBQUssUUFBUSxHQUFHO0FBRXZDLGNBQU0sVUFBVSxlQUFlLGNBQWMsUUFBUSxLQUFLLFVBQVUsT0FBTyxFQUFFO0FBRTdFLGVBQU8sUUFBUSxPQUFPLE1BQU0sT0FBTztBQUNuQyxlQUFPLFVBQVU7QUFBQSxVQUNiLE1BQU0sT0FBTztBQUFBLFVBQ2IsSUFBSSxPQUFPLEtBQUs7QUFBQSxRQUNwQixDQUFDO0FBRUQsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGFBQTJCO0FBQzlCLFdBQU87QUFBQSxNQUNILFFBQVE7QUFBQSxNQUNSLE9BQU8sSUFBSSxjQUFjLEtBQUssZUFBZSxjQUFjLEtBQUssZUFBZSxjQUFjLEtBQUs7QUFBQSxJQUN0RztBQUFBLEVBQ0o7QUFDSjs7O0FDM0RPLElBQU0sWUFBTixjQUF3QixVQUFVO0FBQUEsRUFBbEM7QUFBQTtBQUNILFNBQWdCLEtBQUs7QUFDckIsU0FBZ0IsT0FBTztBQUN2QixTQUFnQixjQUFjO0FBQzlCLFNBQWdCLFdBQVc7QUFDM0IsU0FBZ0IsV0FBVztBQUUzQixTQUFPLFVBQVU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1YsSUFBSSxNQUFzQjtBQUM3QixVQUFNLGFBQWE7QUFBQTtBQUFBLE1BRWY7QUFBQSxRQUNJLFNBQVM7QUFBQSxRQUNULGFBQWEsY0FBYztBQUFBLE1BQy9CO0FBQUE7QUFBQSxNQUVBO0FBQUEsUUFDSSxTQUFTO0FBQUEsUUFDVCxhQUFhLGNBQWM7QUFBQSxNQUMvQjtBQUFBO0FBQUEsTUFFQTtBQUFBLFFBQ0ksU0FBUztBQUFBLFFBQ1QsYUFBYSxjQUFjO0FBQUEsTUFDL0I7QUFBQSxJQUNKO0FBRUEsV0FBTyxLQUFLLHdCQUF3QixNQUFNLFVBQVU7QUFBQSxFQUN4RDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1UsZUFBZSxNQUFjLFVBQTJCO0FBQzlELFFBQUksQ0FBQyxNQUFNLGVBQWUsTUFBTSxRQUFRLEdBQUc7QUFDdkMsYUFBTztBQUFBLElBQ1g7QUFHQSxVQUFNLGdCQUFnQixLQUFLLFVBQVUsS0FBSyxJQUFJLEdBQUcsV0FBVyxFQUFFLEdBQUcsUUFBUTtBQUN6RSxVQUFNLGVBQWUsS0FBSyxVQUFVLFVBQVUsS0FBSyxJQUFJLEtBQUssUUFBUSxXQUFXLEVBQUUsQ0FBQztBQUdsRixRQUFJLGNBQWMsU0FBUyxNQUFNLEtBQUssY0FBYyxTQUFTLE1BQU0sR0FBRztBQUNsRSxhQUFPO0FBQUEsSUFDWDtBQUdBLFFBQUksY0FBYyxTQUFTLEdBQUcsS0FBSyxhQUFhLFNBQVMsR0FBRyxHQUFHO0FBQzNELGFBQU87QUFBQSxJQUNYO0FBRUEsV0FBTztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGFBQTJCO0FBQzlCLFdBQU87QUFBQSxNQUNILFFBQVE7QUFBQSxNQUNSLE9BQU8sYUFBYSxjQUFjLElBQUksaUJBQWlCLGNBQWMsR0FBRyxtQkFBbUIsY0FBYyxLQUFLO0FBQUEsSUFDbEg7QUFBQSxFQUNKO0FBQ0o7OztBQ3JDTyxTQUFTLGtCQUFzQztBQUNsRCxTQUFPO0FBQUE7QUFBQSxJQUVILElBQUksU0FBUztBQUFBO0FBQUEsSUFDYixJQUFJLEtBQUs7QUFBQTtBQUFBLElBQ1QsSUFBSSxtQkFBbUI7QUFBQTtBQUFBLElBQ3ZCLElBQUksWUFBWTtBQUFBO0FBQUEsSUFDaEIsSUFBSSxXQUFXO0FBQUE7QUFBQSxJQUNmLElBQUksbUJBQW1CO0FBQUE7QUFBQSxJQUN2QixJQUFJLEtBQUs7QUFBQTtBQUFBLElBQ1QsSUFBSSxVQUFVO0FBQUE7QUFBQSxJQUNkLElBQUksVUFBVTtBQUFBO0FBQUEsSUFDZCxJQUFJLE9BQU87QUFBQTtBQUFBLEVBQ2Y7QUFDSjs7O0FDekNPLElBQU0sbUJBQU4sTUFBdUI7QUFBQSxFQUkxQixZQUFZLFVBQThCO0FBSDFDLFNBQVEsU0FBd0Msb0JBQUksSUFBSTtBQUlwRCxTQUFLLFdBQVc7QUFDaEIsU0FBSyxpQkFBaUI7QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUJBQXlCO0FBQzdCLFVBQU0sWUFBWSxnQkFBZ0I7QUFFbEMsY0FBVSxRQUFRLFdBQVM7QUFDdkIsV0FBSyxPQUFPLElBQUksTUFBTSxJQUFJLEtBQUs7QUFHL0IsVUFBSSxNQUFNLE1BQU0sS0FBSyxTQUFTLFFBQVE7QUFDbEMsY0FBTSxVQUFVLEtBQUssU0FBUyxPQUFPLE1BQU0sRUFBRTtBQUFBLE1BQ2pEO0FBR0EsVUFBSSxNQUFNLFdBQVc7QUFDakIsY0FBTSxVQUFVLEtBQUssU0FBUyxNQUFNO0FBQUEsTUFDeEM7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxlQUFlLFVBQW9DO0FBQ3RELFNBQUssV0FBVztBQUVoQixTQUFLLE9BQU8sUUFBUSxXQUFTO0FBRXpCLFVBQUksTUFBTSxNQUFNLFNBQVMsUUFBUTtBQUM3QixjQUFNLFVBQVUsU0FBUyxPQUFPLE1BQU0sRUFBRTtBQUFBLE1BQzVDO0FBR0EsVUFBSSxNQUFNLFdBQVc7QUFDakIsY0FBTSxVQUFVLFNBQVMsTUFBTTtBQUFBLE1BQ25DO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sWUFBZ0M7QUFDbkMsV0FBTyxNQUFNLEtBQUssS0FBSyxPQUFPLE9BQU8sQ0FBQyxFQUNqQyxLQUFLLENBQUMsR0FBRyxNQUFNLEVBQUUsV0FBVyxFQUFFLFFBQVE7QUFBQSxFQUMvQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sbUJBQXVDO0FBQzFDLFdBQU8sS0FBSyxVQUFVLEVBQUUsT0FBTyxXQUFTLE1BQU0sT0FBTztBQUFBLEVBQ3pEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxvQkFBb0IsVUFBc0M7QUFDN0QsV0FBTyxLQUFLLFVBQVUsRUFBRSxPQUFPLFdBQVMsTUFBTSxhQUFhLFFBQVE7QUFBQSxFQUN2RTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sU0FBUyxJQUEwQztBQUN0RCxXQUFPLEtBQUssT0FBTyxJQUFJLEVBQUU7QUFBQSxFQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sWUFBWSxNQUFzQjtBQUNyQyxVQUFNLGdCQUFnQixLQUFLLGlCQUFpQjtBQUU1QyxXQUFPLGNBQWMsT0FBTyxDQUFDLGFBQWEsVUFBVTtBQUNoRCxVQUFJO0FBQ0EsZUFBTyxNQUFNLElBQUksV0FBVztBQUFBLE1BQ2hDLFNBQVMsT0FBTztBQUNaLGdCQUFRLEtBQUssMkNBQTJDLE1BQU0sRUFBRSxLQUFLLEtBQUs7QUFDMUUsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLEdBQUcsSUFBSTtBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLHVCQUF1QixNQUFnQztBQUMxRCxVQUFNLFdBQVc7QUFDakIsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUI7QUFDNUMsVUFBTSxhQUF1QixDQUFDO0FBQzlCLFFBQUksbUJBQW1CO0FBRXZCLFVBQU0sWUFBWSxjQUFjLE9BQU8sQ0FBQyxhQUFhLFVBQVU7QUFDM0QsVUFBSTtBQUNBLGNBQU0sWUFBWSxNQUFNLElBQUksV0FBVztBQUN2QyxZQUFJLGNBQWMsYUFBYTtBQUMzQixxQkFBVyxLQUFLLE1BQU0sRUFBRTtBQUN4QjtBQUFBLFFBQ0o7QUFDQSxlQUFPO0FBQUEsTUFDWCxTQUFTLE9BQU87QUFDWixnQkFBUSxLQUFLLDJDQUEyQyxNQUFNLEVBQUUsS0FBSyxLQUFLO0FBQzFFLGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSixHQUFHLElBQUk7QUFFUCxXQUFPO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxlQUFlLE9BQXNCLFFBQXlCO0FBQ2pFLFFBQUksQ0FBQyxLQUFLLFNBQVMsMEJBQTBCO0FBQ3pDLGFBQU87QUFBQSxJQUNYO0FBRUEsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUI7QUFFNUMsZUFBVyxTQUFTLGVBQWU7QUFDL0IsVUFBSSxNQUFNLGdCQUFnQjtBQUN0QixZQUFJO0FBQ0EsY0FBSSxNQUFNLGVBQWUsT0FBTyxNQUFNLEdBQUc7QUFDckMsbUJBQU87QUFBQSxVQUNYO0FBQUEsUUFDSixTQUFTLE9BQU87QUFDWixrQkFBUSxLQUFLLHNEQUFzRCxNQUFNLEVBQUUsS0FBSyxLQUFLO0FBQUEsUUFDekY7QUFBQSxNQUNKO0FBQUEsSUFDSjtBQUVBLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTyxZQUFZLFNBQWlCLFNBQTJCO0FBQzNELFVBQU0sUUFBUSxLQUFLLE9BQU8sSUFBSSxPQUFPO0FBQ3JDLFFBQUksT0FBTztBQUNQLFlBQU0sVUFBVTtBQUNoQixXQUFLLFNBQVMsT0FBTyxPQUFPLElBQUk7QUFDaEMsYUFBTztBQUFBLElBQ1g7QUFDQSxXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS08sZUFBZSxVQUFrQixTQUEwQjtBQUM5RCxVQUFNLGlCQUFpQixLQUFLLG9CQUFvQixRQUFRO0FBRXhELG1CQUFlLFFBQVEsV0FBUztBQUM1QixZQUFNLFVBQVU7QUFDaEIsV0FBSyxTQUFTLE9BQU8sTUFBTSxFQUFFLElBQUk7QUFBQSxJQUNyQyxDQUFDO0FBRUQsV0FBTyxlQUFlO0FBQUEsRUFDMUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtPLGtCQUF3QjtBQUMzQixTQUFLLE9BQU8sUUFBUSxXQUFTO0FBRXpCLFlBQU0saUJBQWlCLEtBQUssdUJBQXVCLE1BQU0sRUFBRTtBQUMzRCxZQUFNLFVBQVU7QUFDaEIsV0FBSyxTQUFTLE9BQU8sTUFBTSxFQUFFLElBQUk7QUFBQSxJQUNyQyxDQUFDO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsdUJBQXVCLFNBQTBCO0FBQ3JELFVBQU0sd0JBQXdCLENBQUMsWUFBWSxRQUFRLGtCQUFrQixnQkFBZ0IsT0FBTztBQUM1RixVQUFNLHlCQUF5QixDQUFDLFlBQVksUUFBUSxnQkFBZ0IsT0FBTztBQUUzRSxRQUFJLEtBQUssU0FBUyxPQUFPLFdBQVcsSUFBSSxHQUFHO0FBQ3ZDLGFBQU8sc0JBQXNCLFNBQVMsT0FBTztBQUFBLElBQ2pELE9BQU87QUFDSCxhQUFPLHVCQUF1QixTQUFTLE9BQU87QUFBQSxJQUNsRDtBQUFBLEVBQ0o7QUFHSjs7O0FDek5BLElBQUFDLG1CQUF1RDs7O0FDS2hELElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsMEJBQTBCO0FBQUEsRUFDMUIsUUFBUTtBQUFBLEVBQ1Isa0JBQWtCO0FBQUEsRUFDbEIsaUJBQWlCO0FBQUEsRUFDakIsbUJBQW1CO0FBQUEsRUFDbkIsUUFBUTtBQUFBO0FBQUEsSUFFSixZQUFZO0FBQUE7QUFBQSxJQUNaLFFBQVE7QUFBQTtBQUFBLElBQ1IsZUFBZTtBQUFBO0FBQUEsSUFDZixjQUFjO0FBQUE7QUFBQSxJQUNkLHNCQUFzQjtBQUFBO0FBQUEsSUFDdEIsc0JBQXNCO0FBQUE7QUFBQSxJQUN0QixRQUFRO0FBQUE7QUFBQSxJQUNSLGFBQWE7QUFBQTtBQUFBLElBQ2IsVUFBVTtBQUFBO0FBQUEsSUFDVixhQUFhO0FBQUE7QUFBQSxFQUNqQjtBQUNKO0FBTU8sSUFBTSx3QkFBa0Q7QUFBQSxFQUMzRCxTQUFTO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDSjtBQUFBLEVBQ0EsU0FBUztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxFQUNKO0FBQUEsRUFDQSxTQUFTO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDSjtBQUFBLEVBQ0EsU0FBUztBQUFBLElBQ0w7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0o7QUFDSjtBQUtPLElBQU0sZUFBdUM7QUFBQSxFQUNoRCxTQUFTO0FBQUEsRUFDVCxTQUFTO0FBQUEsRUFDVCxTQUFTO0FBQUEsRUFDVCxTQUFTO0FBQ2I7QUFpQ08sU0FBUyxpQkFBaUIsVUFBMkQ7QUF4SDVGO0FBeUhBLFFBQU0sWUFBZ0M7QUFBQSxJQUNsQywyQkFBMEIsY0FBUyw2QkFBVCxZQUFxQyxpQkFBaUI7QUFBQSxJQUNoRixTQUFRLGNBQVMsV0FBVCxZQUFtQixpQkFBaUI7QUFBQSxJQUM1QyxtQkFBa0IsY0FBUyxxQkFBVCxZQUE2QixpQkFBaUI7QUFBQSxJQUNoRSxrQkFBaUIsY0FBUyxvQkFBVCxZQUE0QixpQkFBaUI7QUFBQTtBQUFBLElBQzlELG9CQUFtQixjQUFTLHNCQUFULFlBQThCLGlCQUFpQjtBQUFBO0FBQUEsSUFDbEUsUUFBUSxFQUFFLEdBQUcsaUJBQWlCLFFBQVEsR0FBRyxTQUFTLE9BQU87QUFBQSxFQUM3RDtBQUdJLFNBQU8sS0FBSyxpQkFBaUIsTUFBTSxFQUFFLFFBQVEsYUFBVztBQUNwRCxRQUFJLE9BQU8sVUFBVSxPQUFPLE9BQU8sTUFBTSxXQUFXO0FBQ2hELGdCQUFVLE9BQU8sT0FBTyxJQUFJLGlCQUFpQixPQUFPLE9BQU87QUFBQSxJQUMvRDtBQUFBLEVBQ0osQ0FBQztBQUdELE1BQUksRUFBRSxVQUFVLFVBQVUsd0JBQXdCO0FBQzlDLGNBQVUsU0FBUztBQUFBLEVBQ3ZCO0FBRUEsU0FBTztBQUNYO0FBOEJPLElBQU0saUJBQXlDO0FBQUEsRUFDbEQsZUFBZTtBQUFBLEVBQ2YsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsV0FBVztBQUNmOzs7QURyS08sSUFBTSx1QkFBTixjQUFtQyxrQ0FBaUI7QUFBQSxFQUd6RCxZQUFZLEtBQVUsUUFBMEI7QUFDOUMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDaEI7QUFBQSxFQUVBLFVBQWdCO0FBQ2QsVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBR2xCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sa0NBQStCLENBQUM7QUFHbkUsZ0JBQVksU0FBUyxLQUFLO0FBQUEsTUFDeEIsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ1AsQ0FBQztBQUdELFNBQUssc0JBQXNCLFdBQVc7QUFHdEMsU0FBSyxvQkFBb0IsV0FBVztBQUdwQyxTQUFLLHFCQUFxQixXQUFXO0FBR3JDLFNBQUssZ0JBQWdCLFdBQVc7QUFFaEMsU0FBSyx3QkFBd0IsV0FBVztBQUFBLEVBQzFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxzQkFBc0IsYUFBZ0M7QUFDNUQsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSwrQkFBeUIsQ0FBQztBQUc3RCxRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSw2QkFBMEIsRUFDbEMsUUFBUSxvREFBb0QsRUFDNUQ7QUFBQSxNQUFVLENBQUMsV0FDVixPQUNHLFNBQVMsS0FBSyxPQUFPLFNBQVMsd0JBQXdCLEVBQ3RELFNBQVMsT0FBTyxVQUFVO0FBQ3pCLGFBQUssT0FBTyxTQUFTLDJCQUEyQjtBQUNoRCxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDakMsQ0FBQztBQUFBLElBQ0w7QUFHRixRQUFJLHlCQUFRLFdBQVcsRUFDcEIsUUFBUSxzQkFBc0IsRUFDOUI7QUFBQSxNQUNDO0FBQUEsSUFDRixFQUNDLFlBQVksQ0FBQyxhQUFhO0FBRXpCLGFBQU8sUUFBUSxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUMsUUFBUSxJQUFJLE1BQU07QUFDdkQsaUJBQVMsVUFBVSxRQUFRLElBQUk7QUFBQSxNQUNqQyxDQUFDO0FBRUQsYUFBTyxTQUNKLFNBQVMsS0FBSyxPQUFPLFNBQVMsTUFBTSxFQUNwQyxTQUFTLE9BQU8sVUFBVTtBQUN6QixhQUFLLE9BQU8sU0FBUyxTQUFTO0FBQzlCLGFBQUssc0JBQXNCLEtBQUs7QUFDaEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BRWpDLENBQUM7QUFBQSxJQUNMLENBQUM7QUFHSCxVQUFNLG9CQUFvQixPQUFPLE9BQU8sS0FBSyxPQUFPLFNBQVMsTUFBTSxFQUFFO0FBQUEsTUFDbkU7QUFBQSxJQUNGLEVBQUU7QUFDRixVQUFNLG1CQUFtQixPQUFPLEtBQUssS0FBSyxPQUFPLFNBQVMsTUFBTSxFQUFFO0FBRWxFLGdCQUFZLFNBQVMsS0FBSztBQUFBLE1BQ3hCLE1BQU0sR0FBRyxpQkFBaUIsSUFBSSxnQkFBZ0IsK0JBQzVDLGFBQWEsS0FBSyxPQUFPLFNBQVMsTUFBTSxDQUMxQztBQUFBLE1BQ0EsS0FBSztBQUFBLElBQ1AsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLG9CQUFvQixhQUFnQztBQUMxRCxnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLDBCQUF1QixDQUFDO0FBQzNELGdCQUFZLFNBQVMsS0FBSztBQUFBLE1BQ3hCLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNQLENBQUM7QUFHRCxVQUFNLG1CQUFtQixLQUFLLE9BQU8sT0FDbEMsVUFBVSxFQUNWLE9BQU8sQ0FBQyxLQUFLLFVBQVU7QUFDdEIsVUFBSSxDQUFDLElBQUksTUFBTSxRQUFRLEVBQUcsS0FBSSxNQUFNLFFBQVEsSUFBSSxDQUFDO0FBQ2pELFVBQUksTUFBTSxRQUFRLEVBQUUsS0FBSyxLQUFLO0FBQzlCLGFBQU87QUFBQSxJQUNULEdBQUcsQ0FBQyxDQUF1QztBQUc3QyxXQUFPLFFBQVEsZ0JBQWdCLEVBQUUsUUFBUSxDQUFDLENBQUMsVUFBVSxNQUFNLE1BQU07QUFFL0QsWUFBTSxpQkFBaUIsWUFBWSxTQUFTLE1BQU07QUFBQSxRQUNoRCxNQUFNLGVBQWUsUUFBUSxLQUFLO0FBQUEsUUFDbEMsS0FBSztBQUFBLE1BQ1AsQ0FBQztBQUdELFlBQU0sa0JBQWtCLGVBQWUsU0FBUyxVQUFVO0FBQUEsUUFDeEQsTUFBTTtBQUFBLFFBQ04sS0FBSztBQUFBLE1BQ1AsQ0FBQztBQUVELHNCQUFnQixpQkFBaUIsU0FBUyxZQUFZO0FBQ3BELGNBQU0sYUFBYSxPQUFPLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTztBQUNoRCxjQUFNLFdBQVcsQ0FBQztBQUVsQixlQUFPLFFBQVEsQ0FBQyxVQUFVO0FBQ3hCLGVBQUssT0FBTyxTQUFTLE9BQU8sTUFBTSxFQUFFLElBQUk7QUFBQSxRQUMxQyxDQUFDO0FBRUQsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixhQUFLLFFBQVE7QUFBQSxNQUNmLENBQUM7QUFHRCxhQUFPLFFBQVEsQ0FBQyxVQUFVO0FBQ3hCLGNBQU0sVUFBVSxJQUFJLHlCQUFRLFdBQVcsRUFDcEMsUUFBUSxNQUFNLElBQUksRUFDbEIsUUFBUSxNQUFNLFdBQVcsRUFDekI7QUFBQSxVQUFVLENBQUMsV0FDVixPQUFPLFNBQVMsTUFBTSxPQUFPLEVBQUUsU0FBUyxPQUFPLFVBQVU7QUFDdkQsaUJBQUssT0FBTyxTQUFTLE9BQU8sTUFBTSxFQUFFLElBQUk7QUFDeEMsa0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxVQUNqQyxDQUFDO0FBQUEsUUFDSDtBQUdGLGNBQU0sZ0JBQWdCLEtBQUssbUNBQW1DLE1BQU0sRUFBRTtBQUN0RSxZQUFJLGVBQWU7QUFDakIsZ0JBQU0sUUFBUSxRQUFRLE9BQU8sU0FBUyxRQUFRO0FBQUEsWUFDNUMsTUFBTTtBQUFBLFlBQ04sS0FBSztBQUFBLFVBQ1AsQ0FBQztBQUFBLFFBQ0g7QUFHQSxZQUFJLE1BQU0sWUFBWTtBQUNwQixnQkFBTSxVQUFVLE1BQU0sV0FBVztBQUNqQyxnQkFBTSxZQUFZLFFBQVEsT0FBTyxVQUFVO0FBQUEsWUFDekMsS0FBSztBQUFBLFVBQ1AsQ0FBQztBQUVELG9CQUFVLFVBQVU7QUFBQSxZQUNsQixLQUFLO0FBQUEsVUFDUCxDQUFDLEVBQUUsWUFBWSwrREFBK0QsUUFBUSxNQUFNO0FBRTVGLG9CQUFVLFVBQVU7QUFBQSxZQUNsQixLQUFLO0FBQUEsVUFDUCxDQUFDLEVBQUUsWUFBWSxrRUFBK0QsUUFBUSxLQUFLO0FBQUEsUUFDN0Y7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNILENBQUM7QUFBQSxFQUNIO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSxxQkFBcUIsYUFBZ0M7QUFDM0QsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFHOUMsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsMkNBQXdDLEVBQ2hEO0FBQUEsTUFDQyx5Q0FDRSxhQUFhLEtBQUssT0FBTyxTQUFTLE1BQU0sQ0FDMUM7QUFBQSxJQUNGLEVBQ0M7QUFBQSxNQUFVLENBQUMsV0FDVixPQUFPLGNBQWMsV0FBVyxFQUFFLFFBQVEsWUFBWTtBQUNwRCxhQUFLLHNCQUFzQixLQUFLLE9BQU8sU0FBUyxNQUFNO0FBQ3RELGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsWUFBSSx3QkFBTyw0QkFBeUI7QUFBQSxNQUN0QyxDQUFDO0FBQUEsSUFDSDtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHNCQUFzQixRQUFzQjtBQUNsRCxVQUFNLGVBQWUsc0JBQXNCLE1BQU07QUFDakQsUUFBSSxjQUFjO0FBRWhCLGFBQU8sS0FBSyxLQUFLLE9BQU8sU0FBUyxNQUFNLEVBQUUsUUFBUSxDQUFDLFlBQW9CO0FBQ3BFLGFBQUssT0FBTyxTQUFTLE9BQU8sT0FBTyxJQUFJO0FBQUEsTUFDekMsQ0FBQztBQUdELG1CQUFhLFFBQVEsQ0FBQyxZQUFvQjtBQUN4QyxhQUFLLE9BQU8sU0FBUyxPQUFPLE9BQU8sSUFBSTtBQUFBLE1BQ3pDLENBQUM7QUFHRCxXQUFLLFFBQVE7QUFBQSxJQUNmO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsbUNBQW1DLFNBQTBCO0FBQ25FLFVBQU0sb0JBQ0osc0JBQXNCLEtBQUssT0FBTyxTQUFTLE1BQU07QUFDbkQsV0FBTyxvQkFBb0Isa0JBQWtCLFNBQVMsT0FBTyxJQUFJO0FBQUEsRUFDbkU7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGdCQUFnQixhQUFnQztBQUN0RCxRQUFJLENBQUMsWUFBWSxjQUFjLDJCQUEyQixHQUFHO0FBQzNELFlBQU0sUUFBUSxZQUFZLFNBQVMsU0FBUztBQUFBLFFBQzFDLEtBQUs7QUFBQSxNQUNQLENBQUM7QUFDRCxZQUFNLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQWtGdEI7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1RLHdCQUF3QixhQUFnQztBQUM5RCxVQUFNLFFBQVEsWUFBWSxTQUFTLEtBQUs7QUFBQSxNQUN0QyxNQUFNO0FBQUEsSUFDUixDQUFDO0FBQ0QsVUFBTSxNQUFNLGFBQWE7QUFDekIsVUFBTSxNQUFNLFlBQVk7QUFFeEIsUUFBSSx5QkFBUSxXQUFXLEVBQ3BCLFFBQVEsa0RBQStDLEVBQ3ZEO0FBQUEsTUFBVSxDQUFDLFdBQ1YsT0FDRyxTQUFTLEtBQUssT0FBTyxTQUFTLGdCQUFnQixFQUM5QyxTQUFTLE9BQU8sVUFBVTtBQUN6QixhQUFLLE9BQU8sU0FBUyxtQkFBbUI7QUFDeEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUNMO0FBQUEsRUFDSjtBQUNGOzs7QWpCdFVBLElBQXFCLG1CQUFyQixjQUE4Qyx3QkFBTztBQUFBLEVBQXJEO0FBQUE7QUFLRSwyQkFBc0M7QUFDdEMsNkJBQXdDO0FBQ3hDLCtCQUEyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLN0IsTUFBTSxTQUF3QjtBQUMxQixZQUFRLElBQUksMkNBQW9DO0FBRWhELFFBQUk7QUFFQSxZQUFNLEtBQUssYUFBYTtBQUd4QixXQUFLLFNBQVMsSUFBSSxpQkFBaUIsS0FBSyxRQUFRO0FBR2hELFdBQUssc0JBQXNCLGtCQUFrQixLQUFLLFFBQVE7QUFDMUQsV0FBSyx3QkFBd0IsS0FBSyxtQkFBbUI7QUFHckQsV0FBSyw0QkFBNEI7QUFFakMsVUFBSSxLQUFLLFNBQVMsaUJBQWlCO0FBQy9CLGFBQUssa0JBQWtCO0FBQUEsVUFDbkI7QUFBQSxVQUNBLEtBQUssU0FBUztBQUFBLFVBQ2QsS0FBSyxnQkFBZ0IsS0FBSyxJQUFJO0FBQUEsUUFDbEM7QUFBQSxNQUNKO0FBR0EsVUFBSSxLQUFLLFNBQVMsbUJBQW1CO0FBQ2pDLGFBQUssb0JBQW9CO0FBQUEsVUFDckI7QUFBQSxVQUNBLEtBQUssU0FBUztBQUFBLFVBQ2QsTUFBTSxLQUFLLGdCQUFnQjtBQUFBLFFBQy9CO0FBQUEsTUFDSjtBQUdBLFdBQUssWUFBWTtBQUdqQixXQUFLLHlCQUF5QjtBQUc5QixXQUFLLGNBQWMsSUFBSSxxQkFBcUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUUzRCxVQUFJLHdCQUFPLCtDQUF5QyxHQUFJO0FBQUEsSUFFNUQsU0FBUyxPQUFPO0FBQ1osY0FBUSxNQUFNLHFDQUFnQyxLQUFLO0FBQ25ELFVBQUksd0JBQU8sdUNBQXVDLEdBQUk7QUFBQSxJQUMxRDtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtFLFdBQWlCO0FBQ2YsWUFBUSxJQUFJLHVEQUE2QztBQUN6RCwwQkFBc0IsS0FBSyxlQUFlO0FBQzFDLDRCQUF3QixLQUFLLGlCQUFpQjtBQUFBLEVBQ2hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGVBQThCO0FBQ2xDLFVBQU0sYUFBYSxNQUFNLEtBQUssU0FBUztBQUN2QyxTQUFLLFdBQVcsaUJBQWlCLGNBQWMsQ0FBQyxDQUFDO0FBQUEsRUFDbkQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtGLE1BQU0sZUFBOEI7QUFDaEMsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBR2pDLFFBQUksS0FBSyxRQUFRO0FBQ2IsV0FBSyxPQUFPLGVBQWUsS0FBSyxRQUFRO0FBQUEsSUFDNUM7QUFHQSxTQUFLLDRCQUE0QjtBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJVSxjQUFvQjtBQUUxQixTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFdBQW1CO0FBQ2xDLGFBQUssaUJBQWlCLE1BQU07QUFBQSxNQUM5QjtBQUFBLElBQ0YsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsV0FBbUI7QUFDbEMsYUFBSyxrQkFBa0IsTUFBTTtBQUFBLE1BQy9CO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixVQUFVLFlBQVk7QUFDcEIsY0FBTSxLQUFLLHlCQUF5QjtBQUFBLE1BQ3RDO0FBQUEsSUFDRixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZCxhQUFLLGdCQUFnQjtBQUFBLE1BQ3ZCO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsaUJBQWlCLFFBQXNCO0FBQzdDLFVBQU0sWUFBWSxPQUFPLGFBQWE7QUFFdEMsUUFBSSxXQUFXO0FBRWIsWUFBTSxTQUFTLEtBQUssT0FBTyx1QkFBdUIsU0FBUztBQUMzRCxhQUFPLGlCQUFpQixPQUFPLFNBQVM7QUFFeEMsV0FBSyxxQkFBcUIsT0FBTyxrQkFBa0IsT0FBTyxVQUFVO0FBQUEsSUFDdEUsT0FBTztBQUVMLFdBQUssa0JBQWtCLE1BQU07QUFBQSxJQUMvQjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLGtCQUFrQixRQUFzQjtBQUM5QyxVQUFNLFVBQVUsT0FBTyxTQUFTO0FBQ2hDLFVBQU0sU0FBUyxLQUFLLE9BQU8sdUJBQXVCLE9BQU87QUFFekQsUUFBSSxPQUFPLGNBQWMsU0FBUztBQUNoQyxhQUFPLFNBQVMsT0FBTyxTQUFTO0FBQ2hDLFdBQUsscUJBQXFCLE9BQU8sa0JBQWtCLE9BQU8sVUFBVTtBQUFBLElBQ3RFLE9BQU87QUFDTCxVQUFJLHdCQUFPLG1DQUFnQyxHQUFJO0FBQUEsSUFDakQ7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFjLDJCQUEwQztBQUN0RCxTQUFLLFNBQVMsMkJBQ1osQ0FBQyxLQUFLLFNBQVM7QUFDakIsVUFBTSxLQUFLLGFBQWE7QUFFeEIsVUFBTSxTQUFTLEtBQUssU0FBUywyQkFDekIsZUFDQTtBQUNKLFFBQUksd0JBQU8sNEJBQXlCLE1BQU0sSUFBSSxHQUFJO0FBQUEsRUFDcEQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLHFCQUNOLGtCQUNBLFlBQ007QUFDTixRQUFJLHFCQUFxQixHQUFHO0FBQzFCLFVBQUksd0JBQU8sa0NBQStCLEdBQUk7QUFDOUM7QUFBQSxJQUNGO0FBRUEsVUFBTSxVQUNKLHFCQUFxQixJQUNqQiw4QkFDQSxHQUFHLGdCQUFnQjtBQUV6QixRQUFJLHdCQUFPLFNBQVMsR0FBSTtBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLUSwyQkFBaUM7QUFDdkMsU0FBSyxpQkFBaUIsVUFBVSxXQUFXLENBQUMsVUFBeUI7QUFDbkUsV0FBSyxjQUFjLEtBQUs7QUFBQSxJQUMxQixDQUFDO0FBQUEsRUFDSDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS1EsY0FBYyxPQUE0QjtBQUVoRCxVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDZCQUFZO0FBQ3RFLFFBQUksQ0FBQyxjQUFjLFdBQVcsUUFBUSxNQUFNLFVBQVU7QUFDcEQ7QUFBQSxJQUNGO0FBRUEsVUFBTSxTQUFTLFdBQVc7QUFHMUIsUUFBSSxLQUFLLE9BQU8sZUFBZSxPQUFPLE1BQU0sR0FBRztBQUM3QyxZQUFNLGVBQWU7QUFBQSxJQUN2QjtBQUFBLEVBQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9PLFlBQThCO0FBQ25DLFdBQU8sS0FBSztBQUFBLEVBQ2Q7QUFBQSxFQUVBLE1BQWEsaUJBQWlCLE1BQStCO0FBQzNELFdBQU8sS0FBSyxPQUFPLFlBQVksSUFBSTtBQUFBLEVBQ3JDO0FBQUEsRUFFTyxxQkFBK0I7QUFDcEMsV0FBTyxLQUFLLE9BQU8sVUFBVSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRTtBQUFBLEVBQ2hEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLTSw4QkFBb0M7QUFDeEMsUUFBSSxLQUFLLFNBQVMsa0JBQWtCO0FBQ2hDLGVBQVMsS0FBSyxTQUFTLDJCQUEyQjtBQUFBLElBQ3RELE9BQU87QUFDSCxlQUFTLEtBQUssWUFBWSwyQkFBMkI7QUFBQSxJQUN6RDtBQUFBLEVBQ0o7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQWMsa0JBQWlDO0FBQzNDLFNBQUssU0FBUyxtQkFBbUIsQ0FBQyxLQUFLLFNBQVM7QUFHaEQsU0FBSyw0QkFBNEI7QUFFakMsVUFBTSxLQUFLLGFBQWE7QUFFeEIsVUFBTSxTQUFTLEtBQUssU0FBUyxtQkFBbUIsY0FBVztBQUMzRCxRQUFJLHdCQUFPLDBDQUF1QyxNQUFNLElBQUksR0FBSTtBQUdoRSwwQkFBc0IsS0FBSyxpQkFBaUIsS0FBSyxTQUFTLGdCQUFnQjtBQUMxRSw0QkFBd0IsS0FBSyxtQkFBbUIsS0FBSyxTQUFTLGdCQUFnQjtBQUFBLEVBQ2xGO0FBRUE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
